var J=Object.defineProperty,z=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var x=(t,e,r)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,I=(t,e)=>{for(var r in e||(e={}))q.call(e,r)&&x(t,r,e[r]);if(v)for(var r of v(e))V.call(e,r)&&x(t,r,e[r]);return t},E=(t,e)=>z(t,Y(e));import{r as A,b as D,F as Q,s as X,j as n,h as W,P as Z,G as ee,t as te,v as re,M as ae,w as se,x as le,y as ne,z as ue}from"./vendor.d72687a6.js";import{c as G,i as j,r as B}from"./NavigationBar.60fa7a4c.js";import{i as H,g as oe,S,d as P,M as u,R as o,e as i,f as N,h as d,t as ie,j as ce,k as Oe,l as Se,m as Te}from"./index.18ef27b6.js";import{P as M,W as U}from"./WishState.3db35fd5.js";import{g as fe}from"./domUtils.e9df6b0f.js";var p={},Ie=j.exports;Object.defineProperty(p,"__esModule",{value:!0});var k=p.default=void 0,de=Ie(G),_e=B,Ee=(0,de.default)((0,_e.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt");k=p.default=Ee;var y={},Ne=j.exports;Object.defineProperty(y,"__esModule",{value:!0});var w=y.default=void 0,Re=Ne(G),Ae=B,he=(0,Re.default)((0,Ae.jsx)("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z"}),"FilterAltOff");w=y.default=he;function Fe(t){return(t!=null?t:[S.FRONT,S.MIDDLE,S.BACK]).map(e=>({filterKey:e,name:ie(e)}))}function Pe(t){return(t!=null?t:Object.keys(P)).map(e=>({filterKey:e,name:P[e].name}))}function me(t){return(t!=null?t:[u.JUPITER_INDUSTRIES,u.NOMA_SHIPPING_GROUP,u.ANTONIOS_CONSORTIUM,u.DAWN_ACCORD]).map(e=>({filterKey:e,name:ce(e)}))}function Ce(t){return(t!=null?t:[o.JUPITER_INDUSTRIES,o.NOMA_SHIPPING_GROUP,o.ANTONIOS_CONSORTIUM,o.DAWN_ACCORD]).map(e=>({filterKey:e,name:`\u59D4\u8A17\u4F01\u696D\uFF1A${Oe(e)}`}))}function De(t){return(t!=null?t:[i.OUTSTANDING_FIREPOWER,i.SUSTAINED_COMBAT,i.STRATEGY_AND_SUPPORT,i.FIGHTER_AND_CORVETTE]).map(e=>({filterKey:e,name:`\u6226\u7565\u80FD\u529B\uFF1A${Se(e)}`}))}function Me(t){return(t!=null?t:[N.PROJECTILE_WEAPONS,N.DIRECT_FIRE_WEAPONS]).map(e=>({filterKey:e,name:`\u6226\u8853\u6027\u80FD\uFF1A${Te(e)}`}))}function Ue(t={}){var e,r,a,s,l,T;return[...Fe((e=t.shipRows)!=null?e:null),...Pe((r=t.shipTypes)!=null?r:null),...me((a=t.manufacturer)!=null?a:null),...t.researchManufacturer===!1?[]:Ce((s=t.researchManufacturer)!=null?s:null),...t.researchStrategyTypes===!1?[]:De((l=t.researchStrategyTypes)!=null?l:null),...t.researchTacticTypes===!1?[]:Me((T=t.researchTacticTypes)!=null?T:null)]}function ge(){return E(I({[S.FRONT]:!1,[S.MIDDLE]:!1,[S.BACK]:!1},Object.keys(P).reduce((t,e)=>E(I({},t),{[e]:!1}),{})),{[u.JUPITER_INDUSTRIES]:!1,[u.NOMA_SHIPPING_GROUP]:!1,[u.ANTONIOS_CONSORTIUM]:!1,[u.DAWN_ACCORD]:!1,[o.JUPITER_INDUSTRIES]:!1,[o.NOMA_SHIPPING_GROUP]:!1,[o.ANTONIOS_CONSORTIUM]:!1,[o.DAWN_ACCORD]:!1,[i.OUTSTANDING_FIREPOWER]:!1,[i.SUSTAINED_COMBAT]:!1,[i.STRATEGY_AND_SUPPORT]:!1,[i.FIGHTER_AND_CORVETTE]:!1,[N.PROJECTILE_WEAPONS]:!1,[N.DIRECT_FIRE_WEAPONS]:!1})}function pe(t){const e=I({},t);return Object.keys(e).forEach(r=>{e[r]=!1}),e}function $e(t,e){let r=t;return ye(e)&&(r=r.filter(a=>e[a.row]===!0)),be(e)&&(r=r.filter(a=>e[a.type]===!0)),ve(e)&&(r=r.filter(a=>e[a.manufacturer]===!0)),xe(e)&&(r=r.filter(a=>a.researchManufacturer&&e[a.researchManufacturer]===!0)),We(e)&&(r=r.filter(a=>{var s;return((s=a.researchStrategyTypes)!=null?s:[]).some(l=>e[l]===!0)})),Ge(e)&&(r=r.filter(a=>{var s;return((s=a.researchTacticTypes)!=null?s:[]).some(l=>e[l]===!0)})),r}function Je(t){const e={[d.STARTER_SHIP]:[],[d.TECH_FILE]:[],[d.CITY_TRADE]:[],[d.DOCK_EFFECT]:[],[d.UNKNOWN]:[]};return t.forEach(r=>{e[r.source].push(r)}),e}function ye(t){return[S.FRONT,S.MIDDLE,S.BACK].some(e=>t[e]===!0)}function be(t){return Object.keys(P).some(e=>t[e]===!0)}function ve(t){return[u.JUPITER_INDUSTRIES,u.NOMA_SHIPPING_GROUP,u.ANTONIOS_CONSORTIUM,u.DAWN_ACCORD].some(e=>t[e]===!0)}function xe(t){return[o.JUPITER_INDUSTRIES,o.NOMA_SHIPPING_GROUP,o.ANTONIOS_CONSORTIUM,o.DAWN_ACCORD].some(e=>t[e]===!0)}function We(t){return[i.OUTSTANDING_FIREPOWER,i.SUSTAINED_COMBAT,i.STRATEGY_AND_SUPPORT,i.FIGHTER_AND_CORVETTE].some(e=>t[e]===!0)}function Ge(t){return[N.PROJECTILE_WEAPONS,N.DIRECT_FIRE_WEAPONS].some(e=>t[e]===!0)}function ze(t,e){return t.filter(r=>{var a;return((a=e[r.id])==null?void 0:a.possession)===M.POSSESSED})}function Ye(t,e){return t.filter(r=>{var a;return((a=e[r.id])==null?void 0:a.wish)===U.WANTED})}function qe(t,e){return t.filter(r=>{var a;return H(r.id)&&((a=e[r.id])==null?void 0:a.wish)===U.NOT_WANTED})}function Ve(t,e){return t.filter(s=>s.source===d.TECH_FILE||s.source===d.STARTER_SHIP).filter(s=>{var l;return((l=e[s.id])==null?void 0:l.possession)===M.POSSESSED}).filter(s=>{var l,T,h;if(!!s.modules&&s.modules.length>0||s.baseModelId)return!1;if(!!s.subModelIds||!!s.baseModelId){const O=(h=(T=s.subModelIds)!=null?T:(l=oe(s.baseModelId))==null?void 0:l.subModelIds)!=null?h:[];return je(O,e)?!(O.filter(f=>H(f)&&!!e[f]&&e[f].possession!==M.POSSESSED).filter(f=>e[f].wish!==U.NOT_WANTED).length>0):!1}return!0})}function je(t,e){return t.length>0&&t.every(r=>{var a;return!!((a=e[r])==null?void 0:a.possession)})}const Qe=t=>{const{onChange:e,popperProps:r,shipRows:a,shipTypes:s,researchManufacturer:l,researchStrategyTypes:T,researchTacticTypes:h,buttonProps:O}=t,[_,m]=A.exports.useState(t.filter),[f,b]=A.exports.useState(!1),[K]=A.exports.useState(()=>Ue({shipRows:a,shipTypes:s,researchManufacturer:l,researchStrategyTypes:T,researchTacticTypes:h})),C=A.exports.useRef(null),L=c=>{m(F=>E(I({},F),{[c]:!F[c]}))},g=()=>{m(c=>pe(c))};A.exports.useEffect(()=>{const c=setTimeout(()=>{e(_)},0);return()=>clearTimeout(c)},[_,e]);const $=Object.values(_).some(c=>c);return D(Q,{children:[D(X,{variant:"outlined",ref:C,fullWidth:O==null?void 0:O.fullWidth,size:O==null?void 0:O.size,children:[n(W,{startIcon:n(k,{}),onClick:()=>b(!0),sx:{flexShrink:1},children:"\u30D5\u30A3\u30EB\u30BF\u30FC"}),$&&n(W,{size:"small",onClick:g,sx:{flexShrink:3},children:n(w,{})})]},"filter"),n(Z,E(I({open:f,anchorEl:C.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1}},r),{children:({TransitionProps:c,placement:F})=>n(ee,E(I({},c),{style:{transformOrigin:F==="bottom"?"center top":"center bottom"},children:n(te,{style:{maxHeight:fe(C.current),overflowY:"auto"},children:n(re,{onClickAway:()=>b(!1),children:n(ae,{id:"split-button-menu",children:K.map(R=>D(se,{selected:_[R.filterKey],onClick:()=>L(R.filterKey),children:[n(le,{children:n(ne,{edge:"start",checked:_[R.filterKey],tabIndex:-1,disableRipple:!0})}),n(ue,{children:R.name})]},R.filterKey))})})})}))}))]})};export{Qe as S,$e as a,Ye as b,ge as c,qe as d,ze as e,Ve as f,Je as s};
