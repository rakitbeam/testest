import{j as e,a as S,F as P,B as L,t as i,r as o,S as C,T as f,P as E,J as I,K as k,L as R,W as b,b0 as W,b as D,c as B,b1 as $,u as A,b2 as q,b3 as w,Y as h,a4 as U,k as Y,aG as z,aH as j,aJ as H,p as G,o as K}from"./index.d5f2f31e.js";import{d as J,a as V,b as Q,C as X}from"./ConfirmationDialog.2dca134a.js";import{S as Z,a as ee,s as se,c as te}from"./ShipTypeFilterButton.5f45e66c.js";import{A as ie}from"./ActionBar.5e1cc409.js";import{d as ne}from"./Settings.2c30ce39.js";import{T as N,a as x}from"./ToggleButtonGroup.715d8d7c.js";import{N as oe,P as ae}from"./PageContent.2223fbba.js";import{P as re}from"./PageFooter.571993c9.js";import"./ResponsiveDialog.ae3e3958.js";import"./DialogContentText.84f5d67d.js";import"./domUtils.cc05ceb3.js";import"./useFormControl.757befdb.js";const le=a=>{const{shipFilter:s,onCancel:t,onSave:n,onReset:c,onFilter:d}=a;return e(ie,{left:l=>e(Z,{filter:s,onChange:d,researchManufacturer:!1,researchStrategyTypes:!1,researchTacticTypes:!1,buttonProps:l},"filter"),right:l=>S(P,{children:[e(L,{variant:"outlined",startIcon:e(J,{}),onClick:c,...l,children:i("button.initialize")},"reset"),e(L,{variant:"outlined",startIcon:e(V,{}),onClick:t,...l,children:i("button.cancel")},"cancel"),e(L,{variant:"contained",startIcon:e(Q,{}),onClick:n,...l,children:i("button.save")},"save")]})})},_=a=>{const{label:s,options:t,possession:n,onChange:c}=a,[d,l]=o.exports.useState(n),[u,p]=o.exports.useTransition(),r=(m,y)=>{l(y===null?E.UNDEFINED:Number(y))};return o.exports.useEffect(()=>{p(()=>{c(d)})},[d,c]),S(C,{spacing:1,direction:"row",alignItems:"center",children:[e(f,{variant:"body2",children:s}),S(N,{size:"small",color:"primary",value:`${d}`,exclusive:!0,onChange:r,children:[e(x,{value:`${E.POSSESSED}`,children:t[0]}),e(x,{value:`${E.NOT_POSSESSED}`,children:t[1]})]})]})};var O={},ce=k.exports;Object.defineProperty(O,"__esModule",{value:!0});var F=O.default=void 0,de=ce(I),pe=R,ue=(0,de.default)((0,pe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");F=O.default=ue;const M=a=>{const{wish:s,onChange:t}=a,[n,c]=o.exports.useState(s),[d,l]=o.exports.useTransition(),u=(p,r)=>{c(r===null||r==="clear"?b.UNDEFINED:Number(r))};return o.exports.useEffect(()=>{l(()=>{t(n)})},[n,t]),S(C,{spacing:1,direction:"row",alignItems:"center",children:[e(f,{variant:"body2",children:i("myList.wantOption")}),S(N,{size:"small",color:"primary",value:`${n}`,exclusive:!0,onChange:u,children:[e(x,{value:`${b.WANTED}`,children:i("myList.wantOptionYes")}),e(x,{value:`${b.NOT_WANTED}`,children:i("myList.wantOptionNo")}),n!==b.UNDEFINED&&e(x,{value:"clear",children:e(F,{})})]})]})},he=a=>{const{ship:s,module:t,userSettings:n,setModulePossession:c,setModuleWish:d}=a,l=o.exports.useCallback(r=>{c(t.id,s.id,r)},[t,s,c]),u=o.exports.useCallback(r=>{d(t.id,s.id,r)},[t,s,d]),p=o.exports.useMemo(()=>W(t.id,s.id,n),[t,s,n]);return e(D,{pl:2,children:S(C,{spacing:3,children:[e(f,{variant:"h6",children:`${t.category}${t.categoryNumber} ${B(s.id,t)}`}),e(_,{label:i("myList.additionalModuleAcquiredOption"),options:[i("myList.blueprintAcquiredOptionYes"),i("myList.blueprintAcquiredOptionNo")],possession:p,onChange:l}),p===E.NOT_POSSESSED&&e(M,{wish:$(t.id,s.id,n),onChange:u})]})},t.id)},Se=a=>{const{ship:s,...t}=a,{userSettings:n,setShipPossession:c,setShipWish:d,setModulePossession:l,setModuleWish:u}=A(),p=o.exports.useMemo(()=>q(s.id,n),[s,n]),r=o.exports.useMemo(()=>w(s.id,n),[s,n]),m=o.exports.useMemo(()=>r!==b.UNDEFINED?!0:s.source===h.TECH_FILE&&p===E.NOT_POSSESSED,[s,p,r]),y=o.exports.useCallback(g=>{c(s.id,g)},[c,s]),T=o.exports.useCallback(g=>{d(s.id,g)},[d,s]);return e(U,{elevation:2,...t,children:e(D,{p:1,children:S(C,{spacing:3,children:[e(f,{variant:"h6",children:Y(s)}),e(_,{label:ge(s),options:fe(s),possession:p,onChange:y}),m&&e(M,{wish:r,onChange:T}),(s.source===h.TECH_FILE||s.source===h.STARTER_SHIP)&&p===E.POSSESSED&&s.modules&&s.modules.filter(g=>!g.defaultModule).map(g=>e(he,{ship:s,module:g,userSettings:n,setModulePossession:l,setModuleWish:u},g.id))]})})})};function ge(a){switch(a.source){case h.CITY_TRADE:return i("myList.shipBoughtOption");case h.DOCK_EFFECT:return i("myList.dockingEffectBlueprintAcquiredOption");case h.SALVAGE:return i("myList.salvageAcquiredOption");default:return i("myList.blueprintAcquiredOption")}}function fe(a){switch(a.source){case h.CITY_TRADE:return[i("myList.shipBoughtOptionYes"),i("myList.shipBoughtOptionNo")];default:return[i("myList.blueprintAcquiredOptionYes"),i("myList.blueprintAcquiredOptionNo")]}}const v=a=>{const{id:s,title:t,shipDefinitions:n,initiallyOpened:c,preRenderDetails:d=!1}=a,[l,u]=o.exports.useState(c),p=o.exports.useCallback((r,m)=>{u(m)},[]);return S(z,{expanded:l,onChange:p,children:[e(j,{id:s,expandIcon:e(ne,{}),children:e(f,{variant:"body1",children:t})}),e(H,{children:(l||d)&&e(C,{spacing:3,children:n.map(r=>e(Se,{ship:r},r.id))})})]})},me=a=>{const{shipFilter:s}=a,t=o.exports.useMemo(()=>{const n=ee(G,s);return se(n)},[s]);return S(C,{spacing:1,children:[e("div",{children:e(v,{id:"tech-file-ships",title:i("shipSource.techFile"),initiallyOpened:!1,preRenderDetails:!0,shipDefinitions:t[h.TECH_FILE]})}),e("div",{children:e(v,{id:"city-trade-ships",title:i("shipSource.cityTrade"),initiallyOpened:!1,shipDefinitions:t[h.CITY_TRADE]})}),e("div",{children:e(v,{id:"dock-effect-ships",title:i("shipSource.dockEffect"),initiallyOpened:!1,shipDefinitions:t[h.DOCK_EFFECT]})}),e("div",{children:e(v,{id:"salvage-ships",title:i("shipSource.salvage"),initiallyOpened:!1,shipDefinitions:t[h.SALVAGE]})}),e("div",{children:e(v,{id:"starter-ships",title:i("shipSource.starterShip"),initiallyOpened:!1,shipDefinitions:t[h.STARTER_SHIP]})})]})},Ne=()=>{const a=K(),{saveUserSettings:s,restoreUserSettings:t,resetUserSettings:n}=A(),[c,d]=o.exports.useState(te),[l,u]=o.exports.useState(!1);o.exports.useEffect(()=>()=>{t()},[t]);const p=o.exports.useCallback(()=>{t(),a("/myList")},[t,a]),r=o.exports.useCallback(()=>{s(),a("/myList")},[s,a]),m=o.exports.useCallback(()=>{u(!1)},[]),y=o.exports.useCallback(()=>{u(!0)},[]),T=o.exports.useCallback(()=>{u(!1),n()},[n]);return S(P,{children:[e(oe,{currentRoute:"/myList"}),e(le,{shipFilter:c,onCancel:p,onReset:y,onSave:r,onFilter:d}),e(ae,{children:S(D,{p:1,children:[S(C,{pt:1,pb:2,spacing:2,children:[e(f,{variant:"body2",children:i("myListConfig.pageDescription1")}),e(f,{variant:"body2",children:i("myListConfig.pageDescription2")}),e(f,{variant:"body2",children:i("myListConfig.pageDescription3")})]}),e(me,{shipFilter:c})]})}),l&&e(X,{title:i("button.initialize"),question:i("myList.confirmInitialize"),cancelText:i("button.cancel"),confirmText:i("button.initialize"),onCancel:m,onConfirm:T}),e(re,{})]})};export{Ne as MyListEditPage,Ne as default};
