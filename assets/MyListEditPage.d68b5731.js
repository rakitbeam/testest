import{i as e,j as u,F as P,B as T,t,r as n,q as C,T as S,Q as v,N as I,O as k,P as R,W as x,b6 as W,d as B,aI as $,m as D,f as q,b7 as w,u as A,b8 as U,b9 as z,a1 as g,a8 as Y,g as j,a9 as H,aK as G,aL as K,aN as V,k as J,x as Q}from"./index.5e0e4e47.js";import{d as X,C as Z}from"./ConfirmationDialog.f5e6ba8e.js";import{d as ee,a as ie}from"./DeleteForever.2044ba0c.js";import{S as se,a as te,s as ne,c as oe}from"./ShipTypeFilterButton.d4892a32.js";import{A as ae}from"./ActionBar.7aba5510.js";import{d as re}from"./Settings.49cf722d.js";import{T as N,a as b}from"./ToggleButtonGroup.02a6fbbd.js";import{N as le,P as ce}from"./PageContent.59abca1d.js";import{P as de}from"./PageFooter.d1d1e27e.js";import"./ResponsiveDialog.ed2f0ad7.js";import"./DialogContentText.01a88684.js";import"./domUtils.35104bdf.js";import"./useFormControl.59228fd5.js";const pe=a=>{const{shipFilter:i,onCancel:s,onSave:o,onReset:l,onFilter:d}=a;return e(ae,{left:r=>e(se,{filter:i,onChange:d,researchManufacturer:!1,researchStrategyTypes:!1,researchTacticTypes:!1,buttonProps:r},"filter"),right:r=>u(P,{children:[e(T,{variant:"outlined",startIcon:e(ee,{}),onClick:l,...r,children:t("button.initialize")},"reset"),e(T,{variant:"outlined",startIcon:e(ie,{}),onClick:s,...r,children:t("button.cancel")},"cancel"),e(T,{variant:"contained",startIcon:e(X,{}),onClick:o,...r,children:t("button.save")},"save")]})})},F=a=>{const{label:i,options:s,possession:o,onChange:l}=a,[d,r]=n.exports.useState(o),[h,p]=n.exports.useTransition(),c=(m,y)=>{r(y===null?v.UNDEFINED:Number(y))};return n.exports.useEffect(()=>{p(()=>{l(d)})},[d,l]),u(C,{spacing:1,direction:"row",alignItems:"center",children:[e(S,{variant:"body2",children:i}),u(N,{size:"small",color:"primary",value:`${d}`,exclusive:!0,onChange:c,children:[e(b,{value:`${v.POSSESSED}`,children:s[0]}),e(b,{value:`${v.NOT_POSSESSED}`,children:s[1]})]})]})};var O={},ue=k.exports;Object.defineProperty(O,"__esModule",{value:!0});var _=O.default=void 0,he=ue(I),ge=R,me=(0,he.default)((0,ge.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");_=O.default=me;const M=a=>{const{wish:i,onChange:s}=a,[o,l]=n.exports.useState(i),[d,r]=n.exports.useTransition(),h=(p,c)=>{l(c===null||c==="clear"?x.UNDEFINED:Number(c))};return n.exports.useEffect(()=>{r(()=>{s(o)})},[o,s]),u(C,{spacing:1,direction:"row",alignItems:"center",children:[e(S,{variant:"body2",children:t("myList.wantOption")}),u(N,{size:"small",color:"primary",value:`${o}`,exclusive:!0,onChange:h,children:[e(b,{value:`${x.WANTED}`,children:t("myList.wantOptionYes")}),e(b,{value:`${x.NOT_WANTED}`,children:t("myList.wantOptionNo")}),o!==x.UNDEFINED&&e(b,{value:"clear",children:e(_,{})})]})]})},Se=a=>{const{ship:i,module:s,userSettings:o,setModulePossession:l,setModuleWish:d}=a,r=n.exports.useCallback(m=>{l(s.id,i.id,m)},[s,i,l]),h=n.exports.useCallback(m=>{d(s.id,i.id,m)},[s,i,d]),p=n.exports.useMemo(()=>W(s.id,i.id,o),[s,i,o]),c=B()===$.JAPANESE;return e(D,{pl:2,children:u(C,{spacing:3,children:[u("div",{children:[e(S,{variant:"h6",children:`${s.category}${s.categoryNumber} ${q(i.id,s)}`}),c&&s.description&&e(S,{variant:"caption",color:"text.secondary",children:s.description})]}),e(F,{label:t("myList.additionalModuleAcquiredOption"),options:[t("myList.blueprintAcquiredOptionYes"),t("myList.blueprintAcquiredOptionNo")],possession:p,onChange:r}),p===v.NOT_POSSESSED&&e(M,{wish:w(s.id,i.id,o),onChange:h})]})},s.id)},fe=a=>{const{ship:i,...s}=a,{userSettings:o,setShipPossession:l,setShipWish:d,setModulePossession:r,setModuleWish:h}=A(),p=n.exports.useMemo(()=>U(i.id,o),[i,o]),c=n.exports.useMemo(()=>z(i.id,o),[i,o]),m=n.exports.useMemo(()=>c!==x.UNDEFINED?!0:i.source===g.TECH_FILE&&p===v.NOT_POSSESSED,[i,p,c]),y=n.exports.useCallback(f=>{l(i.id,f)},[l,i]),L=n.exports.useCallback(f=>{d(i.id,f)},[d,i]);return e(Y,{elevation:2,...s,children:e(D,{p:1,children:u(C,{spacing:3,children:[e(S,{variant:"h6",children:j(i)}),e(F,{label:Ce(i),options:ye(i),possession:p,onChange:y}),m&&e(M,{wish:c,onChange:L}),(i.source===g.TECH_FILE||i.source===g.STARTER_SHIP)&&p===v.POSSESSED&&i.modules&&i.modules.filter(f=>!f.defaultModule).map(f=>u(n.exports.Fragment,{children:[e(H,{}),e(Se,{ship:i,module:f,userSettings:o,setModulePossession:r,setModuleWish:h})]},f.id))]})})})};function Ce(a){switch(a.source){case g.CITY_TRADE:return t("myList.shipBoughtOption");case g.DOCK_EFFECT:return t("myList.dockingEffectBlueprintAcquiredOption");case g.SALVAGE:return t("myList.salvageAcquiredOption");default:return t("myList.blueprintAcquiredOption")}}function ye(a){switch(a.source){case g.CITY_TRADE:return[t("myList.shipBoughtOptionYes"),t("myList.shipBoughtOptionNo")];default:return[t("myList.blueprintAcquiredOptionYes"),t("myList.blueprintAcquiredOptionNo")]}}const E=a=>{const{id:i,title:s,shipDefinitions:o,initiallyOpened:l,preRenderDetails:d=!1}=a,[r,h]=n.exports.useState(l),p=n.exports.useCallback((c,m)=>{h(m)},[]);return u(G,{expanded:r,onChange:p,children:[e(K,{id:i,expandIcon:e(re,{}),children:e(S,{variant:"body1",children:s})}),e(V,{children:(r||d)&&e(C,{spacing:3,children:o.map(c=>e(fe,{ship:c},c.id))})})]})},ve=a=>{const{shipFilter:i}=a,s=n.exports.useMemo(()=>{const o=te(J,i);return ne(o)},[i]);return u(C,{spacing:1,children:[e("div",{children:e(E,{id:"tech-file-ships",title:t("shipSource.techFile"),initiallyOpened:!1,preRenderDetails:!0,shipDefinitions:s[g.TECH_FILE]})}),e("div",{children:e(E,{id:"city-trade-ships",title:t("shipSource.cityTrade"),initiallyOpened:!1,shipDefinitions:s[g.CITY_TRADE]})}),e("div",{children:e(E,{id:"dock-effect-ships",title:t("shipSource.dockEffect"),initiallyOpened:!1,shipDefinitions:s[g.DOCK_EFFECT]})}),e("div",{children:e(E,{id:"salvage-ships",title:t("shipSource.salvage"),initiallyOpened:!1,shipDefinitions:s[g.SALVAGE]})}),e("div",{children:e(E,{id:"starter-ships",title:t("shipSource.starterShip"),initiallyOpened:!1,shipDefinitions:s[g.STARTER_SHIP]})})]})},Ie=()=>{const a=Q(),{saveUserSettings:i,restoreUserSettings:s,resetUserSettings:o}=A(),[l,d]=n.exports.useState(oe),[r,h]=n.exports.useState(!1);n.exports.useEffect(()=>()=>{s()},[s]);const p=n.exports.useCallback(()=>{s(),a("/myList")},[s,a]),c=n.exports.useCallback(()=>{i(),a("/myList")},[i,a]),m=n.exports.useCallback(()=>{h(!1)},[]),y=n.exports.useCallback(()=>{h(!0)},[]),L=n.exports.useCallback(()=>{h(!1),o()},[o]);return u(P,{children:[e(le,{currentRoute:"/myList"}),e(pe,{shipFilter:l,onCancel:p,onReset:y,onSave:c,onFilter:d}),e(ce,{children:u(D,{p:1,children:[u(C,{pt:1,pb:2,spacing:2,children:[e(S,{variant:"body2",children:t("myListConfig.pageDescription1")}),e(S,{variant:"body2",children:t("myListConfig.pageDescription2")}),e(S,{variant:"body2",children:t("myListConfig.pageDescription3")})]}),e(ve,{shipFilter:l})]})}),r&&e(Z,{title:t("button.initialize"),question:t("myList.confirmInitialize"),cancelText:t("button.cancel"),confirmText:t("button.initialize"),onCancel:m,onConfirm:L}),e(de,{})]})};export{Ie as MyListEditPage,Ie as default};
