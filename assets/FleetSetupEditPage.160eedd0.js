import{A as j,C as U,D as _,K as V,_ as w,r as p,O as q,G,I as Y,T as S,k as o,j as g,J as K,L as De,M as ct,N as $e,bN as dt,H as ut,ai as pt,a_ as ht,bO as Me,bP as pe,aa as O,q as T,bA as ft,t as u,F as I,B as $,z as Ae,w as R,m as Ie,bh as Le,c as F,S as ee,P as ne,Q as oe,R as re,ah as X,az as Q,aK as mt,aD as gt,g as Ct,bC as L,bM as P,u as yt,bQ as vt,f as Ee,d as bt,aM as St,bD as xt,br as Rt,aw as Ft}from"./index.97c8bd22.js";import{a as N,c as kt,N as wt,P as Tt}from"./PageContent.47d44302.js";import{T as z,A as Oe}from"./TextField.a57db6e5.js";import{d as Dt,C as $t}from"./ConfirmationDialog.c8d6d681.js";import{d as Mt,a as At}from"./DeleteForever.458e644a.js";import{A as It}from"./ActionBar.cc930cdd.js";import{S as Lt,a as Et,c as _e,d as Ot,e as _t,s as Pt,h as Gt,i as Bt,v as ae,j as Pe,k as Nt,l as he,n as zt,b as Ht,G as fe,g as Wt}from"./fleetSetupValidation.8b072524.js";import{d as Ge}from"./Add.22d27d3d.js";import{B as jt}from"./ButtonMenu.59179f8e.js";import{R as ie}from"./ResponsiveDialog.142f579a.js";import{I as me}from"./IconButton.eaaa4b31.js";import{f as Be,F as Ut}from"./Select.4b61f431.js";import{u as Ne}from"./useFormControl.3ed948e3.js";import{g as Vt,c as ze,S as He}from"./ShipTypeFilterButton.2d3d0946.js";import{T as qt}from"./Tooltip.f71dff15.js";import"./DialogContentText.a02de16b.js";import"./sorting.c6946657.js";import"./domUtils.bc85d9e5.js";function Yt(t){return String(t).match(/[\d.\-+]*\s*(.*)/)[1]||""}function Kt(t){return parseFloat(t)}function Xt(t){return j("MuiFormControlLabel",t)}const Qt=U("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]);var H=Qt;const Jt=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],Zt=t=>{const{classes:e,disabled:n,labelPlacement:r,error:a}=t,s={root:["root",n&&"disabled",`labelPlacement${V(r)}`,a&&"error"],label:["label",n&&"disabled"]};return Y(s,Xt,e)},en=_("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${H.label}`]:e.label},e.root,e[`labelPlacement${V(n.labelPlacement)}`]]}})(({theme:t,ownerState:e})=>w({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${H.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${H.label}`]:{[`&.${H.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),tn=p.exports.forwardRef(function(e,n){const r=q({props:e,name:"MuiFormControlLabel"}),{className:a,componentsProps:s={},control:l,disabled:c,disableTypography:m,label:h,labelPlacement:C="end"}=r,v=G(r,Jt),d=Ne();let f=c;typeof f=="undefined"&&typeof l.props.disabled!="undefined"&&(f=l.props.disabled),typeof f=="undefined"&&d&&(f=d.disabled);const i={disabled:f};["checked","name","onChange","value","inputRef"].forEach(D=>{typeof l.props[D]=="undefined"&&typeof r[D]!="undefined"&&(i[D]=r[D])});const y=Be({props:r,muiFormControl:d,states:["error"]}),b=w({},r,{disabled:f,labelPlacement:C,error:y.error}),x=Zt(b);let k=h;return k!=null&&k.type!==S&&!m&&(k=o(S,w({component:"span",className:x.label},s.typography,{children:k}))),g(en,w({className:K(x.root,a),ownerState:b,ref:n},v,{children:[p.exports.cloneElement(l,i),k]}))});var ge=tn;function nn(t){return j("MuiFormGroup",t)}U("MuiFormGroup",["root","row","error"]);const on=["className","row"],rn=t=>{const{classes:e,row:n,error:r}=t;return Y({root:["root",n&&"row",r&&"error"]},nn,e)},an=_("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.row&&e.row]}})(({ownerState:t})=>w({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})),sn=p.exports.forwardRef(function(e,n){const r=q({props:e,name:"MuiFormGroup"}),{className:a,row:s=!1}=r,l=G(r,on),c=Ne(),m=Be({props:r,muiFormControl:c,states:["error"]}),h=w({},r,{row:s,error:m.error}),C=rn(h);return o(an,w({className:K(C.root,a),ownerState:h,ref:n},l))});var ln=sn,cn=De(o("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),dn=De(o("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");const un=_("span")({position:"relative",display:"flex"}),pn=_(cn)({transform:"scale(1)"}),hn=_(dn)(({theme:t,ownerState:e})=>w({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},e.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}));function We(t){const{checked:e=!1,classes:n={},fontSize:r}=t,a=w({},t,{checked:e});return g(un,{className:n.root,ownerState:a,children:[o(pn,{fontSize:r,className:n.background,ownerState:a}),o(hn,{fontSize:r,className:n.dot,ownerState:a})]})}const fn=p.exports.createContext(void 0);var je=fn;function mn(){return p.exports.useContext(je)}function gn(t){return j("MuiRadio",t)}const Cn=U("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]);var Ce=Cn;const yn=["checked","checkedIcon","color","icon","name","onChange","size","className"],vn=t=>{const{classes:e,color:n}=t,r={root:["root",`color${V(n)}`]};return w({},e,Y(r,gn,e))},bn=_(Vt,{shouldForwardProp:t=>ct(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${V(n.color)}`]]}})(({theme:t,ownerState:e})=>w({color:(t.vars||t).palette.text.secondary,"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:$e(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${Ce.checked}`]:{color:(t.vars||t).palette[e.color].main}},{[`&.${Ce.disabled}`]:{color:(t.vars||t).palette.action.disabled}}));function Sn(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}const ye=o(We,{checked:!0}),ve=o(We,{}),xn=p.exports.forwardRef(function(e,n){var r,a;const s=q({props:e,name:"MuiRadio"}),{checked:l,checkedIcon:c=ye,color:m="primary",icon:h=ve,name:C,onChange:v,size:d="medium",className:f}=s,i=G(s,yn),y=w({},s,{color:m,size:d}),b=vn(y),x=mn();let k=l;const D=dt(v,x&&x.onChange);let M=C;return x&&(typeof k=="undefined"&&(k=Sn(x.value,s.value)),typeof M=="undefined"&&(M=x.name)),o(bn,w({type:"radio",icon:p.exports.cloneElement(h,{fontSize:(r=ve.props.fontSize)!=null?r:d}),checkedIcon:p.exports.cloneElement(c,{fontSize:(a=ye.props.fontSize)!=null?a:d}),ownerState:y,classes:b,name:M,checked:k,onChange:D,ref:n,className:K(b.root,f)},i))});var be=xn;const Rn=["actions","children","defaultValue","name","onChange","value"],Fn=p.exports.forwardRef(function(e,n){const{actions:r,children:a,defaultValue:s,name:l,onChange:c,value:m}=e,h=G(e,Rn),C=p.exports.useRef(null),[v,d]=ut({controlled:m,default:s,name:"RadioGroup"});p.exports.useImperativeHandle(r,()=>({focus:()=>{let b=C.current.querySelector("input:not(:disabled):checked");b||(b=C.current.querySelector("input:not(:disabled)")),b&&b.focus()}}),[]);const f=pt(n,C),i=b=>{d(b.target.value),c&&c(b,b.target.value)},y=ht(l);return o(je.Provider,{value:{name:y,onChange:i,value:v},children:o(ln,w({role:"radiogroup",ref:f},h,{children:a}))})});var kn=Fn;function wn(t){return j("MuiSkeleton",t)}U("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const Tn=["animation","className","component","height","style","variant","width"];let W=t=>t,Se,xe,Re,Fe;const Dn=t=>{const{classes:e,variant:n,animation:r,hasChildren:a,width:s,height:l}=t;return Y({root:["root",n,r,a&&"withChildren",a&&!s&&"fitContent",a&&!l&&"heightAuto"]},wn,e)},$n=Me(Se||(Se=W`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),Mn=Me(xe||(xe=W`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),An=_("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.animation!==!1&&e[n.animation],n.hasChildren&&e.withChildren,n.hasChildren&&!n.width&&e.fitContent,n.hasChildren&&!n.height&&e.heightAuto]}})(({theme:t,ownerState:e})=>{const n=Yt(t.shape.borderRadius)||"px",r=Kt(t.shape.borderRadius);return w({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:$e(t.palette.text.primary,t.palette.mode==="light"?.11:.13),height:"1.2em"},e.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${n}/${Math.round(r/.6*10)/10}${n}`,"&:empty:before":{content:'"\\00a0"'}},e.variant==="circular"&&{borderRadius:"50%"},e.variant==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius},e.hasChildren&&{"& > *":{visibility:"hidden"}},e.hasChildren&&!e.width&&{maxWidth:"fit-content"},e.hasChildren&&!e.height&&{height:"auto"})},({ownerState:t})=>t.animation==="pulse"&&pe(Re||(Re=W`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),$n),({ownerState:t,theme:e})=>t.animation==="wave"&&pe(Fe||(Fe=W`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),Mn,(e.vars||e).palette.action.hover)),In=p.exports.forwardRef(function(e,n){const r=q({props:e,name:"MuiSkeleton"}),{animation:a="pulse",className:s,component:l="span",height:c,style:m,variant:h="text",width:C}=r,v=G(r,Tn),d=w({},r,{animation:a,component:l,variant:h,hasChildren:Boolean(v.children)}),f=Dn(d);return o(An,w({as:l,ref:n,className:K(f.root,s),ownerState:d},v,{style:w({width:C,height:c},m)}))});var A=In;const Ln=t=>{const{fleetSetup:e,onChange:n,errors:r,columnCount:a}=t,[s,l]=p.exports.useTransition(),[c,m]=p.exports.useState(e.name),h=f=>{m(f.target.value)};p.exports.useEffect(()=>{l(()=>{n({...e,name:c})})},[c,n]);const C=f=>{n({...e,maxCost:Number(f.target.value)})},v=f=>{n({...e,maxReinforcement:Number(f.target.value)})},d=f=>{n({...e,myListOnly:f.target.value==="myListOnly"})};return o(O,{children:o(T,{component:"div",p:1,children:o(ft,{sx:{alignItems:"center"},offsetValue:!1,rowGap:1,columnCount:a,rows:[{key:"name",label:u("fleetSetup.fleetName"),value:f=>o(z,{variant:"outlined",size:"small",value:c,onChange:h,error:!!r.name,helperText:r.name,fullWidth:f})},{key:"reinforcementCount",label:u("fleetSetup.maxReinforcementCount"),value:f=>o(z,{variant:"outlined",size:"small",select:!0,value:e.maxReinforcement,onChange:v,error:!!r.maxReinforcement,helperText:r.maxReinforcement,fullWidth:f,SelectProps:{renderValue:()=>o(S,{variant:"body1",whiteSpace:"normal",children:e.maxReinforcement})},children:[5,6,7,9,10].map(i=>o(N,{value:`${i}`,children:u("fleetSetup.shipCount",{value:i})},`reinforcementCount${i}`))})},{key:"maxCost",label:u("fleetSetup.maxCommandPoints"),value:f=>o(z,{variant:"outlined",size:"small",select:!0,value:e.maxCost,onChange:C,error:!!r.maxCost,helperText:r.maxCost,fullWidth:f,SelectProps:{renderValue:()=>o(S,{variant:"body1",whiteSpace:"normal",children:e.maxCost})},children:[450,430,415,400,350,330,315,300].map(i=>o(N,{value:`${i}`,children:i},`maxCost${i}`))})},{key:"myListOnly",label:u("fleetSetup.availableShipsForAdding"),value:f=>g(z,{variant:"outlined",size:"small",select:!0,value:e.myListOnly?"myListOnly":"all",onChange:d,error:!!r.myListOnly,helperText:r.myListOnly,fullWidth:f,SelectProps:{renderValue:()=>o(S,{variant:"body1",whiteSpace:"normal",children:e.myListOnly?u("label.acquiredShips"):u("label.allShips")})},children:[o(N,{value:"all",children:u("label.allShips")}),o(N,{value:"myListOnly",children:u("label.acquiredShips")})]})}]})})})},Ue=t=>{const{onOpenAddShips:e,filter:n,buttonProps:r}=t,a=s=>{switch(s){case"addInitialShip":{e(null,n);break}case"addSelfReinforcement":{e("self",n);break}case"addAllyReinforcement":{e("ally",n);break}case"addAlly2Reinforcement":{e("ally2",n);break}case"addAlly3Reinforcement":{e("ally3",n);break}}};return o(jt,{icon:o(Ge,{}),text:u("fleetSetup.addShips"),onClick:a,buttonProps:r,options:[{key:"addInitialShip",text:u("fleetSetup.normalAssignment"),value:"addInitialShip"},{key:"addSelfReinforcement",text:u("fleetSetup.selfReinforcement"),value:"addSelfReinforcement"},{key:"addAllyReinforcement",text:u("fleetSetup.orgReinforcementA"),value:"addAllyReinforcement"},{key:"addAlly2Reinforcement",text:u("fleetSetup.orgReinforcementB"),value:"addAlly2Reinforcement"},{key:"addAlly3Reinforcement",text:u("fleetSetup.orgReinforcementC"),value:"addAlly3Reinforcement"}]})},En=t=>{const{grouping:e,onChangeGrouping:n,onCancel:r,onSave:a,onReset:s,onOpenAddShips:l,saveDisabled:c}=t;return o(It,{left:m=>g(I,{children:[o(Lt,{value:e,onChange:n,buttonProps:m}),o(Ue,{onOpenAddShips:l,buttonProps:m})]}),right:m=>g(I,{children:[o($,{variant:"outlined",startIcon:o(Mt,{}),onClick:s,...m,children:u("button.initialize")},"reset"),o($,{variant:"outlined",startIcon:o(At,{}),onClick:r,...m,children:u("button.cancel")},"cancel"),o($,{variant:"contained",startIcon:o(Dt,{}),onClick:a,disabled:c,...m,children:u("button.save")},"save")]})})},On=t=>{var f;const{initialFleetKey:e}=t,n=Ae(),r=p.exports.useMemo(()=>Et(),[]),[a,s]=p.exports.useState(e&&(f=r.find(i=>i.key===e))!=null?f:r[0]),l=p.exports.useCallback((i,y,b)=>{s(x=>_e({shipId:i,count:y,reinforcement:b,fleetSetup:x}))},[]),c=p.exports.useCallback((i,y,b,x)=>{s(k=>Ot({shipId:i,carrierShipId:y,count:b,reinforcement:x,fleetSetup:k}))},[]),m=p.exports.useCallback((i,y,b)=>{s(x=>_t({shipId:i,reinforcement:y,moduleSelection:b,fleetSetup:x}))},[]),h=p.exports.useCallback(()=>{Pt(a),n("/fleetSetup")},[a]),C=p.exports.useCallback(()=>{const i=Number(a.key.substring(5));s(Gt(i))},[a]),v=p.exports.useMemo(()=>Bt(a),[a]),d=p.exports.useMemo(()=>ae(a),[a]);return{fleetSetup:a,errors:v,shipWarnings:d,setFleetSetup:s,setShipCount:l,setCarriedShipCount:c,setModule:m,save:h,reset:C}},_n=t=>{const{fleetSetup:e,fleetShipCount:n}=t,r=n.totalCost>e.maxCost,a=e.totalReinforcementCount>e.maxReinforcement;return o(T,{component:"div",sx:{height:"100px"},children:o(O,{square:!0,sx:{position:"fixed",right:0,bottom:0,zIndex:1,width:"100%",borderTop:"1px solid rgba(0, 0, 0, 0.2)"},children:o(kt,{maxWidth:"md",disableGutters:!0,children:o(T,{component:"div",p:1,children:g(R,{spacing:1,flexWrap:"wrap",direction:"row",children:[o(T,{component:"div",sx:{flexGrow:1,display:"flex",justifyContent:"center"},children:g("div",{children:[o(S,{variant:"body2",color:"text.secondary",children:u("fleetSetup.reinforcement")}),o(S,{variant:"body1",sx:{color:a?"red":void 0},children:o("strong",{children:`${e.totalReinforcementCount} / ${e.maxReinforcement}`})})]})}),o(T,{component:"div",sx:{flexGrow:1,display:"flex",justifyContent:"center"},children:g("div",{children:[o(S,{variant:"body2",color:"text.secondary",children:u("fleetSetup.commandPoints")}),o(S,{variant:"body1",sx:{color:r?"red":void 0},children:o("strong",{children:`${n.totalCost} / ${e.maxCost}`})})]})})]})})})})})};function Pn(t,e,n,r){const a={};e.ships.forEach(l=>{a[`${l.shipDefinition.id}_${l.reinforcement}`]=!0});const s=Gn(Ie,t,e.myListOnly,n);return{fleetSetup:{...e,ships:[...e.ships,...s.flatMap(l=>a[`${l.id}_${t}`]?[]:[Pe({shipDefinition:l,usedModules:null,count:0,reinforcement:t,maxReinforcement:e.maxReinforcement,temporary:!0})])]},reinforcement:t,filter:r}}function Gn(t,e,n,r){const a=t.filter(s=>s.type!==F.CORVETTE&&s.type!==F.FIGHTER);return(e==null?void 0:e.includes("ally"))||!n?a:a.filter(s=>Le(s.id,r))}function Bn(t){return{...t.fleetSetup,ships:t.fleetSetup.ships.flatMap(e=>e.temporary?e.count===0?[]:[{...e,temporary:!1}]:[e])}}function Nn(t,e){let n={...e,fleetSetup:{...e.fleetSetup,ships:e.fleetSetup.ships.filter(r=>r.temporary===!0)}};return Object.keys(t).filter(r=>t[r]).forEach(r=>{switch(r){case ee.FRONT:case ee.MIDDLE:case ee.BACK:{n={...n,fleetSetup:{...n.fleetSetup,ships:n.fleetSetup.ships.filter(a=>a.shipDefinition.row===r)}};break}case F.CARRIER:case F.AUXILIARY:case F.BATTLE_CRUISER:case F.CRUISER:case F.DESTROYER:case F.FRIGATE:{n={...n,fleetSetup:{...n.fleetSetup,ships:n.fleetSetup.ships.filter(a=>a.shipDefinition.type===r)}};break}}}),n}const zn=t=>{const{userSettings:e,fleetSetup:n,setFleetSetup:r}=t,[a,s]=p.exports.useState(null),l=p.exports.useCallback((v,d)=>{s(Pn(v,n,e,d!=null?d:null))},[n,e]),c=p.exports.useCallback(()=>{s(null)},[]),m=p.exports.useCallback(()=>{a&&(r(Bn(a)),s(null))},[a,r]),h=p.exports.useCallback((v,d,f)=>{s(i=>i?{...i,fleetSetup:_e({shipId:v,count:d,reinforcement:f,fleetSetup:i.fleetSetup,keepZero:!0})}:null)},[e]),C=p.exports.useMemo(()=>a?ae(a.fleetSetup):{},[a]);return{dialogData:a,shipWarnings:C,open:l,cancel:c,apply:m,setShipCount:h}};var se={},Hn=oe.exports;Object.defineProperty(se,"__esModule",{value:!0});var Ve=se.default=void 0,Wn=Hn(ne),jn=re,Un=(0,Wn.default)((0,jn.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");Ve=se.default=Un;var le={},Vn=oe.exports;Object.defineProperty(le,"__esModule",{value:!0});var qe=le.default=void 0,qn=Vn(ne),Yn=re,Kn=(0,qn.default)((0,Yn.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddBox");qe=le.default=Kn;const Xn=t=>{const{shipDefinition:e,count:n,maxCount:r,reinforcement:a,showCost:s,showReinforcement:l,carrierShipId:c,shipWarning:m,onChangeShipCount:h,onChangeCarriedShipCount:C}=t,v=X(),d=Q(v.breakpoints.down("sm")),{openShipDetailDialog:f}=mt(),i=g(I,{children:[o(S,{variant:"body1",children:o(gt,{onClick:()=>{f(e.id)},children:Ct(e)})}),s&&a===null&&g(S,{variant:"body2",color:"text.secondary",children:[u("label.commandPointsColon"),L()?" ":"",e.cost,u("label.comma"),L()?" ":"",u("label.totalColon"),L()?" ":"",`${e.cost*n}`]}),l&&a==="self"&&o(S,{variant:"body2",color:"text.secondary",children:u("fleetSetup.selfReinforcement")}),l&&a==="ally"&&o(S,{variant:"body2",color:"text.secondary",children:u("fleetSetup.orgReinforcementA")}),l&&a==="ally2"&&o(S,{variant:"body2",color:"text.secondary",children:u("fleetSetup.orgReinforcementB")}),l&&a==="ally3"&&o(S,{variant:"body2",color:"text.secondary",children:u("fleetSetup.orgReinforcementC")})]}),y=m&&o(S,{variant:"caption",color:"red",textAlign:"end",children:m}),b=o($,{onClick:()=>{c?C==null||C(e.id,c,0,a):h==null||h(e.id,0,a)},disabled:n<=0,children:u("fleetSetup.clearAddedShips")}),x=o(me,{onClick:()=>{c?C==null||C(e.id,c,n-1,a):h==null||h(e.id,n-1,a)},disabled:n<=0,children:o(Ve,{color:n<=0?"disabled":"primary"})}),k=o(S,{variant:"body1",sx:{minWidth:"55px"},textAlign:"center",children:o("strong",{children:`${n} / ${r}`})}),D=o(me,{onClick:()=>{c?C==null||C(e.id,c,n+1,a):h==null||h(e.id,n+1,a)},disabled:n>=r,children:o(qe,{color:n>=r?"disabled":"primary"})}),M=o($,{onClick:()=>{c?C==null||C(e.id,c,r,a):h==null||h(e.id,r,a)},disabled:n>=r,children:u("fleetSetup.fillUpAddedShips")});return g(I,{children:[d&&g(R,{spacing:1,children:[i,g(O,{variant:"outlined",sx:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[g(R,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[x,k,D]}),g(R,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[b,M]})]}),y]}),!d&&g(R,{spacing:1,children:[g(R,{spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[o(T,{component:"div",pb:1,children:o(R,{spacing:1,children:i})}),o(T,{component:"div",sx:{display:"flex",justifyContent:"end",flexGrow:1},children:o(O,{variant:"outlined",sx:{display:"inline-block"},children:g(R,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[b,x,k,D,M]})})})]}),y]})]})};function Qn(t){const e={corvette:{key:"corvette",name:u("shipType.corvette"),count:t.carriedShips.filter(n=>n.shipDefinition.type===F.CORVETTE).map(n=>n.count).reduce((n,r)=>n+r,0),maxCount:t.carrierCapabilities.carryCorvette*t.count},upToLargeFighter:{key:"upToLargeFighter",name:u("shipType.smallToLargeFighter"),count:t.carriedShips.filter(n=>n.shipDefinition.type===F.FIGHTER&&n.shipDefinition.subType===P.LARGE_FIGHTER).map(n=>n.count).reduce((n,r)=>n+r,0),maxCount:t.carrierCapabilities.carryUpToLargeFighter*t.count},upToMediumFighter:{key:"upToMediumFighter",name:u("shipType.smallToMediumFighter"),count:t.carriedShips.filter(n=>n.shipDefinition.type===F.FIGHTER&&n.shipDefinition.subType===P.MEDIUM_FIGHTER).map(n=>n.count).reduce((n,r)=>n+r,0),maxCount:t.carrierCapabilities.carryUpToMediumFighter*t.count},upToSmallFighter:{key:"upToSmallFighter",name:u("shipType.smallFighter"),count:t.carriedShips.filter(n=>n.shipDefinition.type===F.FIGHTER&&n.shipDefinition.subType===P.SMALL_FIGHTER).map(n=>n.count).reduce((n,r)=>n+r,0),maxCount:t.carrierCapabilities.carryUpToSmallFighter*t.count},removedHangar:{key:"removedHangar",name:u("label.unsupported"),count:0,maxCount:0}};return ke(e.upToMediumFighter,[e.upToLargeFighter]),ke(e.upToSmallFighter,[e.upToMediumFighter,e.upToLargeFighter]),te(e.upToSmallFighter,e.upToMediumFighter),te(e.upToMediumFighter,e.upToLargeFighter),e.upToLargeFighter.maxCount===0&&te(e.upToLargeFighter,e.removedHangar),e}function ke(t,e){let n=t.count-t.maxCount;n<=0||(t.count-=n,e.forEach(r=>{if(n<=0||r.maxCount===0)return;const a=r.maxCount-r.count;if(a<=0)return;const s=Math.min(a,n);n-=s,r.count+=s}),n>0&&(t.count+=n))}function te(t,e){const n=t.count-t.maxCount;n>0&&(t.count-=n,e.count+=n)}function Jn(t){return t.count>0||t.maxCount>0}const Zn=t=>{const{shipSelection:e,onOpenAddCarriedShips:n}=t,r=X(),a=Q(r.breakpoints.down("xs")),s=p.exports.useMemo(()=>Qn(e),[e]);return g(R,{spacing:1,direction:a?"column":"row",alignItems:a?"flex-start":"center",justifyContent:"end",flexWrap:"wrap",children:[g(R,{sx:{flexGrow:1},spacing:3,direction:"row",alignItems:"center",justifyContent:"space-between",children:[o(S,{variant:"body2",color:"text.secondary",children:u("label.hangarColon")}),o(R,{spacing:1,direction:"row",alignItems:"center",children:o(R,{spacing:1,direction:"row",alignItems:"center",children:Object.keys(s).filter(l=>Jn(s[l])).map(l=>s[l]).map(l=>g(p.exports.Fragment,{children:[o(S,{variant:"body2",color:"text.secondary",children:l.name}),o(S,{variant:"body2",color:"text.secondary",sx:{color:l.count>l.maxCount?"red":void 0},children:o("strong",{children:`${l.count} / ${l.maxCount}`})})]},l.key))})})]}),o($,{variant:"outlined",size:"small",startIcon:o(Ge,{}),sx:{whiteSpace:"nowrap"},onClick:()=>{n==null||n(e.shipDefinition.id,e.reinforcement)},children:u("fleetSetup.addAircraft")})]})};var ce={},eo=oe.exports;Object.defineProperty(ce,"__esModule",{value:!0});var Ye=ce.default=void 0,to=eo(ne),no=re,oo=(0,to.default)((0,no.jsx)("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"Tune");Ye=ce.default=oo;const ro=t=>{const{shipId:e,reinforcement:n,moduleSelection:r,myListOnly:a,onChange:s,onClose:l}=t,{userSettings:c}=yt(),[m,h]=p.exports.useState(r),C=()=>{s(e,n,m),l()},v=i=>{const[y,b]=i.target.value.split("#");h(x=>Nt(y,b,x))},d=i=>{const y=Object.keys(m.groups[i]).find(b=>m.groups[i][b].usage==="used");return y?`${i}#${y}`:null},f=i=>!Object.keys(m.groups[i]).find(y=>m.groups[i][y].module.defaultModule);return o(ie,{title:u("fleetSetup.configureModules"),content:g(R,{spacing:3,children:[Object.keys(m.groups).map(i=>{const y=d(i),b=`${i}#none`;return o(O,{variant:"outlined",children:o(T,{component:"div",pl:1,pr:1,children:o(Ut,{children:g(kn,{defaultValue:"female",name:`group-${i}`,value:y!=null?y:b,onChange:v,children:[f(i)&&o(ge,{label:`${u("label.notSelected")}`,value:b,control:o(be,{})},b),Object.keys(m.groups[i]).map(x=>{const k=m.groups[i][x],D=n!=="ally"&&n!=="ally2"&&n!=="ally3"&&a&&!k.module.defaultModule&&!vt(x,e,c),M=`${i}#${x}`;return o(ge,{label:g(T,{component:"div",pt:1,pb:1,children:[o(S,{variant:"body1",children:`${k.module.category}${k.module.categoryNumber} ${Ee(e,k.module)}`}),bt()===St.JAPANESE&&k.module.description&&o(S,{variant:"body2",color:"text.secondary",children:`${k.module.description}`})]}),value:M,control:o(be,{disabled:D}),disabled:D},x)})]})})})},i)}),a&&o(S,{variant:"caption",paragraph:!0,children:u("fleetSetup.configureModulesFootnote")})]}),actions:g(I,{children:[o($,{variant:"outlined",onClick:l,children:u("button.cancel")}),o($,{variant:"contained",onClick:C,children:u("button.confirm")})]}),onClose:l})},ao=t=>{const{shipId:e,reinforcement:n,moduleSelection:r,myListOnly:a,onChange:s}=t,l=X(),c=Q(l.breakpoints.down("xs")),[m,h]=p.exports.useState(!1),C=()=>{h(!0)},v=()=>{h(!1)},d=[];return Object.keys(r.groups).map(f=>{Object.keys(r.groups[f]).map(i=>r.groups[f][i]).forEach(i=>{i.module.category!=="STATIC"&&i.usage==="used"&&(d.length>0&&d.push(o(p.exports.Fragment,{children:g(S,{variant:"body2",component:"span",children:[u("label.comma"),L()?" ":""]})},`before_${i.module.id}`)),d.push(o(p.exports.Fragment,{children:o(qt,{arrow:!0,disableFocusListener:!0,title:Ee(e,i.module),children:o(S,{variant:"body2",component:"span",children:`${i.module.category}${i.module.categoryNumber}`})})},i.module.id)))})}),d.length===0?null:g(I,{children:[g(R,{spacing:1,direction:c?"column":"row",alignItems:c?"flex-start":"center",justifyContent:"end",flexWrap:"wrap",children:[o(T,{component:"div",sx:{flexGrow:1},children:g(S,{variant:"body2",color:"text.secondary",children:[u("label.systemModulesColon"),L()?" ":"",d]})}),r.configuable&&o(T,{component:"div",sx:{display:"flex",alignContent:"end"},children:o($,{variant:"outlined",size:"small",startIcon:o(Ye,{}),sx:{whiteSpace:"nowrap"},onClick:C,children:u("fleetSetup.configureModules")})})]}),m&&o(ro,{shipId:e,reinforcement:n,moduleSelection:r,myListOnly:a,onChange:s,onClose:v})]})},we=p.exports.memo(Xn),de=t=>{const{shipSelections:e,showCost:n,showReinforcement:r,showHangar:a,shipWarnings:s,carrierShipId:l,myListOnly:c,onChangeShipCount:m,onChangeCarriedShipCount:h,onOpenAddCarriedShips:C,onChangeModule:v}=t;return o(R,{spacing:1,children:e==null?void 0:e.map(d=>{var f,i;return o(O,{variant:"outlined",children:o(T,{component:"div",p:1,children:g(R,{spacing:1,children:[o(we,{shipDefinition:d.shipDefinition,count:d.count,maxCount:d.maxCount,reinforcement:d.reinforcement,showCost:n,showReinforcement:r,carrierShipId:l,onChangeShipCount:m,onChangeCarriedShipCount:h,shipWarning:s[he(d.shipDefinition.id,d.reinforcement)]}),d.moduleSelection&&v&&o(ao,{shipId:d.shipDefinition.id,reinforcement:d.reinforcement,moduleSelection:d.moduleSelection,myListOnly:c,onChange:v}),a&&d.carrierCapabilities.canCarry&&g(R,{spacing:1,children:[o(Zn,{shipSelection:d,onOpenAddCarriedShips:C}),(f=d.carriedShips)==null?void 0:f.map(y=>{var b;return o(we,{shipDefinition:y.shipDefinition,count:y.count,maxCount:y.shipDefinition.operationLimit,reinforcement:y.reinforcement,carrierShipId:d.shipDefinition.id,showCost:!1,showReinforcement:!1,onChangeCarriedShipCount:h,shipWarning:s[he(y.shipDefinition.id,d.reinforcement)]},`${d.shipDefinition.id}_${y.shipDefinition.id}_${(b=y.reinforcement)!=null?b:"initial"}`)})]})]})})},`${d.shipDefinition.id}_${(i=d.reinforcement)!=null?i:"initial"}`)})})},io=t=>{const{dialogData:e,shipWarnings:n,myListOnly:r,onCancel:a,onApply:s,onChangeShipCount:l}=t,[c,m]=p.exports.useState(!1),[h,C]=p.exports.useState(()=>{const d=ze();return e.filter&&typeof d[e.filter]=="boolean"?{...d,[e.filter]:!0}:d}),v=p.exports.useMemo(()=>Nn(h,e),[h,e]);return p.exports.useEffect(()=>{const d=setTimeout(()=>{m(!0)},0);return()=>{clearTimeout(d)}},[]),o(ie,{title:g(R,{spacing:1,direction:"row",justifyContent:"space-between",alignItems:"center",children:[o(S,{variant:"h6",children:so(e.reinforcement)}),e.reinforcement===null?g("div",{children:[g(S,{variant:"body1",component:"span",children:[u("label.commandPointsColon"),L()?" ":""]}),o(S,{variant:"body1",component:"span",sx:{color:e.fleetSetup.totalCost>e.fleetSetup.maxCost?"red":void 0},children:o("strong",{children:`${e.fleetSetup.totalCost} / ${e.fleetSetup.maxCost}`})})]}):g("div",{children:[g(S,{variant:"body1",component:"span",children:[u("fleetSetup.reinforcementColon"),L()?" ":""]}),o(S,{variant:"body1",component:"span",sx:{color:e.fleetSetup.totalReinforcementCount>e.fleetSetup.maxReinforcement?"red":void 0},children:o("strong",{children:`${e.fleetSetup.totalReinforcementCount} / ${e.fleetSetup.maxReinforcement}`})})]})]}),content:g(R,{spacing:2,children:[o(S,{variant:"body2",children:lo(e.reinforcement)}),o("div",{children:o(He,{filter:h,shipTypes:[F.CARRIER,F.AUXILIARY,F.BATTLE_CRUISER,F.CRUISER,F.DESTROYER,F.FRIGATE],onChange:C,popperProps:{disablePortal:!1,placement:"bottom-start",style:{zIndex:1300}}})}),v.fleetSetup.ships.length===0&&o(Oe,{severity:"info",children:u("fleetSetup.noMatchingShip")}),c?o(de,{shipSelections:v.fleetSetup.ships,showCost:!v.reinforcement,showReinforcement:!1,showHangar:!1,shipWarnings:n,carrierShipId:null,myListOnly:r,onChangeShipCount:l}):g(R,{spacing:1,children:[o(A,{variant:"rectangular",height:90}),o(A,{variant:"rectangular",animation:"wave",height:90}),o(A,{variant:"rectangular",height:90}),o(A,{variant:"rectangular",animation:"wave",height:90}),o(A,{variant:"rectangular",height:90})]})]}),actions:g(I,{children:[o($,{variant:"outlined",onClick:a,children:u("button.cancel")}),o($,{variant:"contained",onClick:s,children:u("button.confirm")})]}),onClose:a})};function so(t){switch(t){case"ally":case"ally2":case"ally3":case"self":return u("fleetSetup.addReinforcement");default:return u("fleetSetup.addShips")}}function lo(t){switch(t){case"ally":return u("fleetSetup.addReinforcementDescriptionAllyA");case"ally2":return u("fleetSetup.addReinforcementDescriptionAllyB");case"ally3":return u("fleetSetup.addReinforcementDescriptionAllyC");case"self":return u("fleetSetup.addReinforcementDescriptionSelf");default:return u("fleetSetup.addShipsDescription")}}function co(t,e,n,r){const a=n.ships.find(c=>c.shipDefinition.id===t&&c.reinforcement===e);if(!a)throw new Error("Invalid carrier");const s={};a.carriedShips.forEach(c=>{s[`${c.shipDefinition.id}_${c.reinforcement}`]=!0});const l=uo(a,Ie,e,n.myListOnly,r);return{carrierShipId:t,reinforcement:e,shipSelections:l.flatMap(c=>s[`${c.id}_${e}`]?[]:[Pe({shipDefinition:c,usedModules:null,count:0,reinforcement:e,maxReinforcement:n.maxReinforcement,temporary:!0})]),filter:null}}function uo(t,e,n,r,a){const s=e.filter(l=>{switch(l.type){case F.CORVETTE:return t.carrierCapabilities.carryCorvette>0;case F.FIGHTER:switch(l.subType){case P.LARGE_FIGHTER:return t.carrierCapabilities.carryUpToLargeFighter>0;case P.MEDIUM_FIGHTER:return t.carrierCapabilities.carryUpToMediumFighter>0||t.carrierCapabilities.carryUpToLargeFighter>0;case P.SMALL_FIGHTER:return t.carrierCapabilities.carryUpToSmallFighter>0||t.carrierCapabilities.carryUpToMediumFighter>0||t.carrierCapabilities.carryUpToLargeFighter>0}}return!1});return(n==null?void 0:n.includes("ally"))||!r?s:s.filter(l=>Le(l.id,a))}function Te(t,e){return{...e,ships:e.ships.map(n=>n.shipDefinition.id!==t.carrierShipId||n.reinforcement!==t.reinforcement?n:{...n,carriedShips:[...n.carriedShips,...t.shipSelections.filter(r=>r.count>0).map(r=>zt({shipId:r.shipDefinition.id,count:r.count,reinforcement:t.reinforcement}))]})}}function po(t,e){let n=e;return Object.keys(t).filter(r=>t[r]).forEach(r=>{switch(r){case F.CORVETTE:case F.FIGHTER:{n={...n,shipSelections:n.shipSelections.filter(a=>a.shipDefinition.type===r)};break}}}),n}const ho=t=>{const{userSettings:e,fleetSetup:n,setFleetSetup:r}=t,[a,s]=p.exports.useState(null),l=p.exports.useCallback((v,d)=>{s(co(v,d,n,e))},[n,e]),c=p.exports.useCallback(()=>{s(null)},[]),m=p.exports.useCallback(()=>{a&&(r(Te(a,n)),s(null))},[a,n,r]),h=p.exports.useCallback((v,d,f)=>{s(i=>i?{...i,shipSelections:i.shipSelections.map(y=>y.shipDefinition.id!==v||y.reinforcement!==f?y:{...y,count:d})}:null)},[e]),C=p.exports.useMemo(()=>{if(!a)return{};const v=Te(a,n);return ae(v)},[a,n]);return{dialogData:a,shipWarnings:C,open:l,cancel:c,apply:m,setShipCount:h}},fo=t=>{const{dialogData:e,shipWarnings:n,myListOnly:r,onCancel:a,onApply:s,onChangeShipCount:l}=t,[c,m]=p.exports.useState(!1),[h,C]=p.exports.useState(()=>{const i=ze();return e.filter&&typeof i[e.filter]=="boolean"?{...i,[e.filter]:!0}:i}),v=p.exports.useMemo(()=>po(h,e),[h,e]);p.exports.useEffect(()=>{const i=setTimeout(()=>{m(!0)},0);return()=>{clearTimeout(i)}},[]);const d=!!e.shipSelections.find(i=>i.shipDefinition.type===F.CORVETTE),f=!!e.shipSelections.find(i=>i.shipDefinition.type===F.FIGHTER);return o(ie,{title:u("fleetSetup.addAircraft"),content:g(R,{spacing:2,children:[o(S,{variant:"body2",children:u("fleetSetup.addAircraftDescription")}),d&&f&&o("div",{children:o(He,{filter:h,shipTypes:[F.CORVETTE,F.FIGHTER],shipRows:[],onChange:C,popperProps:{disablePortal:!1,placement:"bottom-start",style:{zIndex:1300}}})}),v.shipSelections.length===0&&o(Oe,{severity:"info",children:u("fleetSetup.noMatchingAircraft")}),c?o(de,{shipSelections:v.shipSelections,showCost:!1,showReinforcement:!1,showHangar:!1,shipWarnings:n,carrierShipId:null,myListOnly:r,onChangeShipCount:l}):g(R,{spacing:1,children:[o(A,{variant:"rectangular",height:90}),o(A,{variant:"rectangular",animation:"wave",height:90}),o(A,{variant:"rectangular",height:90}),o(A,{variant:"rectangular",animation:"wave",height:90}),o(A,{variant:"rectangular",height:90})]})]}),actions:g(I,{children:[o($,{variant:"outlined",onClick:a,children:u("button.cancel")}),o($,{variant:"contained",onClick:s,children:u("button.confirm")})]}),onClose:a})},Lo=()=>{const t=Ae(),{fleetKey:e}=xt(),n=X(),r=Q(n.breakpoints.up("lg")),a=p.exports.useMemo(()=>Rt(),[]),[s,l]=p.exports.useState(!1),{fleetSetup:c,errors:m,shipWarnings:h,setFleetSetup:C,setShipCount:v,setCarriedShipCount:d,setModule:f,save:i,reset:y}=On({initialFleetKey:e}),{dialogData:b,shipWarnings:x,open:k,cancel:D,apply:M,setShipCount:Ke}=zn({userSettings:a,fleetSetup:c,setFleetSetup:C}),{dialogData:ue,shipWarnings:Xe,open:Qe,cancel:Je,apply:Ze,setShipCount:et}=ho({userSettings:a,fleetSetup:c,setFleetSetup:C}),tt=p.exports.useMemo(()=>Ht(c.ships),[c.ships]),[J,nt]=p.exports.useState(fe.GROUP_BY_ROW_SORT_BY_TYPE_AND_NAME),Z=p.exports.useMemo(()=>Wt(J,c),[c,J]),ot=()=>{t(Ft.fleetSetupByKey.path(c.key))},rt=()=>{Object.keys(m).length>0||(i(),t(`/fleetSetup/${c.key}`))},at=()=>{l(!1)},it=()=>{l(!0)},st=()=>{l(!1),y()},B=r&&Z.groupedBy===fe.GROUP_BY_ROW_SORT_BY_TYPE_AND_NAME?"row":"column",lt=B==="row"?4:2;return g(I,{children:[o(wt,{currentRoute:"/fleetSetup"}),o(En,{grouping:J,onChangeGrouping:nt,onSave:rt,onCancel:ot,onReset:it,onOpenAddShips:k,saveDisabled:Object.keys(m).length>0}),o(Tt,{disableContainer:B==="row",children:o(T,{component:"div",p:1,sx:{marginBottom:"60px"},children:g(R,{spacing:1,children:[o(Ln,{fleetSetup:c,onChange:C,errors:m,columnCount:lt}),o(R,{spacing:1,direction:B,children:Z.groups.map(E=>o(O,{sx:{width:B==="row"?`${100/Z.groups.length}%`:void 0},children:o(T,{component:"div",p:1,children:g(R,{spacing:1,children:[g(R,{spacing:1,direction:"row",alignItems:"center",sx:{width:"100%"},children:[o(T,{component:"div",sx:{flexGrow:1},children:g(S,{variant:"body1",children:[E.name,L()&&o("span",{children:"\xA0"}),E.count>0?u("fleetSetup.shipCountBrackets",{value:E.count}):""]})}),o(Ue,{filter:E.id,onOpenAddShips:k,buttonProps:{size:"small"}})]}),E.ships.length>0&&o(de,{shipSelections:E.ships,onChangeShipCount:v,onChangeCarriedShipCount:d,onOpenAddCarriedShips:Qe,onChangeModule:f,showCost:!0,showReinforcement:!0,showHangar:!0,shipWarnings:h,carrierShipId:null,myListOnly:c.myListOnly})]})})},E.id))})]})})}),o(_n,{fleetSetup:c,fleetShipCount:tt}),b&&o(io,{dialogData:b,shipWarnings:x,myListOnly:c.myListOnly,onCancel:D,onApply:M,onChangeShipCount:Ke}),ue&&o(fo,{dialogData:ue,shipWarnings:Xe,myListOnly:c.myListOnly,onCancel:Je,onApply:Ze,onChangeShipCount:et}),s&&o($t,{title:u("button.initialize"),question:u("fleetSetup.confirmInitializeFleet"),cancelText:u("button.cancel"),confirmText:u("button.initialize"),onCancel:at,onConfirm:st})]})};export{Lo as FleetSetupEditPage,Lo as default};
