var j=Object.defineProperty,b=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var g=(e,t,o)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))k.call(t,o)&&g(e,o,t[o]);if(y)for(var o of y(t))F.call(t,o)&&g(e,o,t[o]);return e},C=(e,t)=>b(e,L(t));import{r as n,b as w,F as B,j as a,s as E,h as H,P as I,G as A,t as P,v as K,M as R,w as z,x as V,y as J,z as M,T as O}from"./vendor.d72687a6.js";import{c as _,i as q,r as G}from"./NavigationBar.60fa7a4c.js";import{g as W}from"./domUtils.e9df6b0f.js";import{u as N,T as $}from"./useTable.4ca8cd5d.js";import{h as U,a as Y,s as x,t as Q,j as S,k as X,l as v,u as Z}from"./index.d5846f0d.js";var h={},ee=q.exports;Object.defineProperty(h,"__esModule",{value:!0});var D=h.default=void 0,te=ee(_),oe=G,ae=(0,te.default)((0,oe.jsx)("path",{d:"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z"}),"ViewColumn");D=h.default=ae;function ge(e={}){return p({name:!0,type:!1,row:!1,cost:!1,operationLimit:!1,source:!1,weight:!1},e)}function ne(){return[{columnKey:"type",name:"\u8266\u7A2E"},{columnKey:"row",name:"\u914D\u7F6E"},{columnKey:"cost",name:"\u30B3\u30B9\u30C8"},{columnKey:"operationLimit",name:"\u7A3C\u50CD\u4E0A\u9650"},{columnKey:"source",name:"\u5165\u624B\u65B9\u6CD5"},{columnKey:"weight",name:"\u78BA\u7387\u306E\u91CD\u307F"}]}const we=e=>{const{onChange:t,buttonProps:o}=e,[r,c]=n.exports.useState(e.columnConfig),[m,i]=n.exports.useState(!1),[f]=n.exports.useState(()=>ne()),u=n.exports.useRef(null),T=s=>{c(d=>C(p({},d),{[s]:!d[s]}))};return n.exports.useEffect(()=>{const s=setTimeout(()=>{t(r)},0);return()=>clearTimeout(s)},[r,t]),w(B,{children:[a(E,{variant:"outlined",fullWidth:o==null?void 0:o.fullWidth,size:o==null?void 0:o.size,ref:u,children:a(H,{startIcon:a(D,{}),onClick:()=>i(!0),children:"\u8868\u793A\u9805\u76EE"})},"columnConfig"),a(I,{open:m,anchorEl:u.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1},children:({TransitionProps:s,placement:d})=>a(A,C(p({},s),{style:{transformOrigin:d==="bottom"?"center top":"center bottom"},children:a(P,{style:{maxHeight:W(u.current),overflowY:"auto"},children:a(K,{onClickAway:()=>i(!1),children:a(R,{id:"split-button-menu",children:f.map(l=>w(z,{selected:r[l.columnKey],onClick:()=>T(l.columnKey),children:[a(V,{children:a(J,{edge:"start",checked:r[l.columnKey],tabIndex:-1,disableRipple:!0})}),a(M,{children:l.name})]},l.columnKey))})})})}))})]})},re=e=>({id:"nameLink",renderHeader:()=>"\u8266\u540D",renderCell:t=>a(O,{variant:"body2",children:a(U,{onClick:()=>{e.onClick(t.id)},children:t.name})}),sortFn:(t,o)=>t.name.localeCompare(o.name,"ja-JP")}),se={id:"type",renderHeader:()=>"\u8266\u7A2E",renderCell:e=>Y(e.type,e.subType),sortFn:[(e,t)=>x(e.type,e.subType)-x(t.type,t.subType),(e,t)=>e.name.localeCompare(t.name,"ja-JP")],initialSortDirection:"asc"},ie={id:"row",renderHeader:()=>"\u914D\u7F6E",renderCell:e=>Q(e.row),sortFn:[(e,t)=>S(e.row)-S(t.row),(e,t)=>e.name.localeCompare(t.name,"ja-JP")]},ue={id:"cost",renderHeader:()=>"\u30B3\u30B9\u30C8",renderCell:e=>e.cost,sortFn:[(e,t)=>e.cost-t.cost,(e,t)=>e.name.localeCompare(t.name,"ja-JP")]},le={id:"operationLimit",renderHeader:()=>"\u7A3C\u50CD\u4E0A\u9650",renderCell:e=>e.operationLimit,sortFn:[(e,t)=>e.operationLimit-t.operationLimit,(e,t)=>e.name.localeCompare(t.name,"ja-JP")]},ce={id:"source",renderHeader:()=>"\u5165\u624B\u65B9\u6CD5",renderCell:e=>X(e.source),sortFn:[(e,t)=>v(e.source)-v(t.source),(e,t)=>e.name.localeCompare(t.name,"ja-JP")]},me={id:"weight",renderHeader:()=>"\u91CD\u307F",renderCell:e=>e.weight,sortFn:[(e,t)=>e.weight-t.weight,(e,t)=>e.name.localeCompare(t.name,"ja-JP")]},xe=e=>{const{shipDefinitions:t,columnConfig:o}=e,{table:r,setTableData:c}=N(),{openShipDetailDialog:m}=Z(),i=n.exports.useMemo(()=>[re({onClick:m}),...o.type?[se]:[],...o.row?[ie]:[],...o.cost?[ue]:[],...o.operationLimit?[le]:[],...o.source?[ce]:[],...o.weight?[me]:[]],[o,m]);return n.exports.useEffect(()=>{c({columns:i,data:t,rowIdFn:u=>u.id})},[c,i,t]),a($,{table:r,size:"small"})};export{we as C,xe as S,ge as c};
