var $=Object.defineProperty,V=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var b=(e,r,t)=>r in e?$(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,A=(e,r)=>{for(var t in r||(r={}))Y.call(r,t)&&b(e,t,r[t]);if(G)for(var t of G(r))q.call(r,t)&&b(e,t,r[t]);return e},R=(e,r)=>V(e,z(r));import{r as C,b as U,F as Q,s as X,j as c,h as W,P as Z,G as ee,t as re,v as te,M as ue,w as ae,x as se,y as ne,z as le}from"./vendor.d72687a6.js";import{c as v,i as x,r as w}from"./NavigationBar.60fa7a4c.js";import{M as s,R as n,d as l,e as T,i as H,g as oe,S as i,f as P,h as N,t as ce}from"./index.752300b5.js";import{P as m,W as M}from"./WishState.3db35fd5.js";import{g as Oe}from"./domUtils.e9df6b0f.js";var p={},Te=x.exports;Object.defineProperty(p,"__esModule",{value:!0});var j=p.default=void 0,Se=Te(v),ie=w,Ie=(0,Se.default)((0,ie.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt");j=p.default=Ie;var y={},Ee=x.exports;Object.defineProperty(y,"__esModule",{value:!0});var k=y.default=void 0,Ae=Ee(v),Ne=w,_e=(0,Ae.default)((0,Ne.jsx)("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z"}),"FilterAltOff");k=y.default=_e;function Re(e){switch(e){case s.JUPITER_INDUSTRIES:return"\u30B8\u30E5\u30D4\u30BF\u30FC\u30A4\u30F3\u30C0\u30B9\u30C8\u30EA\u30FC";case s.NOMA_SHIPPING_GROUP:return"\u30CE\u30DE\u30B7\u30C3\u30D4\u30F3\u30B0";case s.ANTONIOS_CONSORTIUM:return"\u30A2\u30F3\u30C8\u30CB\u30AA\u30B9\u8CA1\u56E3";case s.DAWN_ACCORD:return"\u30C9\u30FC\u30F3\u5354\u5B9A\u6761\u7D04\u6A5F\u69CB"}}function Ke(e){switch(e){case s.JUPITER_INDUSTRIES:return 1;case s.NOMA_SHIPPING_GROUP:return 2;case s.ANTONIOS_CONSORTIUM:return 3;case s.DAWN_ACCORD:return 4}}function fe(e){switch(e){case n.JUPITER_INDUSTRIES:return"\u30B8\u30E5\u30D4\u30BF\u30FC\u30A4\u30F3\u30C0\u30B9\u30C8\u30EA\u30FC";case n.NOMA_SHIPPING_GROUP:return"\u30CE\u30DE\u30B7\u30C3\u30D4\u30F3\u30B0";case n.ANTONIOS_CONSORTIUM:return"\u30A2\u30F3\u30C8\u30CB\u30AA\u30B9\u8CA1\u56E3";case n.DAWN_ACCORD:return"\u30C9\u30FC\u30F3\u5354\u5B9A\u6761\u7D04\u6A5F\u69CB"}}function ge(e){switch(e){case n.JUPITER_INDUSTRIES:return 1;case n.NOMA_SHIPPING_GROUP:return 2;case n.ANTONIOS_CONSORTIUM:return 3;case n.DAWN_ACCORD:return 4}}function Ce(e){switch(e){case l.OUTSTANDING_FIREPOWER:return"\u9AD8\u706B\u529B";case l.SUSTAINED_COMBAT:return"\u751F\u5B58\u6027";case l.STRATEGY_AND_SUPPORT:return"\u6226\u7565\uFF06\u652F\u63F4";case l.FIGHTER_AND_CORVETTE:return"\u8266\u8F09\u6A5F&\u8B77\u9001\u8266"}}function $e(e){switch(e){case l.OUTSTANDING_FIREPOWER:return 1;case l.SUSTAINED_COMBAT:return 2;case l.STRATEGY_AND_SUPPORT:return 3;case l.FIGHTER_AND_CORVETTE:return 4}}function Fe(e){switch(e){case T.PROJECTILE_WEAPONS:return"\u6295\u5C04\u5175\u5668";case T.DIRECT_FIRE_WEAPONS:return"\u76F4\u63A5\u5C04\u6483\u6B66\u5668"}}function Ve(e){switch(e){case T.PROJECTILE_WEAPONS:return 1;case T.DIRECT_FIRE_WEAPONS:return 2}}function de(e){return(e!=null?e:[i.FRONT,i.MIDDLE,i.BACK]).map(r=>({filterKey:r,name:ce(r)}))}function Pe(e){return(e!=null?e:Object.keys(P)).map(r=>({filterKey:r,name:P[r].name}))}function he(e){return(e!=null?e:[s.JUPITER_INDUSTRIES,s.NOMA_SHIPPING_GROUP,s.ANTONIOS_CONSORTIUM,s.DAWN_ACCORD]).map(r=>({filterKey:r,name:Re(r)}))}function De(e){return(e!=null?e:[n.JUPITER_INDUSTRIES,n.NOMA_SHIPPING_GROUP,n.ANTONIOS_CONSORTIUM,n.DAWN_ACCORD]).map(r=>({filterKey:r,name:`\u59D4\u8A17\u4F01\u696D\uFF1A${fe(r)}`}))}function Ue(e){return(e!=null?e:[l.OUTSTANDING_FIREPOWER,l.SUSTAINED_COMBAT,l.STRATEGY_AND_SUPPORT,l.FIGHTER_AND_CORVETTE]).map(r=>({filterKey:r,name:`\u6226\u7565\u80FD\u529B\uFF1A${Ce(r)}`}))}function me(e){return(e!=null?e:[T.PROJECTILE_WEAPONS,T.DIRECT_FIRE_WEAPONS]).map(r=>({filterKey:r,name:`\u6226\u8853\u6027\u80FD\uFF1A${Fe(r)}`}))}function Me(e={}){var r,t,u,a,o,I;return[...de((r=e.shipRows)!=null?r:null),...Pe((t=e.shipTypes)!=null?t:null),...he((u=e.manufacturer)!=null?u:null),...e.researchManufacturer===!1?[]:De((a=e.researchManufacturer)!=null?a:null),...e.researchStrategyTypes===!1?[]:Ue((o=e.researchStrategyTypes)!=null?o:null),...e.researchTacticTypes===!1?[]:me((I=e.researchTacticTypes)!=null?I:null)]}function ze(){return R(A({[i.FRONT]:!1,[i.MIDDLE]:!1,[i.BACK]:!1},Object.keys(P).reduce((e,r)=>R(A({},e),{[r]:!1}),{})),{[s.JUPITER_INDUSTRIES]:!1,[s.NOMA_SHIPPING_GROUP]:!1,[s.ANTONIOS_CONSORTIUM]:!1,[s.DAWN_ACCORD]:!1,[n.JUPITER_INDUSTRIES]:!1,[n.NOMA_SHIPPING_GROUP]:!1,[n.ANTONIOS_CONSORTIUM]:!1,[n.DAWN_ACCORD]:!1,[l.OUTSTANDING_FIREPOWER]:!1,[l.SUSTAINED_COMBAT]:!1,[l.STRATEGY_AND_SUPPORT]:!1,[l.FIGHTER_AND_CORVETTE]:!1,[T.PROJECTILE_WEAPONS]:!1,[T.DIRECT_FIRE_WEAPONS]:!1})}function pe(e){const r=A({},e);return Object.keys(r).forEach(t=>{r[t]=!1}),r}function Ye(e,r){let t=e;return ye(r)&&(t=t.filter(u=>r[u.row]===!0)),Be(r)&&(t=t.filter(u=>r[u.type]===!0)),Ge(r)&&(t=t.filter(u=>r[u.manufacturer]===!0)),be(r)&&(t=t.filter(u=>u.researchManufacturer&&r[u.researchManufacturer]===!0)),We(r)&&(t=t.filter(u=>{var a;return((a=u.researchStrategyTypes)!=null?a:[]).some(o=>r[o]===!0)})),ve(r)&&(t=t.filter(u=>{var a;return((a=u.researchTacticTypes)!=null?a:[]).some(o=>r[o]===!0)})),t}function qe(e){const r={[N.STARTER_SHIP]:[],[N.TECH_FILE]:[],[N.CITY_TRADE]:[],[N.DOCK_EFFECT]:[],[N.UNKNOWN]:[]};return e.forEach(t=>{r[t.source].push(t)}),r}function ye(e){return[i.FRONT,i.MIDDLE,i.BACK].some(r=>e[r]===!0)}function Be(e){return Object.keys(P).some(r=>e[r]===!0)}function Ge(e){return[s.JUPITER_INDUSTRIES,s.NOMA_SHIPPING_GROUP,s.ANTONIOS_CONSORTIUM,s.DAWN_ACCORD].some(r=>e[r]===!0)}function be(e){return[n.JUPITER_INDUSTRIES,n.NOMA_SHIPPING_GROUP,n.ANTONIOS_CONSORTIUM,n.DAWN_ACCORD].some(r=>e[r]===!0)}function We(e){return[l.OUTSTANDING_FIREPOWER,l.SUSTAINED_COMBAT,l.STRATEGY_AND_SUPPORT,l.FIGHTER_AND_CORVETTE].some(r=>e[r]===!0)}function ve(e){return[T.PROJECTILE_WEAPONS,T.DIRECT_FIRE_WEAPONS].some(r=>e[r]===!0)}function Qe(e,r){return e.filter(t=>{var u;return((u=r[t.id])==null?void 0:u.possession)===m.POSSESSED})}function Xe(e,r){return e.filter(t=>{var u;return((u=r[t.id])==null?void 0:u.wish)===M.WANTED})}function Ze(e,r){return e.filter(t=>{var u;return H(t.id)&&((u=r[t.id])==null?void 0:u.wish)===M.NOT_WANTED})}function er(e,r){return e.filter(a=>a.source===N.TECH_FILE||a.source===N.STARTER_SHIP).filter(a=>{var o;return((o=r[a.id])==null?void 0:o.possession)===m.POSSESSED}).filter(a=>{var o,I,F;if(!!a.modules&&a.modules.length>0||a.baseModelId)return!1;if(!!a.subModelIds||!!a.baseModelId){const S=(F=(I=a.subModelIds)!=null?I:(o=oe(a.baseModelId))==null?void 0:o.subModelIds)!=null?F:[];return xe(S,r)?!(S.filter(E=>H(E)&&!!r[E]&&r[E].possession!==m.POSSESSED).filter(E=>r[E].wish!==M.NOT_WANTED).length>0):!1}return!0})}function xe(e,r){return e.length>0&&e.every(t=>{var u;return!!((u=r[t])==null?void 0:u.possession)})}const rr=e=>{const{onChange:r,popperProps:t,shipRows:u,shipTypes:a,researchManufacturer:o,researchStrategyTypes:I,researchTacticTypes:F,buttonProps:S}=e,[_,h]=C.exports.useState(e.filter),[E,B]=C.exports.useState(!1),[J]=C.exports.useState(()=>Me({shipRows:u,shipTypes:a,researchManufacturer:o,researchStrategyTypes:I,researchTacticTypes:F})),D=C.exports.useRef(null),L=O=>{h(d=>R(A({},d),{[O]:!d[O]}))},K=()=>{h(O=>pe(O))};C.exports.useEffect(()=>{const O=setTimeout(()=>{r(_)},0);return()=>clearTimeout(O)},[_,r]);const g=Object.values(_).some(O=>O);return U(Q,{children:[U(X,{variant:"outlined",ref:D,fullWidth:S==null?void 0:S.fullWidth,size:S==null?void 0:S.size,children:[c(W,{startIcon:c(j,{}),onClick:()=>B(!0),sx:{flexShrink:1},children:"\u30D5\u30A3\u30EB\u30BF\u30FC"}),g&&c(W,{size:"small",onClick:K,sx:{flexShrink:3},children:c(k,{})})]},"filter"),c(Z,R(A({open:E,anchorEl:D.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1}},t),{children:({TransitionProps:O,placement:d})=>c(ee,R(A({},O),{style:{transformOrigin:d==="bottom"?"center top":"center bottom"},children:c(re,{style:{maxHeight:Oe(D.current),overflowY:"auto"},children:c(te,{onClickAway:()=>B(!1),children:c(ue,{id:"split-button-menu",children:J.map(f=>U(ae,{selected:_[f.filterKey],onClick:()=>L(f.filterKey),children:[c(se,{children:c(ne,{edge:"start",checked:_[f.filterKey],tabIndex:-1,disableRipple:!0})}),c(le,{children:f.name})]},f.filterKey))})})})}))}))]})};export{rr as S,Ye as a,Xe as b,ze as c,Ze as d,Qe as e,er as f,fe as g,Ce as h,$e as i,Fe as j,Ve as k,Ke as m,ge as r,qe as s,Re as t};
