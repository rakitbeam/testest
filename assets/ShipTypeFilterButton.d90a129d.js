import{A as ee,C as te,D as K,E as Oe,_ as R,r as S,G as ae,H as Se,I as re,j as k,k as n,J as se,K as j,L as V,M as Te,N as Ce,O as Re,P as ne,Q as oe,R as le,U as z,v as me,W as Y,V as ce,X as Ee,Y as _e,S as m,Z as L,$ as l,a0 as f,a1 as D,a2 as p,a3 as c,a4 as Ne,a as Ae,a5 as be,t as x,a6 as Pe,a7 as Fe,a8 as ye,a9 as ve,F as ke,B as H,aa as xe,q as Z,ab as De,w as Ue}from"./index.4e0e661f.js";import{B as Me,g as Be,L as ge}from"./domUtils.4f8d4a17.js";import{P as Ge}from"./Popper.efcbd08f.js";import{G as He,M as Le,a as we,L as We}from"./MenuItem.2ccb34fa.js";import{C as $e}from"./ClickAwayListener.0b079662.js";import{u as ze}from"./useFormControl.a18fc251.js";function Ke(e){return ee("PrivateSwitchBase",e)}te("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const je=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Ve=e=>{const{classes:t,checked:a,disabled:r,edge:s}=e,o={root:["root",a&&"checked",r&&"disabled",s&&`edge${j(s)}`],input:["input"]};return re(o,Ke,t)},Ye=K(Oe)(({ownerState:e})=>R({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Je=K("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),qe=S.exports.forwardRef(function(t,a){const{autoFocus:r,checked:s,checkedIcon:o,className:I,defaultChecked:d,disabled:E,disableFocusRipple:O=!1,edge:h=!1,icon:i,id:_,inputProps:U,inputRef:b,name:y,onBlur:T,onChange:v,onFocus:P,readOnly:w,required:B,tabIndex:g,type:u,value:F}=t,G=ae(t,je),[N,de]=Se({controlled:s,default:Boolean(d),name:"SwitchBase",state:"checked"}),A=ze(),he=C=>{P&&P(C),A&&A.onFocus&&A.onFocus(C)},fe=C=>{T&&T(C),A&&A.onBlur&&A.onBlur(C)},pe=C=>{if(C.nativeEvent.defaultPrevented)return;const X=C.target.checked;de(X),v&&v(C,X)};let M=E;A&&typeof M=="undefined"&&(M=A.disabled);const Ie=u==="checkbox"||u==="radio",W=R({},t,{checked:N,disabled:M,disableFocusRipple:O,edge:h}),Q=Ve(W);return k(Ye,R({component:"span",className:se(Q.root,I),centerRipple:!0,focusRipple:!O,disabled:M,tabIndex:null,role:void 0,onFocus:he,onBlur:fe,ownerState:W,ref:a},G,{children:[n(Je,R({autoFocus:r,checked:s,defaultChecked:d,className:Q.input,disabled:M,id:Ie&&_,name:y,onChange:pe,readOnly:w,ref:b,required:B,ownerState:W,tabIndex:g,type:u},u==="checkbox"&&F===void 0?{}:{value:F},U)),N?o:i]}))});var Qe=qe,Xe=V(n("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Ze=V(n("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),et=V(n("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function tt(e){return ee("MuiCheckbox",e)}const at=te("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]);var $=at;const rt=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],st=e=>{const{classes:t,indeterminate:a,color:r}=e,s={root:["root",a&&"indeterminate",`color${j(r)}`]},o=re(s,tt,t);return R({},t,o)},nt=K(Qe,{shouldForwardProp:e=>Te(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,a.color!=="default"&&t[`color${j(a.color)}`]]}})(({theme:e,ownerState:t})=>R({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ce(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${$.checked}, &.${$.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${$.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),ot=n(Ze,{}),lt=n(Xe,{}),ct=n(et,{}),it=S.exports.forwardRef(function(t,a){var r,s;const o=Re({props:t,name:"MuiCheckbox"}),{checkedIcon:I=ot,color:d="primary",icon:E=lt,indeterminate:O=!1,indeterminateIcon:h=ct,inputProps:i,size:_="medium",className:U}=o,b=ae(o,rt),y=O?h:E,T=O?h:I,v=R({},o,{color:d,indeterminate:O,size:_}),P=st(v);return n(nt,R({type:"checkbox",inputProps:R({"data-indeterminate":O},i),icon:S.exports.cloneElement(y,{fontSize:(r=y.props.fontSize)!=null?r:_}),checkedIcon:S.exports.cloneElement(T,{fontSize:(s=T.props.fontSize)!=null?s:_}),ownerState:v,ref:a,className:se(P.root,U)},b,{classes:P}))});var ut=it,J={},dt=oe.exports;Object.defineProperty(J,"__esModule",{value:!0});var ie=J.default=void 0,ht=dt(ne),ft=le,pt=(0,ht.default)((0,ft.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt");ie=J.default=pt;var q={},It=oe.exports;Object.defineProperty(q,"__esModule",{value:!0});var ue=q.default=void 0,Ot=It(ne),St=le,Tt=(0,Ot.default)((0,St.jsx)("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z"}),"FilterAltOff");ue=q.default=Tt;function Ct(e){return(e!=null?e:[m.FRONT,m.MIDDLE,m.BACK]).map(t=>({filterKey:t,name:Ae(t)}))}function Rt(e){return(e!=null?e:Object.keys(L)).map(t=>({filterKey:t,name:L[t].name}))}function mt(e){return(e!=null?e:[l.JUPITER_INDUSTRIES,l.NOMA_SHIPPING_GROUP,l.ANTONIOS_CONSORTIUM,l.DAWN_ACCORD,l.HAYREDDIN_CLAN,l.THUNDERBOLT_GROUP]).map(t=>({filterKey:t,name:be(t)}))}function Et(e){return(e!=null?e:[c.CITY_TRADE,c.DOCK_EFFECT,c.SALVAGE]).map(t=>({filterKey:t,name:ve(t)}))}function _t(e){return(e!=null?e:[f.JUPITER_INDUSTRIES,f.NOMA_SHIPPING_GROUP,f.ANTONIOS_CONSORTIUM,f.DAWN_ACCORD]).map(t=>({filterKey:t,name:x("label.researchManufacturerOption",{manufacturer:Pe(t)})}))}function Nt(e){return(e!=null?e:[p.OUTSTANDING_FIREPOWER,p.SUSTAINED_COMBAT,p.STRATEGY_AND_SUPPORT,p.FIGHTER_AND_CORVETTE]).map(t=>({filterKey:t,name:x("label.researchStrategyTypeOption",{strategyType:ye(t)})}))}function At(e){return(e!=null?e:[D.PROJECTILE_WEAPONS,D.DIRECT_FIRE_WEAPONS]).map(t=>({filterKey:t,name:x("label.researchTacticTypeOption",{tacticType:Fe(t)})}))}function bt(e={}){var t,a,r,s,o,I,d;return[...Ct((t=e.shipRows)!=null?t:null),...Rt((a=e.shipTypes)!=null?a:null),...mt((r=e.manufacturer)!=null?r:null),...e.researchManufacturer===!1?[]:_t((s=e.researchManufacturer)!=null?s:null),...e.researchTacticTypes===!1?[]:At((o=e.researchTacticTypes)!=null?o:null),...e.researchStrategyTypes===!1?[]:Nt((I=e.researchStrategyTypes)!=null?I:null),...Et((d=e.shipSources)!=null?d:null)]}function Wt(){return{[m.FRONT]:!1,[m.MIDDLE]:!1,[m.BACK]:!1,...Object.keys(L).reduce((e,t)=>({...e,[t]:!1}),{}),[l.JUPITER_INDUSTRIES]:!1,[l.NOMA_SHIPPING_GROUP]:!1,[l.ANTONIOS_CONSORTIUM]:!1,[l.DAWN_ACCORD]:!1,[l.HAYREDDIN_CLAN]:!1,[l.THUNDERBOLT_GROUP]:!1,[f.JUPITER_INDUSTRIES]:!1,[f.NOMA_SHIPPING_GROUP]:!1,[f.ANTONIOS_CONSORTIUM]:!1,[f.DAWN_ACCORD]:!1,[D.PROJECTILE_WEAPONS]:!1,[D.DIRECT_FIRE_WEAPONS]:!1,[p.OUTSTANDING_FIREPOWER]:!1,[p.SUSTAINED_COMBAT]:!1,[p.STRATEGY_AND_SUPPORT]:!1,[p.FIGHTER_AND_CORVETTE]:!1,[c.TECH_FILE]:!1,[c.CITY_TRADE]:!1,[c.DOCK_EFFECT]:!1,[c.SALVAGE]:!1,[c.STARTER_SHIP]:!1}}function Pt(e){const t={...e};return Object.keys(t).forEach(a=>{t[a]=!1}),t}function $t(e,t){let a=e;return Ft(t)&&(a=a.filter(r=>t[r.row]===!0)),yt(t)&&(a=a.filter(r=>t[r.type]===!0)),kt(t)&&(a=a.filter(r=>t[r.manufacturer]===!0)),xt(t)&&(a=a.filter(r=>r.researchManufacturer&&t[r.researchManufacturer]===!0)),Dt(t)&&(a=a.filter(r=>{var s;return((s=r.researchStrategyTypes)!=null?s:[]).some(o=>t[o]===!0)})),Ut(t)&&(a=a.filter(r=>{var s;return((s=r.researchTacticTypes)!=null?s:[]).some(o=>t[o]===!0)})),vt(t)&&(a=a.filter(r=>t[r.source]===!0)),a}function zt(e){const t={[c.STARTER_SHIP]:[],[c.TECH_FILE]:[],[c.CITY_TRADE]:[],[c.DOCK_EFFECT]:[],[c.SALVAGE]:[],[c.UNKNOWN]:[]};return e.forEach(a=>{t[a.source].push(a)}),t}function Ft(e){return[m.FRONT,m.MIDDLE,m.BACK].some(t=>e[t]===!0)}function yt(e){return Object.keys(L).some(t=>e[t]===!0)}function vt(e){return Object.keys(Ne).some(t=>e[t]===!0)}function kt(e){return[l.JUPITER_INDUSTRIES,l.NOMA_SHIPPING_GROUP,l.ANTONIOS_CONSORTIUM,l.DAWN_ACCORD,l.HAYREDDIN_CLAN,l.THUNDERBOLT_GROUP].some(t=>e[t]===!0)}function xt(e){return[f.JUPITER_INDUSTRIES,f.NOMA_SHIPPING_GROUP,f.ANTONIOS_CONSORTIUM,f.DAWN_ACCORD].some(t=>e[t]===!0)}function Dt(e){return[p.OUTSTANDING_FIREPOWER,p.SUSTAINED_COMBAT,p.STRATEGY_AND_SUPPORT,p.FIGHTER_AND_CORVETTE].some(t=>e[t]===!0)}function Ut(e){return[D.PROJECTILE_WEAPONS,D.DIRECT_FIRE_WEAPONS].some(t=>e[t]===!0)}function Kt(e,t){return e.filter(a=>{var r;return((r=t[a.id])==null?void 0:r.possession)===z.POSSESSED})}function jt(e,t){return e.filter(a=>{var r;return me(a,t).length>0?!0:((r=t.ships[a.id])==null?void 0:r.wish)===Y.WANTED})}function Vt(e,t){return e.filter(a=>{var r;return ce(a.id)&&((r=t[a.id])==null?void 0:r.wish)===Y.NOT_WANTED})}function Yt(e,t){return e.filter(s=>s.source===c.TECH_FILE||s.source===c.STARTER_SHIP).filter(s=>{var o;return((o=t.ships[s.id])==null?void 0:o.possession)===z.POSSESSED}).filter(s=>{var o,I,d;if(!!s.modules&&Ee(s,t).length>0||s.baseModelId)return!1;if(!!s.subModelIds||!!s.baseModelId){const E=(d=(I=s.subModelIds)!=null?I:(o=_e(s.baseModelId))==null?void 0:o.subModelIds)!=null?d:[];return Mt(E,t.ships)?!(E.filter(i=>ce(i)&&!!t.ships[i]&&t.ships[i].possession!==z.POSSESSED).filter(i=>t.ships[i].wish!==Y.NOT_WANTED).length>0):!1}return!0})}function Mt(e,t){return e.length>0&&e.every(a=>{var r;return!!((r=t[a])!=null&&r.possession)})}const Jt=e=>{const{onChange:t,popperProps:a,shipRows:r,shipTypes:s,manufacturer:o,researchManufacturer:I,researchStrategyTypes:d,researchTacticTypes:E,shipSources:O,buttonProps:h}=e,[i,_]=S.exports.useState(e.filter),[U,b]=S.exports.useState(!1),[y]=S.exports.useState(()=>bt({shipRows:r,shipTypes:s,manufacturer:o,researchManufacturer:I,researchStrategyTypes:d,researchTacticTypes:E,shipSources:O})),T=S.exports.useRef(null),[v,P]=S.exports.useTransition(),w=u=>{_(F=>({...F,[u]:!F[u]}))},B=()=>{_(u=>Pt(u))};S.exports.useEffect(()=>{P(()=>{t(i)})},[i,t]);const g=Object.values(i).some(u=>u);return k(ke,{children:[k(Me,{variant:"outlined",ref:T,fullWidth:h==null?void 0:h.fullWidth,size:h==null?void 0:h.size,children:[n(H,{startIcon:n(ie,{}),onClick:()=>b(!0),sx:{flexShrink:1},children:x("button.filter")}),g&&n(H,{size:"small",onClick:B,sx:{flexShrink:3},children:n(ue,{})})]},"filter"),n(Ge,{open:U,anchorEl:T.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1},...a,children:({TransitionProps:u,placement:F})=>{var G;return n(He,{...u,style:{transformOrigin:F==="bottom"?"center top":"center bottom"},children:n("div",{children:n($e,{onClickAway:()=>b(!1),children:k(xe,{children:[n(Z,{component:"div",sx:{overflowY:"auto",maxHeight:`${((G=Be(T.current))!=null?G:0)-50}px`},children:n(Le,{id:"split-button-menu",children:y.map(N=>k(we,{selected:i[N.filterKey],onClick:()=>w(N.filterKey),children:[n(ge,{children:n(ut,{edge:"start",checked:i[N.filterKey],tabIndex:-1,disableRipple:!0})}),n(We,{children:N.name})]},N.filterKey))})}),n(De,{}),n(Z,{component:"div",p:1,display:"flex",justifyContent:"end",children:k(Ue,{spacing:1,direction:"row",children:[n(H,{variant:"outlined",onClick:B,disabled:!g,children:x("button.unselectAll")}),n(H,{variant:"outlined",onClick:()=>b(!1),children:x("button.close")})]})})]})})})})}})]})};export{ut as C,Jt as S,$t as a,jt as b,Wt as c,Vt as d,Kt as e,Yt as f,Qe as g,zt as s};
