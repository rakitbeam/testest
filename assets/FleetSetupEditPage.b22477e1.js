import{m as z,n as U,o as I,y as W,_ as D,r as p,D as N,q as O,w as V,a as f,T as v,j as o,x as ne,z as Ee,A as at,C as ke,ba as it,v as ut,a3 as st,au as lt,bb as we,bc as pe,Z as M,b as R,b3 as ct,E as q,G as Y,H as X,F as T,B as E,k as Te,S as b,l as $e,aR as Me,f as S,d as ee,a2 as K,af as Z,ap as dt,ah as pt,b9 as L,u as ht,bd as ft,b5 as mt,aZ as Ft}from"./index.65d054c9.js";import{a as gt,I as he,N as Ct,P as yt}from"./PageContent.7867d997.js";import{T as P}from"./TextField.93daf374.js";import{u as vt,a as B}from"./MenuItem.6b038ffc.js";import{d as xt,a as bt,b as St,C as Dt}from"./ConfirmationDialog.aa8dab7c.js";import{A as At}from"./ActionBar.51e0ffcc.js";import{B as Rt,S as Bt,g as Et,c as Ie,d as kt,e as wt,s as Tt,h as $t,i as Mt,v as oe,j as _e,k as It,l as fe,A as Le,m as _t,a as Lt,G as me,b as Ot}from"./fleetSetupValidation.c3ef58a2.js";import{R as re}from"./ResponsiveDialog.8ded4fb6.js";import{F as Gt}from"./Select.c64fcd6c.js";import{g as Pt,c as Oe,S as Ge}from"./ShipTypeFilterButton.d487e56a.js";import{T as Ht}from"./Tooltip.0cb2f195.js";import"./domUtils.3ed3a1b1.js";import"./sorting.c6946657.js";function jt(n){return String(n).match(/[\d.\-+]*\s*(.*)/)[1]||""}function zt(n){return parseFloat(n)}function Ut(n){return z("MuiFormControlLabel",n)}const Wt=U("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label"]);var H=Wt;const Nt=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],Vt=n=>{const{classes:e,disabled:t,labelPlacement:r}=n,a={root:["root",t&&"disabled",`labelPlacement${W(r)}`],label:["label",t&&"disabled"]};return V(a,Ut,e)},qt=I("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${H.label}`]:e.label},e.root,e[`labelPlacement${W(t.labelPlacement)}`]]}})(({theme:n,ownerState:e})=>D({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${H.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${H.label}`]:{[`&.${H.disabled}`]:{color:n.palette.text.disabled}}})),Yt=p.exports.forwardRef(function(e,t){const r=N({props:e,name:"MuiFormControlLabel"}),{className:a,componentsProps:i={},control:u,disabled:l,disableTypography:h,label:c,labelPlacement:m="end"}=r,C=O(r,Nt),d=vt();let y=l;typeof y=="undefined"&&typeof u.props.disabled!="undefined"&&(y=u.props.disabled),typeof y=="undefined"&&d&&(y=d.disabled);const s={disabled:y};["checked","name","onChange","value","inputRef"].forEach(x=>{typeof u.props[x]=="undefined"&&typeof r[x]!="undefined"&&(s[x]=r[x])});const F=D({},r,{disabled:y,label:c,labelPlacement:m}),g=Vt(F);return f(qt,D({className:ne(g.root,a),ownerState:F,ref:t},C,{children:[p.exports.cloneElement(u,s),c.type===v||h?c:o(v,D({component:"span",className:g.label},i.typography,{children:c}))]}))});var Fe=Yt;function Xt(n){return z("MuiFormGroup",n)}U("MuiFormGroup",["root","row"]);const Kt=["className","row"],Zt=n=>{const{classes:e,row:t}=n;return V({root:["root",t&&"row"]},Xt,e)},Qt=I("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.row&&e.row]}})(({ownerState:n})=>D({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})),Jt=p.exports.forwardRef(function(e,t){const r=N({props:e,name:"MuiFormGroup"}),{className:a,row:i=!1}=r,u=O(r,Kt),l=D({},r,{row:i}),h=Zt(l);return o(Qt,D({className:ne(h.root,a),ownerState:l,ref:t},u))});var en=Jt,tn=Ee(o("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),nn=Ee(o("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");const on=I("span")({position:"relative",display:"flex"}),rn=I(tn,{skipSx:!0})({transform:"scale(1)"}),an=I(nn,{skipSx:!0})(({theme:n,ownerState:e})=>D({left:0,position:"absolute",transform:"scale(0)",transition:n.transitions.create("transform",{easing:n.transitions.easing.easeIn,duration:n.transitions.duration.shortest})},e.checked&&{transform:"scale(1)",transition:n.transitions.create("transform",{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.shortest})}));function Pe(n){const{checked:e=!1,classes:t={},fontSize:r}=n,a=D({},n,{checked:e});return f(on,{className:t.root,ownerState:a,children:[o(rn,{fontSize:r,className:t.background,ownerState:a}),o(an,{fontSize:r,className:t.dot,ownerState:a})]})}const un=p.exports.createContext(void 0);var He=un;function sn(){return p.exports.useContext(He)}function ln(n){return z("MuiRadio",n)}const cn=U("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]);var ge=cn;const dn=["checked","checkedIcon","color","icon","name","onChange","size"],pn=n=>{const{classes:e,color:t}=n,r={root:["root",`color${W(t)}`]};return D({},e,V(r,ln,e))},hn=I(Pt,{shouldForwardProp:n=>at(n)||n==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`color${W(t.color)}`]]}})(({theme:n,ownerState:e})=>D({color:n.palette.text.secondary,"&:hover":{backgroundColor:ke(e.color==="default"?n.palette.action.active:n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${ge.checked}`]:{color:n.palette[e.color].main}},{[`&.${ge.disabled}`]:{color:n.palette.action.disabled}}));function fn(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}const Ce=o(Pe,{checked:!0}),ye=o(Pe,{}),mn=p.exports.forwardRef(function(e,t){var r,a;const i=N({props:e,name:"MuiRadio"}),{checked:u,checkedIcon:l=Ce,color:h="primary",icon:c=ye,name:m,onChange:C,size:d="medium"}=i,y=O(i,dn),s=D({},i,{color:h,size:d}),F=pn(s),g=sn();let x=u;const A=it(C,g&&g.onChange);let k=m;return g&&(typeof x=="undefined"&&(x=fn(g.value,i.value)),typeof k=="undefined"&&(k=g.name)),o(hn,D({type:"radio",icon:p.exports.cloneElement(c,{fontSize:(r=ye.props.fontSize)!=null?r:d}),checkedIcon:p.exports.cloneElement(l,{fontSize:(a=Ce.props.fontSize)!=null?a:d}),ownerState:s,classes:F,name:k,checked:x,onChange:A,ref:t},y))});var ve=mn;const Fn=["actions","children","defaultValue","name","onChange","value"],gn=p.exports.forwardRef(function(e,t){const{actions:r,children:a,defaultValue:i,name:u,onChange:l,value:h}=e,c=O(e,Fn),m=p.exports.useRef(null),[C,d]=ut({controlled:h,default:i,name:"RadioGroup"});p.exports.useImperativeHandle(r,()=>({focus:()=>{let g=m.current.querySelector("input:not(:disabled):checked");g||(g=m.current.querySelector("input:not(:disabled)")),g&&g.focus()}}),[]);const y=st(t,m),s=g=>{d(g.target.value),l&&l(g,g.target.value)},F=lt(u);return o(He.Provider,{value:{name:F,onChange:s,value:C},children:o(en,D({role:"radiogroup",ref:y},c,{children:a}))})});var Cn=gn;function yn(n){return z("MuiSkeleton",n)}U("MuiSkeleton",["root","text","rectangular","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const vn=["animation","className","component","height","style","variant","width"];let j=n=>n,xe,be,Se,De;const xn=n=>{const{classes:e,variant:t,animation:r,hasChildren:a,width:i,height:u}=n;return V({root:["root",t,r,a&&"withChildren",a&&!i&&"fitContent",a&&!u&&"heightAuto"]},yn,e)},bn=we(xe||(xe=j`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),Sn=we(be||(be=j`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),Dn=I("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],t.animation!==!1&&e[t.animation],t.hasChildren&&e.withChildren,t.hasChildren&&!t.width&&e.fitContent,t.hasChildren&&!t.height&&e.heightAuto]}})(({theme:n,ownerState:e})=>{const t=jt(n.shape.borderRadius)||"px",r=zt(n.shape.borderRadius);return D({display:"block",backgroundColor:ke(n.palette.text.primary,n.palette.mode==="light"?.11:.13),height:"1.2em"},e.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${t}/${Math.round(r/.6*10)/10}${t}`,"&:empty:before":{content:'"\\00a0"'}},e.variant==="circular"&&{borderRadius:"50%"},e.hasChildren&&{"& > *":{visibility:"hidden"}},e.hasChildren&&!e.width&&{maxWidth:"fit-content"},e.hasChildren&&!e.height&&{height:"auto"})},({ownerState:n})=>n.animation==="pulse"&&pe(Se||(Se=j`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),bn),({ownerState:n,theme:e})=>n.animation==="wave"&&pe(De||(De=j`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(90deg, transparent, ${0}, transparent);
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),Sn,e.palette.action.hover)),An=p.exports.forwardRef(function(e,t){const r=N({props:e,name:"MuiSkeleton"}),{animation:a="pulse",className:i,component:u="span",height:l,style:h,variant:c="text",width:m}=r,C=O(r,vn),d=D({},r,{animation:a,component:u,variant:c,hasChildren:Boolean(C.children)}),y=xn(d);return o(Dn,D({as:u,ref:t,className:ne(y.root,i),ownerState:d},C,{style:D({width:m,height:l},h)}))});var w=An;const Rn=n=>{const{fleetSetup:e,onChange:t,errors:r,columnCount:a}=n,i=c=>{t({...e,name:c.target.value.trim()})},u=c=>{t({...e,maxCost:Number(c.target.value)})},l=c=>{t({...e,maxReinforcement:Number(c.target.value)})},h=c=>{t({...e,myListOnly:c.target.value==="myListOnly"})};return o(M,{children:o(R,{p:1,children:o(ct,{sx:{alignItems:"center"},offsetValue:!1,rowGap:1,columnCount:a,rows:[{key:"name",label:"\u8266\u968A\u540D",value:c=>o(P,{variant:"outlined",size:"small",value:e.name,onChange:i,error:!!r.name,helperText:r.name,fullWidth:c})},{key:"reinforcementCount",label:"\u6700\u5927\u5897\u63F4\u6570",value:c=>f(P,{variant:"outlined",size:"small",select:!0,value:e.maxReinforcement,onChange:l,error:!!r.maxReinforcement,helperText:r.maxReinforcement,fullWidth:c,SelectProps:{renderValue:()=>o(v,{variant:"body1",whiteSpace:"normal",children:e.maxReinforcement})},children:[o(B,{value:"5",children:"\uFF15\u96BB\uFF08\u7D50\u5408\u52B9\u679C\u7121\u3057\uFF09"}),o(B,{value:"6",children:"\uFF16\u96BB\uFF08\u5C0F\u578B\u88DC\u7D66\u57FA\u5730\u306B\u7D50\u5408\uFF09"}),o(B,{value:"9",children:"\uFF19\u96BB\uFF08\u4E2D\u7D99\u88DC\u7D66\u65BD\u8A2D\u306B\u7D50\u5408\uFF09"})]})},{key:"maxCost",label:"\u6700\u5927\u53F8\u4EE4Pt",value:c=>f(P,{variant:"outlined",size:"small",select:!0,value:e.maxCost,onChange:u,error:!!r.maxCost,helperText:r.maxCost,fullWidth:c,SelectProps:{renderValue:()=>o(v,{variant:"body1",whiteSpace:"normal",children:e.maxCost})},children:[o(B,{value:"450",children:"\uFF14\uFF15\uFF10\uFF08\u6226\u5730\u6307\u4EE4\u30BB\u30F3\u30BF\u30FC\u306B\u7D50\u5408\uFF09"}),o(B,{value:"430",children:"\uFF14\uFF13\uFF10\uFF08\u5354\u540C\u4F5C\u6226\u6A5F\u69CB\u306B\u7D50\u5408\uFF09"}),o(B,{value:"415",children:"\uFF14\uFF11\uFF15\uFF08\u9060\u8DDD\u96E2\u6307\u4EE4\u5C40\u306B\u7D50\u5408\uFF09"}),o(B,{value:"400",children:"\uFF14\uFF10\uFF10\uFF08\u7D50\u5408\u52B9\u679C\u7121\u3057\uFF09"}),o(B,{value:"350",children:"\uFF13\uFF15\uFF10\uFF08\u6226\u5730\u6307\u4EE4\u30BB\u30F3\u30BF\u30FC\u306B\u7D50\u5408\uFF09"}),o(B,{value:"330",children:"\uFF13\uFF13\uFF10\uFF08\u5354\u540C\u4F5C\u6226\u6A5F\u69CB\u306B\u7D50\u5408\uFF09"}),o(B,{value:"315",children:"\uFF13\uFF11\uFF15\uFF08\u9060\u8DDD\u96E2\u6307\u4EE4\u5C40\u306B\u7D50\u5408\uFF09"}),o(B,{value:"300",children:"\uFF13\uFF10\uFF10\uFF08\u7D50\u5408\u52B9\u679C\u7121\u3057\uFF09"})]})},{key:"myListOnly",label:"\u8FFD\u52A0\u3067\u304D\u308B\u8266\u8239",value:c=>f(P,{variant:"outlined",size:"small",select:!0,value:e.myListOnly?"myListOnly":"all",onChange:h,error:!!r.myListOnly,helperText:r.myListOnly,fullWidth:c,SelectProps:{renderValue:()=>o(v,{variant:"body1",whiteSpace:"normal",children:e.myListOnly?"\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8239":"\u5168\u3066\u306E\u8266\u8239"})},children:[o(B,{value:"all",children:"\u5168\u3066\u306E\u8266\u8239"}),o(B,{value:"myListOnly",children:"\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8239"})]})}]})})})};var ae={},Bn=Y.exports;Object.defineProperty(ae,"__esModule",{value:!0});var ie=ae.default=void 0,En=Bn(q),kn=X,wn=(0,En.default)((0,kn.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");ie=ae.default=wn;const je=n=>{const{onOpenAddShips:e,filter:t,buttonProps:r}=n;return o(Rt,{icon:o(ie,{}),text:"\u8266\u8239\u3092\u8FFD\u52A0",onClick:i=>{switch(i){case"addInitialShip":{e(null,t);break}case"addSelfReinforcement":{e("self",t);break}case"addAllyReinforcement":{e("ally",t);break}case"addAlly2Reinforcement":{e("ally2",t);break}case"addAlly3Reinforcement":{e("ally3",t);break}}},buttonProps:r,options:[{key:"addInitialShip",text:"\u901A\u5E38\u914D\u5099",value:"addInitialShip"},{key:"addSelfReinforcement",text:"\u5897\u63F4",value:"addSelfReinforcement"},{key:"addAllyReinforcement",text:"\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\uFF21",value:"addAllyReinforcement"},{key:"addAlly2Reinforcement",text:"\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\uFF22",value:"addAlly2Reinforcement"},{key:"addAlly3Reinforcement",text:"\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\uFF23",value:"addAlly3Reinforcement"}]})},Tn=n=>{const{grouping:e,onChangeGrouping:t,onCancel:r,onSave:a,onReset:i,onOpenAddShips:u,saveDisabled:l}=n;return o(At,{left:h=>f(T,{children:[o(Bt,{value:e,onChange:t,buttonProps:h}),o(je,{onOpenAddShips:u,buttonProps:h})]}),right:h=>f(T,{children:[o(E,{variant:"outlined",startIcon:o(xt,{}),onClick:i,...h,children:"\u521D\u671F\u5316"},"reset"),o(E,{variant:"outlined",startIcon:o(bt,{}),onClick:r,...h,children:"\u30AD\u30E3\u30F3\u30BB\u30EB"},"cancel"),o(E,{variant:"contained",startIcon:o(St,{}),onClick:a,disabled:l,...h,children:"\u4FDD\u5B58"},"save")]})})},$n=n=>{var y;const{initialFleetKey:e}=n,t=Te(),r=p.exports.useMemo(()=>Et(),[]),[a,i]=p.exports.useState(e&&(y=r.find(s=>s.key===e))!=null?y:r[0]),u=p.exports.useCallback((s,F,g)=>{i(x=>Ie({shipId:s,count:F,reinforcement:g,fleetSetup:x}))},[]),l=p.exports.useCallback((s,F,g,x)=>{i(A=>kt({shipId:s,carrierShipId:F,count:g,reinforcement:x,fleetSetup:A}))},[]),h=p.exports.useCallback((s,F,g)=>{i(x=>wt({shipId:s,reinforcement:F,moduleSelection:g,fleetSetup:x}))},[]),c=p.exports.useCallback(()=>{Tt(a),t("/fleetSetup")},[a]),m=p.exports.useCallback(()=>{const s=Number(a.key.substring(5));i($t(s))},[a]),C=p.exports.useMemo(()=>Mt(a),[a]),d=p.exports.useMemo(()=>oe(a),[a]);return{fleetSetup:a,errors:C,shipWarnings:d,setFleetSetup:i,setShipCount:u,setCarriedShipCount:l,setModule:h,save:c,reset:m}},Mn=n=>{const{fleetSetup:e,fleetShipCount:t}=n,r=t.totalCost>e.maxCost,a=e.totalReinforcementCount>e.maxReinforcement;return o(R,{sx:{height:"100px"},children:o(M,{square:!0,sx:{position:"fixed",right:0,bottom:0,zIndex:1,width:"100%",borderTop:"1px solid rgba(0, 0, 0, 0.2)"},children:o(gt,{maxWidth:"md",disableGutters:!0,children:o(R,{p:1,children:f(b,{spacing:1,flexWrap:"wrap",direction:"row",children:[o(R,{sx:{flexGrow:1,display:"flex",justifyContent:"center"},children:f("div",{children:[o(v,{variant:"body2",color:"text.secondary",children:"\u5897\u63F4"}),o(v,{variant:"body1",sx:{color:a?"red":void 0},children:o("strong",{children:`${e.totalReinforcementCount} / ${e.maxReinforcement}`})})]})}),o(R,{sx:{flexGrow:1,display:"flex",justifyContent:"center"},children:f("div",{children:[o(v,{variant:"body2",color:"text.secondary",children:"\u53F8\u4EE4pt"}),o(v,{variant:"body1",sx:{color:r?"red":void 0},children:o("strong",{children:`${t.totalCost} / ${e.maxCost}`})})]})})]})})})})})};function In(n,e,t,r){const a={};e.ships.forEach(u=>{a[`${u.shipDefinition.id}_${u.reinforcement}`]=!0});const i=_n($e,n,e.myListOnly,t);return{fleetSetup:{...e,ships:[...e.ships,...i.flatMap(u=>a[`${u.id}_${n}`]?[]:[_e({shipDefinition:u,usedModules:null,count:0,reinforcement:n,maxReinforcement:e.maxReinforcement,temporary:!0})])]},reinforcement:n,filter:r}}function _n(n,e,t,r){const a=n.filter(i=>i.type!==S.CORVETTE&&i.type!==S.FIGHTER);return(e==null?void 0:e.includes("ally"))||!t?a:a.filter(i=>Me(i.id,r))}function Ln(n){return{...n.fleetSetup,ships:n.fleetSetup.ships.flatMap(e=>e.temporary?e.count===0?[]:[{...e,temporary:!1}]:[e])}}function On(n,e){let t={...e,fleetSetup:{...e.fleetSetup,ships:e.fleetSetup.ships.filter(r=>r.temporary===!0)}};return Object.keys(n).filter(r=>n[r]).forEach(r=>{switch(r){case ee.FRONT:case ee.MIDDLE:case ee.BACK:{t={...t,fleetSetup:{...t.fleetSetup,ships:t.fleetSetup.ships.filter(a=>a.shipDefinition.row===r)}};break}case S.CARRIER:case S.AUXILIARY:case S.BATTLE_CRUISER:case S.CRUISER:case S.DESTROYER:case S.FRIGATE:{t={...t,fleetSetup:{...t.fleetSetup,ships:t.fleetSetup.ships.filter(a=>a.shipDefinition.type===r)}};break}}}),t}const Gn=n=>{const{userSettings:e,fleetSetup:t,setFleetSetup:r}=n,[a,i]=p.exports.useState(null),u=p.exports.useCallback((C,d)=>{i(In(C,t,e,d!=null?d:null))},[t,e]),l=p.exports.useCallback(()=>{i(null)},[]),h=p.exports.useCallback(()=>{a&&(r(Ln(a)),i(null))},[a,r]),c=p.exports.useCallback((C,d,y)=>{i(s=>s?{...s,fleetSetup:Ie({shipId:C,count:d,reinforcement:y,fleetSetup:s.fleetSetup,keepZero:!0})}:null)},[e]),m=p.exports.useMemo(()=>a?oe(a.fleetSetup):{},[a]);return{dialogData:a,shipWarnings:m,open:u,cancel:l,apply:h,setShipCount:c}};var ue={},Pn=Y.exports;Object.defineProperty(ue,"__esModule",{value:!0});var ze=ue.default=void 0,Hn=Pn(q),jn=X,zn=(0,Hn.default)((0,jn.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");ze=ue.default=zn;var se={},Un=Y.exports;Object.defineProperty(se,"__esModule",{value:!0});var Ue=se.default=void 0,Wn=Un(q),Nn=X,Vn=(0,Wn.default)((0,Nn.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddBox");Ue=se.default=Vn;const qn=n=>{const{shipDefinition:e,count:t,maxCount:r,reinforcement:a,showCost:i,showReinforcement:u,carrierShipId:l,shipWarning:h,onChangeShipCount:c,onChangeCarriedShipCount:m}=n,C=K(),d=Z(C.breakpoints.down("sm")),{openShipDetailDialog:y}=dt(),s=f(T,{children:[o(v,{variant:"body1",children:o(pt,{onClick:()=>{y(e.id)},children:e.name})}),i&&a===null&&o(v,{variant:"body2",color:"text.secondary",children:`\u6307\u4EE4\uFF30\uFF54\uFF1A${e.cost}\u3000\u5408\u8A08\uFF1A${e.cost*t}`}),u&&a==="self"&&o(v,{variant:"body2",color:"text.secondary",children:"\u5897\u63F4"}),u&&a==="ally"&&o(v,{variant:"body2",color:"text.secondary",children:"\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\uFF21"}),u&&a==="ally2"&&o(v,{variant:"body2",color:"text.secondary",children:"\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\uFF22"}),u&&a==="ally3"&&o(v,{variant:"body2",color:"text.secondary",children:"\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\uFF23"})]}),F=h&&o(v,{variant:"caption",color:"red",textAlign:"end",children:h}),g=o(E,{onClick:()=>{l?m==null||m(e.id,l,0,a):c==null||c(e.id,0,a)},disabled:t<=0,children:"\u5916\u3059"}),x=o(he,{onClick:()=>{l?m==null||m(e.id,l,t-1,a):c==null||c(e.id,t-1,a)},disabled:t<=0,children:o(ze,{color:t<=0?"disabled":"primary"})}),A=o(v,{variant:"body1",sx:{minWidth:"55px"},textAlign:"center",children:o("strong",{children:`${t} / ${r}`})}),k=o(he,{onClick:()=>{l?m==null||m(e.id,l,t+1,a):c==null||c(e.id,t+1,a)},disabled:t>=r,children:o(Ue,{color:t>=r?"disabled":"primary"})}),_=o(E,{onClick:()=>{l?m==null||m(e.id,l,r,a):c==null||c(e.id,r,a)},disabled:t>=r,children:"\u6700\u5927"});return f(T,{children:[d&&f(b,{spacing:1,children:[s,f(M,{variant:"outlined",sx:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[f(b,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[x,A,k]}),f(b,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[g,_]})]}),F]}),!d&&f(b,{spacing:1,children:[f(b,{spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[o(R,{pb:1,children:o(b,{spacing:1,children:s})}),o(R,{sx:{display:"flex",justifyContent:"end",flexGrow:1},children:o(M,{variant:"outlined",sx:{display:"inline-block"},children:f(b,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[g,x,A,k,_]})})})]}),F]})]})};function Yn(n){const e={corvette:{key:"corvette",name:"\u8B77\u9001\u8266",count:n.carriedShips.filter(t=>t.shipDefinition.type===S.CORVETTE).map(t=>t.count).reduce((t,r)=>t+r,0),maxCount:n.carrierCapabilities.carryCorvette*n.count},upToLargeFighter:{key:"upToLargeFighter",name:"\u5C0F\uFF5E\u5927\u578B\u6226\u95D8\u6A5F",count:n.carriedShips.filter(t=>t.shipDefinition.type===S.FIGHTER&&t.shipDefinition.subType===L.LARGE_FIGHTER).map(t=>t.count).reduce((t,r)=>t+r,0),maxCount:n.carrierCapabilities.carryUpToLargeFighter*n.count},upToMediumFighter:{key:"upToMediumFighter",name:"\u5C0F\uFF5E\u4E2D\u91CF\u7D1A\u6226\u95D8\u6A5F",count:n.carriedShips.filter(t=>t.shipDefinition.type===S.FIGHTER&&t.shipDefinition.subType===L.MEDIUM_FIGHTER).map(t=>t.count).reduce((t,r)=>t+r,0),maxCount:n.carrierCapabilities.carryUpToMediumFighter*n.count},upToSmallFighter:{key:"upToSmallFighter",name:"\u5C0F\u578B\u6226\u95D8\u6A5F",count:n.carriedShips.filter(t=>t.shipDefinition.type===S.FIGHTER&&t.shipDefinition.subType===L.SMALL_FIGHTER).map(t=>t.count).reduce((t,r)=>t+r,0),maxCount:n.carrierCapabilities.carryUpToSmallFighter*n.count},removedHangar:{key:"removedHangar",name:"\u672A\u5BFE\u5FDC",count:0,maxCount:0}};return Ae(e.upToMediumFighter,[e.upToLargeFighter]),Ae(e.upToSmallFighter,[e.upToMediumFighter,e.upToLargeFighter]),te(e.upToSmallFighter,e.upToMediumFighter),te(e.upToMediumFighter,e.upToLargeFighter),e.upToLargeFighter.maxCount===0&&te(e.upToLargeFighter,e.removedHangar),e}function Ae(n,e){let t=n.count-n.maxCount;t<=0||(n.count-=t,e.forEach(r=>{if(t<=0||r.maxCount===0)return;const a=r.maxCount-r.count;if(a<=0)return;const i=Math.min(a,t);t-=i,r.count+=i}),t>0&&(n.count+=t))}function te(n,e){const t=n.count-n.maxCount;t>0&&(n.count-=t,e.count+=t)}function Xn(n){return n.count>0||n.maxCount>0}const Kn=n=>{const{shipSelection:e,onOpenAddCarriedShips:t}=n,r=K(),a=Z(r.breakpoints.down("xs")),i=p.exports.useMemo(()=>Yn(e),[e]);return f(b,{spacing:1,direction:a?"column":"row",alignItems:a?"flex-start":"center",justifyContent:"end",flexWrap:"wrap",children:[f(b,{sx:{flexGrow:1},spacing:3,direction:"row",alignItems:"center",justifyContent:"space-between",children:[o(v,{variant:"body2",color:"text.secondary",children:"\u30CF\u30F3\u30AC\u30FC\uFF1A"}),o(b,{spacing:1,direction:"row",alignItems:"center",children:o(b,{spacing:1,direction:"row",alignItems:"center",children:Object.keys(i).filter(u=>Xn(i[u])).map(u=>i[u]).map(u=>f(p.exports.Fragment,{children:[o(v,{variant:"body2",color:"text.secondary",children:u.name}),o(v,{variant:"body2",color:"text.secondary",sx:{color:u.count>u.maxCount?"red":void 0},children:o("strong",{children:`${u.count} / ${u.maxCount}`})})]},u.key))})})]}),o(E,{variant:"outlined",size:"small",startIcon:o(ie,{}),sx:{whiteSpace:"nowrap"},onClick:()=>{t==null||t(e.shipDefinition.id,e.reinforcement)},children:"\u8266\u8F09\u6A5F\u3092\u8FFD\u52A0"})]})};var le={},Zn=Y.exports;Object.defineProperty(le,"__esModule",{value:!0});var We=le.default=void 0,Qn=Zn(q),Jn=X,eo=(0,Qn.default)((0,Jn.jsx)("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"Tune");We=le.default=eo;const to=n=>{const{shipId:e,reinforcement:t,moduleSelection:r,myListOnly:a,onChange:i,onClose:u}=n,{userSettings:l}=ht(),[h,c]=p.exports.useState(r),m=()=>{i(e,t,h),u()},C=s=>{const[F,g]=s.target.value.split("#");c(x=>It(F,g,x))},d=s=>{const F=Object.keys(h.groups[s]).find(g=>h.groups[s][g].usage==="used");return F?`${s}#${F}`:null},y=s=>!Object.keys(h.groups[s]).find(F=>h.groups[s][F].module.defaultModule);return o(re,{title:"\u30B7\u30B9\u30C6\u30E0\u3092\u63DB\u88C5",content:f(b,{spacing:3,children:[Object.keys(h.groups).map(s=>{const F=d(s),g=`${s}#none`;return o(M,{variant:"outlined",children:o(R,{pl:1,pr:1,children:o(Gt,{children:f(Cn,{defaultValue:"female",name:`group-${s}`,value:F!=null?F:g,onChange:C,children:[y(s)&&o(Fe,{label:"\u7121\u3057",value:g,control:o(ve,{})},g),Object.keys(h.groups[s]).map(x=>{const A=h.groups[s][x],k=t!=="ally"&&t!=="ally2"&&t!=="ally3"&&a&&!A.module.defaultModule&&!ft(x,e,l),_=`${s}#${x}`;return o(Fe,{label:`${A.module.category}${A.module.categoryNumber} ${A.module.name}`,value:_,control:o(ve,{disabled:k}),disabled:k},x)})]})})})},s)}),a&&o(v,{variant:"caption",paragraph:!0,children:"\u203B\u6240\u6301\u3057\u3066\u3044\u308B\u8FFD\u52A0\u30B7\u30B9\u30C6\u30E0\u306F\u300C\u30DE\u30A4\u30EA\u30B9\u30C8\u300D\u3067\u8A2D\u5B9A\u3067\u304D\u307E\u3059\u3002\u300C\u8FFD\u52A0\u3067\u304D\u308B\u8266\u8239\u300D\u3092\u300C\u5168\u3066\u306E\u8266\u8239\u300D\u306B\u8A2D\u5B9A\u3057\u3066\u3044\u308B\u5834\u5408\u3068\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\u3067\u306F\u5168\u3066\u306E\u8FFD\u52A0\u30B7\u30B9\u30C6\u30E0\u304C\u9078\u3079\u307E\u3059\u3002"})]}),actions:f(T,{children:[o(E,{variant:"outlined",onClick:u,children:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),o(E,{variant:"contained",onClick:m,children:"\uFF2F\uFF2B"})]}),onClose:u})},no=n=>{const{shipId:e,reinforcement:t,moduleSelection:r,myListOnly:a,onChange:i}=n,u=K(),l=Z(u.breakpoints.down("xs")),[h,c]=p.exports.useState(!1),m=()=>{c(!0)},C=()=>{c(!1)},d=[];return Object.keys(r.groups).map(y=>{Object.keys(r.groups[y]).map(s=>r.groups[y][s]).forEach(s=>{s.usage==="used"&&(d.length>0&&d.push(o(p.exports.Fragment,{children:o(v,{variant:"body2",component:"span",children:"\u3001"})},`before_${s.module.id}`)),d.push(o(p.exports.Fragment,{children:o(Ht,{arrow:!0,disableFocusListener:!0,title:s.module.name,children:o(v,{variant:"body2",component:"span",children:`${s.module.category}${s.module.categoryNumber}`})})},s.module.id)))})}),f(T,{children:[f(b,{spacing:1,direction:l?"column":"row",alignItems:l?"flex-start":"center",justifyContent:"end",flexWrap:"wrap",children:[o(R,{sx:{flexGrow:1},children:f(v,{variant:"body2",color:"text.secondary",children:["\u30B7\u30B9\u30C6\u30E0\uFF1A",d]})}),!r.static&&o(R,{sx:{display:"flex",alignContent:"end"},children:o(E,{variant:"outlined",size:"small",startIcon:o(We,{}),sx:{whiteSpace:"nowrap"},onClick:m,children:"\u30B7\u30B9\u30C6\u30E0\u3092\u63DB\u88C5"})})]}),h&&o(to,{shipId:e,reinforcement:t,moduleSelection:r,myListOnly:a,onChange:i,onClose:C})]})},Re=p.exports.memo(qn),ce=n=>{const{shipSelections:e,showCost:t,showReinforcement:r,showHangar:a,shipWarnings:i,carrierShipId:u,myListOnly:l,onChangeShipCount:h,onChangeCarriedShipCount:c,onOpenAddCarriedShips:m,onChangeModule:C}=n;return o(b,{spacing:1,children:e==null?void 0:e.map(d=>{var y,s;return o(M,{variant:"outlined",children:o(R,{p:1,children:f(b,{spacing:1,children:[o(Re,{shipDefinition:d.shipDefinition,count:d.count,maxCount:d.maxCount,reinforcement:d.reinforcement,showCost:t,showReinforcement:r,carrierShipId:u,onChangeShipCount:h,onChangeCarriedShipCount:c,shipWarning:i[fe(d.shipDefinition.id,d.reinforcement)]}),d.moduleSelection&&C&&o(no,{shipId:d.shipDefinition.id,reinforcement:d.reinforcement,moduleSelection:d.moduleSelection,myListOnly:l,onChange:C}),a&&d.carrierCapabilities.canCarry&&f(b,{spacing:1,children:[o(Kn,{shipSelection:d,onOpenAddCarriedShips:m}),(y=d.carriedShips)==null?void 0:y.map(F=>{var g;return o(Re,{shipDefinition:F.shipDefinition,count:F.count,maxCount:F.shipDefinition.operationLimit,reinforcement:F.reinforcement,carrierShipId:d.shipDefinition.id,showCost:!1,showReinforcement:!1,onChangeCarriedShipCount:c,shipWarning:i[fe(F.shipDefinition.id,d.reinforcement)]},`${d.shipDefinition.id}_${F.shipDefinition.id}_${(g=F.reinforcement)!=null?g:"initial"}`)})]})]})})},`${d.shipDefinition.id}_${(s=d.reinforcement)!=null?s:"initial"}`)})})},oo=n=>{const{dialogData:e,shipWarnings:t,myListOnly:r,onCancel:a,onApply:i,onChangeShipCount:u}=n,[l,h]=p.exports.useState(!1),[c,m]=p.exports.useState(()=>{const d=Oe();return e.filter&&typeof d[e.filter]=="boolean"?{...d,[e.filter]:!0}:d}),C=p.exports.useMemo(()=>On(c,e),[c,e]);return p.exports.useEffect(()=>{const d=setTimeout(()=>{h(!0)},0);return()=>{clearTimeout(d)}},[]),o(re,{title:f(b,{spacing:1,direction:"row",justifyContent:"space-between",alignItems:"center",children:[o(v,{variant:"h6",children:ro(e.reinforcement)}),e.reinforcement===null?f("div",{children:[o(v,{variant:"body1",component:"span",children:"\u6307\u4EE4Pt\uFF1A"}),o(v,{variant:"body1",component:"span",sx:{color:e.fleetSetup.totalCost>e.fleetSetup.maxCost?"red":void 0},children:o("strong",{children:`${e.fleetSetup.totalCost} / ${e.fleetSetup.maxCost}`})})]}):f("div",{children:[o(v,{variant:"body1",component:"span",children:"\u5897\u63F4\uFF1A"}),o(v,{variant:"body1",component:"span",sx:{color:e.fleetSetup.totalReinforcementCount>e.fleetSetup.maxReinforcement?"red":void 0},children:o("strong",{children:`${e.fleetSetup.totalReinforcementCount} / ${e.fleetSetup.maxReinforcement}`})})]})]}),content:f(b,{spacing:2,children:[o(v,{variant:"body2",children:ao(e.reinforcement)}),o("div",{children:o(Ge,{filter:c,shipTypes:[S.CARRIER,S.AUXILIARY,S.BATTLE_CRUISER,S.CRUISER,S.DESTROYER,S.FRIGATE],onChange:m,popperProps:{disablePortal:!1,placement:"bottom-start",style:{zIndex:1300}}})}),C.fleetSetup.ships.length===0&&o(Le,{severity:"info",children:"\u8A72\u5F53\u3059\u308B\u8266\u8239\u304C\u3042\u308A\u307E\u305B\u3093\u3002"}),l?o(ce,{shipSelections:C.fleetSetup.ships,showCost:!C.reinforcement,showReinforcement:!1,showHangar:!1,shipWarnings:t,carrierShipId:null,myListOnly:r,onChangeShipCount:u}):f(b,{spacing:1,children:[o(w,{variant:"rectangular",height:90}),o(w,{variant:"rectangular",animation:"wave",height:90}),o(w,{variant:"rectangular",height:90}),o(w,{variant:"rectangular",animation:"wave",height:90}),o(w,{variant:"rectangular",height:90})]})]}),actions:f(T,{children:[o(E,{variant:"outlined",onClick:a,children:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),o(E,{variant:"contained",onClick:i,children:"\uFF2F\uFF2B"})]}),onClose:a})};function ro(n){switch(n){case"ally":case"ally2":case"ally3":case"self":return"\u5897\u63F4\u3092\u8FFD\u52A0";default:return"\u8266\u8239\u3092\u8FFD\u52A0"}}function ao(n){switch(n){case"ally":return"\u30E6\u30CB\u30AA\u30F3\u30E1\u30F3\u30D0\u30FC\uFF21\u304B\u3089\u9001\u3089\u308C\u308B\u5897\u63F4\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002";case"ally2":return"\u30E6\u30CB\u30AA\u30F3\u30E1\u30F3\u30D0\u30FC\uFF22\u304B\u3089\u9001\u3089\u308C\u308B\u5897\u63F4\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002";case"ally3":return"\u30E6\u30CB\u30AA\u30F3\u30E1\u30F3\u30D0\u30FC\uFF23\u304B\u3089\u9001\u3089\u308C\u308B\u5897\u63F4\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002";case"self":return"\u81EA\u8EAB\u306E\u57FA\u5730\u304B\u3089\u9001\u308B\u5897\u63F4\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8239\u306F\u30DE\u30A4\u30EA\u30B9\u30C8\u3067\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002";default:return"\u8266\u8239\u3092\u901A\u5E38\u914D\u5099\u3057\u307E\u3059\u3002\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8239\u306F\u30DE\u30A4\u30EA\u30B9\u30C8\u3067\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002"}}function io(n,e,t,r){const a=t.ships.find(l=>l.shipDefinition.id===n&&l.reinforcement===e);if(!a)throw new Error("Invalid carrier");const i={};a.carriedShips.forEach(l=>{i[`${l.shipDefinition.id}_${l.reinforcement}`]=!0});const u=uo(a,$e,e,t.myListOnly,r);return{carrierShipId:n,reinforcement:e,shipSelections:u.flatMap(l=>i[`${l.id}_${e}`]?[]:[_e({shipDefinition:l,usedModules:null,count:0,reinforcement:e,maxReinforcement:t.maxReinforcement,temporary:!0})]),filter:null}}function uo(n,e,t,r,a){const i=e.filter(u=>{switch(u.type){case S.CORVETTE:return n.carrierCapabilities.carryCorvette>0;case S.FIGHTER:switch(u.subType){case L.LARGE_FIGHTER:return n.carrierCapabilities.carryUpToLargeFighter>0;case L.MEDIUM_FIGHTER:return n.carrierCapabilities.carryUpToMediumFighter>0||n.carrierCapabilities.carryUpToLargeFighter>0;case L.SMALL_FIGHTER:return n.carrierCapabilities.carryUpToSmallFighter>0||n.carrierCapabilities.carryUpToMediumFighter>0||n.carrierCapabilities.carryUpToLargeFighter>0}}return!1});return(t==null?void 0:t.includes("ally"))||!r?i:i.filter(u=>Me(u.id,a))}function Be(n,e){return{...e,ships:e.ships.map(t=>t.shipDefinition.id!==n.carrierShipId||t.reinforcement!==n.reinforcement?t:{...t,carriedShips:[...t.carriedShips,...n.shipSelections.filter(r=>r.count>0).map(r=>_t({shipId:r.shipDefinition.id,count:r.count,reinforcement:n.reinforcement}))]})}}function so(n,e){let t=e;return Object.keys(n).filter(r=>n[r]).forEach(r=>{switch(r){case S.CORVETTE:case S.FIGHTER:{t={...t,shipSelections:t.shipSelections.filter(a=>a.shipDefinition.type===r)};break}}}),t}const lo=n=>{const{userSettings:e,fleetSetup:t,setFleetSetup:r}=n,[a,i]=p.exports.useState(null),u=p.exports.useCallback((C,d)=>{i(io(C,d,t,e))},[t,e]),l=p.exports.useCallback(()=>{i(null)},[]),h=p.exports.useCallback(()=>{a&&(r(Be(a,t)),i(null))},[a,t,r]),c=p.exports.useCallback((C,d,y)=>{i(s=>s?{...s,shipSelections:s.shipSelections.map(F=>F.shipDefinition.id!==C||F.reinforcement!==y?F:{...F,count:d})}:null)},[e]),m=p.exports.useMemo(()=>{if(!a)return{};const C=Be(a,t);return oe(C)},[a,t]);return{dialogData:a,shipWarnings:m,open:u,cancel:l,apply:h,setShipCount:c}},co=n=>{const{dialogData:e,shipWarnings:t,myListOnly:r,onCancel:a,onApply:i,onChangeShipCount:u}=n,[l,h]=p.exports.useState(!1),[c,m]=p.exports.useState(()=>{const s=Oe();return e.filter&&typeof s[e.filter]=="boolean"?{...s,[e.filter]:!0}:s}),C=p.exports.useMemo(()=>so(c,e),[c,e]);p.exports.useEffect(()=>{const s=setTimeout(()=>{h(!0)},0);return()=>{clearTimeout(s)}},[]);const d=!!e.shipSelections.find(s=>s.shipDefinition.type===S.CORVETTE),y=!!e.shipSelections.find(s=>s.shipDefinition.type===S.FIGHTER);return o(re,{title:"\u8266\u8F09\u6A5F\u3092\u8FFD\u52A0",content:f(b,{spacing:2,children:[o(v,{variant:"body2",children:"\u8266\u8F09\u6A5F\u3092\u914D\u5099\u3057\u307E\u3059\u3002\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8F09\u6A5F\u306F\u30DE\u30A4\u30EA\u30B9\u30C8\u3067\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002"}),d&&y&&o("div",{children:o(Ge,{filter:c,shipTypes:[S.CORVETTE,S.FIGHTER],shipRows:[],onChange:m,popperProps:{disablePortal:!1,placement:"bottom-start",style:{zIndex:1300}}})}),C.shipSelections.length===0&&o(Le,{severity:"info",children:"\u8A72\u5F53\u3059\u308B\u8266\u8F09\u6A5F\u304C\u3042\u308A\u307E\u305B\u3093\u3002"}),l?o(ce,{shipSelections:C.shipSelections,showCost:!1,showReinforcement:!1,showHangar:!1,shipWarnings:t,carrierShipId:null,myListOnly:r,onChangeShipCount:u}):f(b,{spacing:1,children:[o(w,{variant:"rectangular",height:90}),o(w,{variant:"rectangular",animation:"wave",height:90}),o(w,{variant:"rectangular",height:90}),o(w,{variant:"rectangular",animation:"wave",height:90}),o(w,{variant:"rectangular",height:90})]})]}),actions:f(T,{children:[o(E,{variant:"outlined",onClick:a,children:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),o(E,{variant:"contained",onClick:i,children:"\uFF2F\uFF2B"})]}),onClose:a})},Ao=()=>{const n=Te(),{fleetKey:e}=mt(),t=K(),r=Z(t.breakpoints.up("lg")),a=p.exports.useMemo(()=>Ft(),[]),[i,u]=p.exports.useState(!1),{fleetSetup:l,errors:h,shipWarnings:c,setFleetSetup:m,setShipCount:C,setCarriedShipCount:d,setModule:y,save:s,reset:F}=$n({initialFleetKey:e}),{dialogData:g,shipWarnings:x,open:A,cancel:k,apply:_,setShipCount:Ne}=Gn({userSettings:a,fleetSetup:l,setFleetSetup:m}),{dialogData:de,shipWarnings:Ve,open:qe,cancel:Ye,apply:Xe,setShipCount:Ke}=lo({userSettings:a,fleetSetup:l,setFleetSetup:m}),Ze=p.exports.useMemo(()=>Lt(l.ships),[l.ships]),[Q,Qe]=p.exports.useState(me.GROUP_BY_ROW_SORT_BY_TYPE_AND_NAME),J=p.exports.useMemo(()=>Ot(Q,l),[l,Q]),Je=()=>{n(`/fleetSetup/${l.key}`)},et=()=>{Object.keys(h).length>0||(s(),n(`/fleetSetup/${l.key}`))},tt=()=>{u(!1)},nt=()=>{u(!0)},ot=()=>{u(!1),F()},G=r&&J.groupedBy===me.GROUP_BY_ROW_SORT_BY_TYPE_AND_NAME?"row":"column",rt=G==="row"?4:2;return f(T,{children:[o(Ct,{currentRoute:"/fleetSetup"}),o(Tn,{grouping:Q,onChangeGrouping:Qe,onSave:et,onCancel:Je,onReset:nt,onOpenAddShips:A,saveDisabled:Object.keys(h).length>0}),o(yt,{disableContainer:G==="row",children:o(R,{p:1,sx:{marginBottom:"60px"},children:f(b,{spacing:1,children:[o(Rn,{fleetSetup:l,onChange:m,errors:h,columnCount:rt}),o(b,{spacing:1,direction:G,children:J.groups.map($=>o(M,{sx:{width:G==="row"?`${100/J.groups.length}%`:void 0},children:o(R,{p:1,children:f(b,{spacing:1,children:[f(b,{spacing:1,direction:"row",alignItems:"center",sx:{width:"100%"},children:[o(R,{sx:{flexGrow:1},children:o(v,{variant:"body1",children:`${$.name}${$.count>0?`\uFF08${$.count}\u96BB\uFF09`:""}`})}),o(je,{filter:$.id,onOpenAddShips:A,buttonProps:{size:"small"}})]}),$.ships.length>0&&o(ce,{shipSelections:$.ships,onChangeShipCount:C,onChangeCarriedShipCount:d,onOpenAddCarriedShips:qe,onChangeModule:y,showCost:!0,showReinforcement:!0,showHangar:!0,shipWarnings:c,carrierShipId:null,myListOnly:l.myListOnly})]})})},$.id))})]})})}),o(Mn,{fleetSetup:l,fleetShipCount:Ze}),g&&o(oo,{dialogData:g,shipWarnings:x,myListOnly:l.myListOnly,onCancel:k,onApply:_,onChangeShipCount:Ne}),de&&o(co,{dialogData:de,shipWarnings:Ve,myListOnly:l.myListOnly,onCancel:Ye,onApply:Xe,onChangeShipCount:Ke}),i&&o(Dt,{title:"\u521D\u671F\u5316",question:"\u8266\u968A\u3092\u521D\u671F\u72B6\u614B\u306B\u623B\u3057\u307E\u3059\u304B\uFF1F",cancelText:"\u30AD\u30E3\u30F3\u30BB\u30EB",confirmText:"\u521D\u671F\u5316",onCancel:tt,onConfirm:ot})]})};export{Ao as FleetSetupEditPage,Ao as default};
