import{k as e,j as h,F as O,B as L,t,r as n,w as C,T as S,U as E,W as b,b8 as M,d as k,aK as I,q as D,f as _,b9 as R,u as P,ba as W,bb as B,a3 as g,aa as $,g as w,ab as q,aM as U,aN as z,aP as Y,m as H,z as j}from"./index.1e0b03c7.js";import{d as G,C as K}from"./ConfirmationDialog.fd647aaa.js";import{d as V,a as J}from"./DeleteForever.c2a10817.js";import{S as Q,a as X,s as Z,c as ee}from"./ShipTypeFilterButton.47a6c046.js";import{A as se}from"./ActionBar.defd5117.js";import{d as ie}from"./Settings.bad674b1.js";import{T as A,a as x}from"./ToggleButtonGroup.dde81884.js";import{d as te}from"./Clear.40e3434e.js";import{N as ne,P as oe}from"./PageContent.a70040cb.js";import{P as ae}from"./PageFooter.d20afbb2.js";import"./ResponsiveDialog.4304df89.js";import"./DialogContentText.061bdd85.js";import"./domUtils.60bf2a4d.js";import"./useFormControl.696508e1.js";const re=a=>{const{shipFilter:s,onCancel:i,onSave:o,onReset:l,onFilter:d}=a;return e(se,{left:r=>e(Q,{filter:s,onChange:d,researchManufacturer:!1,researchStrategyTypes:!1,researchTacticTypes:!1,buttonProps:r},"filter"),right:r=>h(O,{children:[e(L,{variant:"outlined",startIcon:e(V,{}),onClick:l,...r,children:t("button.initialize")},"reset"),e(L,{variant:"outlined",startIcon:e(J,{}),onClick:i,...r,children:t("button.cancel")},"cancel"),e(L,{variant:"contained",startIcon:e(G,{}),onClick:o,...r,children:t("button.save")},"save")]})})},N=a=>{const{label:s,options:i,possession:o,onChange:l}=a,[d,r]=n.exports.useState(o),[u,p]=n.exports.useTransition(),c=(m,y)=>{r(y===null?E.UNDEFINED:Number(y))};return n.exports.useEffect(()=>{p(()=>{l(d)})},[d,l]),h(C,{spacing:1,direction:"row",alignItems:"center",children:[e(S,{variant:"body2",children:s}),h(A,{size:"small",color:"primary",value:`${d}`,exclusive:!0,onChange:c,children:[e(x,{value:`${E.POSSESSED}`,children:i[0]}),e(x,{value:`${E.NOT_POSSESSED}`,children:i[1]})]})]})},F=a=>{const{wish:s,onChange:i}=a,[o,l]=n.exports.useState(s),[d,r]=n.exports.useTransition(),u=(p,c)=>{l(c===null||c==="clear"?b.UNDEFINED:Number(c))};return n.exports.useEffect(()=>{r(()=>{i(o)})},[o,i]),h(C,{spacing:1,direction:"row",alignItems:"center",children:[e(S,{variant:"body2",children:t("myList.wantOption")}),h(A,{size:"small",color:"primary",value:`${o}`,exclusive:!0,onChange:u,children:[e(x,{value:`${b.WANTED}`,children:t("myList.wantOptionYes")}),e(x,{value:`${b.NOT_WANTED}`,children:t("myList.wantOptionNo")}),o!==b.UNDEFINED&&e(x,{value:"clear",children:e(te,{})})]})]})},le=a=>{const{ship:s,module:i,userSettings:o,setModulePossession:l,setModuleWish:d}=a,r=n.exports.useCallback(m=>{l(i.id,s.id,m)},[i,s,l]),u=n.exports.useCallback(m=>{d(i.id,s.id,m)},[i,s,d]),p=n.exports.useMemo(()=>M(i.id,s.id,o),[i,s,o]),c=k()===I.JAPANESE;return e(D,{pl:2,children:h(C,{spacing:3,children:[h("div",{children:[e(S,{variant:"h6",children:`${i.category}${i.categoryNumber} ${_(s.id,i)}`}),c&&i.description&&e(S,{variant:"caption",color:"text.secondary",children:i.description})]}),e(N,{label:t("myList.additionalModuleAcquiredOption"),options:[t("myList.blueprintAcquiredOptionYes"),t("myList.blueprintAcquiredOptionNo")],possession:p,onChange:r}),p===E.NOT_POSSESSED&&e(F,{wish:R(i.id,s.id,o),onChange:u})]})},i.id)},ce=a=>{const{ship:s,...i}=a,{userSettings:o,setShipPossession:l,setShipWish:d,setModulePossession:r,setModuleWish:u}=P(),p=n.exports.useMemo(()=>W(s.id,o),[s,o]),c=n.exports.useMemo(()=>B(s.id,o),[s,o]),m=n.exports.useMemo(()=>c!==b.UNDEFINED?!0:s.source===g.TECH_FILE&&p===E.NOT_POSSESSED,[s,p,c]),y=n.exports.useCallback(f=>{l(s.id,f)},[l,s]),T=n.exports.useCallback(f=>{d(s.id,f)},[d,s]);return e($,{elevation:2,...i,children:e(D,{p:1,children:h(C,{spacing:3,children:[e(S,{variant:"h6",children:w(s)}),e(N,{label:de(s),options:pe(s),possession:p,onChange:y}),m&&e(F,{wish:c,onChange:T}),(s.source===g.TECH_FILE||s.source===g.STARTER_SHIP)&&p===E.POSSESSED&&s.modules&&s.modules.filter(f=>!f.defaultModule).map(f=>h(n.exports.Fragment,{children:[e(q,{}),e(le,{ship:s,module:f,userSettings:o,setModulePossession:r,setModuleWish:u})]},f.id))]})})})};function de(a){switch(a.source){case g.CITY_TRADE:return t("myList.shipBoughtOption");case g.DOCK_EFFECT:return t("myList.dockingEffectBlueprintAcquiredOption");case g.SALVAGE:return t("myList.salvageAcquiredOption");default:return t("myList.blueprintAcquiredOption")}}function pe(a){switch(a.source){case g.CITY_TRADE:return[t("myList.shipBoughtOptionYes"),t("myList.shipBoughtOptionNo")];default:return[t("myList.blueprintAcquiredOptionYes"),t("myList.blueprintAcquiredOptionNo")]}}const v=a=>{const{id:s,title:i,shipDefinitions:o,initiallyOpened:l,preRenderDetails:d=!1}=a,[r,u]=n.exports.useState(l),p=n.exports.useCallback((c,m)=>{u(m)},[]);return h(U,{expanded:r,onChange:p,children:[e(z,{id:s,expandIcon:e(ie,{}),children:e(S,{variant:"body1",children:i})}),e(Y,{children:(r||d)&&e(C,{spacing:3,children:o.map(c=>e(ce,{ship:c},c.id))})})]})},he=a=>{const{shipFilter:s}=a,i=n.exports.useMemo(()=>{const o=X(H,s);return Z(o)},[s]);return h(C,{spacing:1,children:[e("div",{children:e(v,{id:"tech-file-ships",title:t("shipSource.techFile"),initiallyOpened:!1,preRenderDetails:!0,shipDefinitions:i[g.TECH_FILE]})}),e("div",{children:e(v,{id:"city-trade-ships",title:t("shipSource.cityTrade"),initiallyOpened:!1,shipDefinitions:i[g.CITY_TRADE]})}),e("div",{children:e(v,{id:"dock-effect-ships",title:t("shipSource.dockEffect"),initiallyOpened:!1,shipDefinitions:i[g.DOCK_EFFECT]})}),e("div",{children:e(v,{id:"salvage-ships",title:t("shipSource.salvage"),initiallyOpened:!1,shipDefinitions:i[g.SALVAGE]})}),e("div",{children:e(v,{id:"starter-ships",title:t("shipSource.starterShip"),initiallyOpened:!1,shipDefinitions:i[g.STARTER_SHIP]})})]})},Oe=()=>{const a=j(),{saveUserSettings:s,restoreUserSettings:i,resetUserSettings:o}=P(),[l,d]=n.exports.useState(ee),[r,u]=n.exports.useState(!1);n.exports.useEffect(()=>()=>{i()},[i]);const p=n.exports.useCallback(()=>{i(),a("/myList")},[i,a]),c=n.exports.useCallback(()=>{s(),a("/myList")},[s,a]),m=n.exports.useCallback(()=>{u(!1)},[]),y=n.exports.useCallback(()=>{u(!0)},[]),T=n.exports.useCallback(()=>{u(!1),o()},[o]);return h(O,{children:[e(ne,{currentRoute:"/myList"}),e(re,{shipFilter:l,onCancel:p,onReset:y,onSave:c,onFilter:d}),e(oe,{children:h(D,{p:1,children:[h(C,{pt:1,pb:2,spacing:2,children:[e(S,{variant:"body2",children:t("myListConfig.pageDescription1")}),e(S,{variant:"body2",children:t("myListConfig.pageDescription2")}),e(S,{variant:"body2",children:t("myListConfig.pageDescription3")})]}),e(he,{shipFilter:l})]})}),r&&e(K,{title:t("button.initialize"),question:t("myList.confirmInitialize"),cancelText:t("button.cancel"),confirmText:t("button.initialize"),onCancel:m,onConfirm:T}),e(ae,{})]})};export{Oe as MyListEditPage,Oe as default};
