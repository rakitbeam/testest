import{A as he,C as pe,D as me,K as fe,_ as I,r as y,O as ge,G as Se,I as be,k as r,J as ye,ah as ve,bv as Oe,bw as K,bx as X,m as _e,by as Ee,g as x,v as De,bh as Ce,bf as Te,a0 as P,a2 as M,a1 as U,X as Be,bg as Ge,bz as Le,c as ze,az as Ue,t as u,j as S,q as F,T as f,aD as D,a6 as ee,a7 as te,a8 as re,aK as je,u as Ve,bA as He,bB as qe,F as B,bC as Y,f as Ke,b as Je,P as xe,Q as Fe,R as we,ab as W,B as $e,bs as Ze,aw as k,br as Qe,w as O,aa as Ye}from"./index.8269f47d.js";import{a as T,N as Xe,P as et}from"./PageContent.bd3a0cc2.js";import{u as tt,T as rt}from"./useTable.ce26b59f.js";import{E as at}from"./ExpandStack.93664f96.js";import{T as G}from"./Tooltip.4d1e0584.js";import{T as nt,a as ce}from"./ToggleButtonGroup.687c2485.js";import{F as L,I as q,S as z}from"./Select.6d29513b.js";import{R as it}from"./ResponsiveDialog.2e819311.js";import{P as st}from"./PageFooter.dbadd04c.js";import"./IconButton.4de74753.js";import"./sorting.c6946657.js";import"./TableRow.6fd15092.js";import"./useFormControl.1904b61a.js";function lt(e){return he("MuiListSubheader",e)}pe("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const ot=["className","color","component","disableGutters","disableSticky","inset"],ct=e=>{const{classes:t,color:n,disableGutters:l,inset:s,disableSticky:o}=e,c={root:["root",n!=="default"&&`color${fe(n)}`,!l&&"gutters",s&&"inset",!o&&"sticky"]};return be(c,lt,t)},dt=me("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${fe(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>I({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),ut=y.exports.forwardRef(function(t,n){const l=ge({props:t,name:"MuiListSubheader"}),{className:s,color:o="default",component:c="li",disableGutters:h=!1,disableSticky:p=!1,inset:m=!1}=l,g=Se(l,ot),a=I({},l,{color:o,component:c,disableGutters:h,disableSticky:p,inset:m}),i=ct(a);return r(dt,I({as:c,className:ye(i.root,s),ref:n,ownerState:a},g))});var J=ut;const ht=y.exports.createContext();var de=ht;function pt(e){return he("MuiGrid",e)}const mt=[0,1,2,3,4,5,6,7,8,9,10],ft=["column-reverse","column","row-reverse","row"],gt=["nowrap","wrap-reverse","wrap"],_=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],j=pe("MuiGrid",["root","container","item","zeroMinWidth",...mt.map(e=>`spacing-xs-${e}`),...ft.map(e=>`direction-xs-${e}`),...gt.map(e=>`wrap-xs-${e}`),..._.map(e=>`grid-xs-${e}`),..._.map(e=>`grid-sm-${e}`),..._.map(e=>`grid-md-${e}`),..._.map(e=>`grid-lg-${e}`),..._.map(e=>`grid-xl-${e}`)]),St=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function N(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function bt({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((l,s)=>{let o={};if(t[s]&&(n=t[s]),!n)return l;if(n===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const c=K({values:t.columns,breakpoints:e.breakpoints.values}),h=typeof c=="object"?c[s]:c;if(h==null)return l;const p=`${Math.round(n/h*1e8)/1e6}%`;let m={};if(t.container&&t.item&&t.columnSpacing!==0){const g=e.spacing(t.columnSpacing);if(g!=="0px"){const a=`calc(${p} + ${N(g)})`;m={flexBasis:a,maxWidth:a}}}o=I({flexBasis:p,flexGrow:0,maxWidth:p},m)}return e.breakpoints.values[s]===0?Object.assign(l,o):l[e.breakpoints.up(s)]=o,l},{})}function yt({theme:e,ownerState:t}){const n=K({values:t.direction,breakpoints:e.breakpoints.values});return X({theme:e},n,l=>{const s={flexDirection:l};return l.indexOf("column")===0&&(s[`& > .${j.item}`]={maxWidth:"none"}),s})}function Pe({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(s=>{n===""&&t[s]!==0&&(n=s)});const l=Object.keys(e).sort((s,o)=>e[s]-e[o]);return l.slice(0,l.indexOf(n))}function vt({theme:e,ownerState:t}){const{container:n,rowSpacing:l}=t;let s={};if(n&&l!==0){const o=K({values:l,breakpoints:e.breakpoints.values});let c;typeof o=="object"&&(c=Pe({breakpoints:e.breakpoints.values,values:o})),s=X({theme:e},o,(h,p)=>{var m;const g=e.spacing(h);return g!=="0px"?{marginTop:`-${N(g)}`,[`& > .${j.item}`]:{paddingTop:N(g)}}:(m=c)!=null&&m.includes(p)?{}:{marginTop:0,[`& > .${j.item}`]:{paddingTop:0}}})}return s}function Ct({theme:e,ownerState:t}){const{container:n,columnSpacing:l}=t;let s={};if(n&&l!==0){const o=K({values:l,breakpoints:e.breakpoints.values});let c;typeof o=="object"&&(c=Pe({breakpoints:e.breakpoints.values,values:o})),s=X({theme:e},o,(h,p)=>{var m;const g=e.spacing(h);return g!=="0px"?{width:`calc(100% + ${N(g)})`,marginLeft:`-${N(g)}`,[`& > .${j.item}`]:{paddingLeft:N(g)}}:(m=c)!=null&&m.includes(p)?{}:{width:"100%",marginLeft:0,[`& > .${j.item}`]:{paddingLeft:0}}})}return s}function Tt(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const l=[];return t.forEach(s=>{const o=e[s];Number(o)>0&&l.push(n[`spacing-${s}-${String(o)}`])}),l}const xt=me("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:l,direction:s,item:o,spacing:c,wrap:h,zeroMinWidth:p,breakpoints:m}=n;let g=[];l&&(g=Tt(c,m,t));const a=[];return m.forEach(i=>{const b=n[i];b&&a.push(t[`grid-${i}-${String(b)}`])}),[t.root,l&&t.container,o&&t.item,p&&t.zeroMinWidth,...g,s!=="row"&&t[`direction-xs-${String(s)}`],h!=="wrap"&&t[`wrap-xs-${String(h)}`],...a]}})(({ownerState:e})=>I({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),yt,vt,Ct,bt);function Ft(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(l=>{const s=e[l];if(Number(s)>0){const o=`spacing-${l}-${String(s)}`;n.push(o)}}),n}const wt=e=>{const{classes:t,container:n,direction:l,item:s,spacing:o,wrap:c,zeroMinWidth:h,breakpoints:p}=e;let m=[];n&&(m=Ft(o,p));const g=[];p.forEach(i=>{const b=e[i];b&&g.push(`grid-${i}-${String(b)}`)});const a={root:["root",n&&"container",s&&"item",h&&"zeroMinWidth",...m,l!=="row"&&`direction-xs-${String(l)}`,c!=="wrap"&&`wrap-xs-${String(c)}`,...g]};return be(a,pt,t)},$t=y.exports.forwardRef(function(t,n){const l=ge({props:t,name:"MuiGrid"}),{breakpoints:s}=ve(),o=Oe(l),{className:c,columns:h,columnSpacing:p,component:m="div",container:g=!1,direction:a="row",item:i=!1,rowSpacing:b,spacing:v=0,wrap:C="wrap",zeroMinWidth:w=!1}=o,d=Se(o,St),$=b||v,ke=p||v,Ae=y.exports.useContext(de),ie=g?h||12:Ae,se={},le=I({},d);s.keys.forEach(H=>{d[H]!=null&&(se[H]=d[H],delete le[H])});const oe=I({},o,{columns:ie,container:g,direction:a,item:i,rowSpacing:$,columnSpacing:ke,wrap:C,zeroMinWidth:w,spacing:v},se,{breakpoints:s.keys}),Ne=wt(oe);return r(de.Provider,{value:ie,children:r(xt,I({ownerState:oe,className:ye(Ne.root,c),as:m,ref:n},le))})});var R=$t,V=(e=>(e.ONE="one",e.TWO_PLUS="twoPlus",e))(V||{});function Pt(e){return _e.filter(t=>{var n;return e===V.ONE&&((n=t.tags)==null?void 0:n.includes(Ee.PHASE_TWO_BLUEPRINT))?!1:!!t.researchManufacturer||!!t.researchStrategyTypes||!!t.researchTacticTypes})}function Mt(e,t){const n=[],l=[],s=[],o=[];return e.forEach(c=>{const h=De(c,t);if(h.length>0){l.push({shipDefinition:c,modules:h});return}if(Ce(c.id,t)){s.push(c);return}if(Te(c.id,t)){n.push(c);return}o.push(c)}),{wantedShips:n.sort((c,h)=>x(c).localeCompare(x(h))),shipsWithWantedModule:l.sort((c,h)=>x(c.shipDefinition).localeCompare(x(h.shipDefinition))),possessedShips:s.sort((c,h)=>x(c).localeCompare(x(h))),remainingShips:o.sort((c,h)=>x(c).localeCompare(x(h)))}}function Rt(){const e=[P.NOMA_SHIPPING_GROUP,P.JUPITER_INDUSTRIES,P.ANTONIOS_CONSORTIUM,P.DAWN_ACCORD,null],t=[M.OUTSTANDING_FIREPOWER,M.SUSTAINED_COMBAT,M.STRATEGY_AND_SUPPORT,M.FIGHTER_AND_CORVETTE,null],n=[U.PROJECTILE_WEAPONS,U.DIRECT_FIRE_WEAPONS,null];return e.flatMap(l=>n.flatMap(s=>t.map(o=>({shipId:null,manufacturerFilter:l,strategyTypeFilter:o,tacticTypeFilter:s}))))}let It=0;function Wt(e,t,n){const l=t.filter(i=>!(e.manufacturerFilter!==null&&i.researchManufacturer!==e.manufacturerFilter||e.strategyTypeFilter!==null&&i.researchStrategyTypes&&!i.researchStrategyTypes.includes(e.strategyTypeFilter)||e.tacticTypeFilter!==null&&i.researchTacticTypes&&!i.researchTacticTypes.includes(e.tacticTypeFilter))),s=l.reduce((i,b)=>i+b.weight,0),o=l.map(i=>{const b=Ce(i.id,n),v=i.weight/s,C=Be(i,n);return{shipDefinition:i,chance:v,formula:`${i.weight} / ${s}`,possessed:b,wished:Te(i.id,n),unwished:Ge(i.id,n),modules:C.map(w=>({module:w,chance:v/C.length,formula:`${Nt(v)} / ${C.length}`,wished:Le(w.id,i.id,n)}))}});let c=0,h=0,p=0,m=0,g=0;o.forEach(i=>{if(i.possessed){if(i.modules.length>0){h+=i.chance,i.modules.find(b=>b.wished)&&(p+=i.chance);return}g+=i.chance;return}else{c+=i.chance,i.wished&&(p+=i.chance),i.unwished&&(m+=i.chance);return}});const a=Object.values(ze).map(i=>{const b=i;return{shipType:b,chance:o.filter(v=>v.shipDefinition.type===b).map(v=>v.chance).reduce((v,C)=>v+C,0)}}).filter(i=>i.chance>0);return{id:`${It++}`,filterState:e,shipChances:o,shipTypeChances:a,totalShipChance:c,totalModuleChance:h,wishedShipChance:p,unwishedShipChance:m,techPointChance:g}}function kt(e){var t,n,l;return`${(t=e.manufacturerFilter)!=null?t:"null"}.${(n=e.strategyTypeFilter)!=null?n:"null"}.${(l=e.tacticTypeFilter)!=null?l:"null"}`}function At(e,t){if(t.shipId!==null)return e.filter(s=>!s.filterState.manufacturerFilter&&!s.filterState.strategyTypeFilter&&!s.filterState.tacticTypeFilter?!1:s.shipChances.find(o=>o.shipDefinition.id===t.shipId)).sort((s,o)=>{var p,m,g,a;const c=(m=(p=s.shipChances.find(i=>i.shipDefinition.id===t.shipId))==null?void 0:p.chance)!=null?m:0;return((a=(g=o.shipChances.find(i=>i.shipDefinition.id===t.shipId))==null?void 0:g.chance)!=null?a:0)-c});const n=[],l=e.filter(s=>t.manufacturerFilter!==null&&s.filterState.manufacturerFilter!==t.manufacturerFilter||t.strategyTypeFilter!==null&&s.filterState.strategyTypeFilter!==t.strategyTypeFilter||t.tacticTypeFilter!==null&&s.filterState.tacticTypeFilter!==t.tacticTypeFilter||!s.filterState.manufacturerFilter&&!s.filterState.strategyTypeFilter&&!s.filterState.tacticTypeFilter?!1:s.filterState.manufacturerFilter===t.manufacturerFilter&&s.filterState.strategyTypeFilter===t.strategyTypeFilter&&s.filterState.tacticTypeFilter===t.tacticTypeFilter?(n.push(s),!1):s);return[...n,...l]}function Nt(e){return`${Number((e*100).toFixed(3))} %`}const Ot=e=>{const{configurations:t,filterState:n,onClickConfiguration:l}=e,{table:s,setTableData:o}=tt(),c=ve(),p=Ue(c.breakpoints.down("sm"))?"38px":"50px",m=n.shipId;return y.exports.useEffect(()=>{const g={columns:[{id:"filter",renderHeader:()=>u("label.researchDirection"),renderCell:a=>S(F,{component:"div",sx:{minWidth:"120px"},children:[a.filterState.manufacturerFilter&&r(f,{variant:"body2",children:r(D,{onClick:()=>l(a),children:ee(a.filterState.manufacturerFilter)})}),a.filterState.tacticTypeFilter&&r(f,{variant:"body2",children:r(D,{onClick:()=>l(a),children:te(a.filterState.tacticTypeFilter)})}),a.filterState.strategyTypeFilter&&r(f,{variant:"body2",children:r(D,{onClick:()=>l(a),children:re(a.filterState.strategyTypeFilter)})}),!a.filterState.manufacturerFilter&&!a.filterState.strategyTypeFilter&&!a.filterState.tacticTypeFilter&&r(f,{variant:"body2",children:r(D,{onClick:()=>l(a),children:u("label.notSelected")})})]})},...m?[{id:"selectedShipChance",renderHeader:()=>u("label.selectedShip"),renderCell:a=>r(F,{component:"div",sx:{minWidth:p},children:r(f,{variant:"body2",children:A(Z(a,m))})}),sortFn:[(a,i)=>Z(a,m)-Z(i,m),(a,i)=>a.totalShipChance-i.totalShipChance,(a,i)=>i.techPointChance-a.techPointChance,(a,i)=>a.wishedShipChance-i.wishedShipChance,(a,i)=>i.unwishedShipChance-a.unwishedShipChance]}]:[],{id:"totalShipChance",renderHeader:()=>u("label.newShip"),renderCell:a=>r(F,{component:"div",sx:{minWidth:p},children:r(f,{variant:"body2",children:A(a.totalShipChance)})}),sortFn:[(a,i)=>a.totalShipChance-i.totalShipChance,(a,i)=>i.techPointChance-a.techPointChance,(a,i)=>a.wishedShipChance-i.wishedShipChance,(a,i)=>i.unwishedShipChance-a.unwishedShipChance]},{id:"totalModuleChance",renderHeader:()=>u("label.additionalSystemModule"),renderCell:a=>r(F,{component:"div",sx:{minWidth:p},children:r(f,{variant:"body2",children:A(a.totalModuleChance)})}),sortFn:[(a,i)=>a.totalModuleChance-i.totalModuleChance,(a,i)=>a.totalShipChance-i.totalShipChance,(a,i)=>i.techPointChance-a.techPointChance,(a,i)=>a.wishedShipChance-i.wishedShipChance,(a,i)=>i.unwishedShipChance-a.unwishedShipChance]},{id:"techPointChance",renderHeader:()=>u("label.techPoints"),renderCell:a=>r(F,{component:"div",sx:{minWidth:p},children:r(f,{variant:"body2",children:A(a.techPointChance)})}),sortFn:[(a,i)=>a.techPointChance-i.techPointChance,(a,i)=>i.totalShipChance-a.totalShipChance,(a,i)=>i.wishedShipChance-a.wishedShipChance,(a,i)=>a.unwishedShipChance-i.unwishedShipChance]},{id:"wishedShipChance",renderHeader:()=>u("label.wantedBlueprint"),renderCell:a=>r(F,{component:"div",sx:{minWidth:p},children:r(f,{variant:"body2",children:A(a.wishedShipChance)})}),sortFn:[(a,i)=>a.wishedShipChance-i.wishedShipChance,(a,i)=>i.techPointChance-a.techPointChance,(a,i)=>a.totalShipChance-i.totalShipChance,(a,i)=>i.unwishedShipChance-a.unwishedShipChance]},{id:"unwishedShipChance",renderHeader:()=>u("label.unwantedBlueprint"),renderCell:a=>r(F,{component:"div",sx:{minWidth:p},children:r(f,{variant:"body2",children:A(a.unwishedShipChance)})}),sortFn:[(a,i)=>a.unwishedShipChance-i.unwishedShipChance,(a,i)=>i.totalShipChance-a.totalShipChance,(a,i)=>i.wishedShipChance-a.wishedShipChance,(a,i)=>a.techPointChance-i.techPointChance]}],data:t,rowIdFn:a=>kt(a.filterState)};o(g)},[o,t,m,l,p]),r(rt,{table:s,size:"small"})};function A(e){return`${Number((e*100).toFixed(2))} %`}function Z(e,t){var n,l;return(l=(n=e.shipChances.find(s=>s.shipDefinition.id===t))==null?void 0:n.chance)!=null?l:0}const _t=e=>{const{shipDefinition:t}=e,{openShipDetailDialog:n}=je();return r(f,{variant:"body2",component:"span",children:r(D,{onClick:()=>{n(t.id)},children:x(t)})})},Q={[P.JUPITER_INDUSTRIES]:35,[P.NOMA_SHIPPING_GROUP]:35,[P.ANTONIOS_CONSORTIUM]:40,[P.DAWN_ACCORD]:25,[M.OUTSTANDING_FIREPOWER]:55,[M.SUSTAINED_COMBAT]:50,[M.STRATEGY_AND_SUPPORT]:55,[M.FIGHTER_AND_CORVETTE]:60,[U.PROJECTILE_WEAPONS]:45,[U.DIRECT_FIRE_WEAPONS]:40};function Et(e){const t=Dt(e);return u("label.daysAndHours",{days:Math.floor(t/24),hours:Math.round(t%24)})}function Dt(e){var o,c,h;const t=[...e.manufacturerFilter?[e.manufacturerFilter]:[],...e.tacticTypeFilter?[e.tacticTypeFilter]:[],...e.strategyTypeFilter?[e.strategyTypeFilter]:[]],n=t[0]&&(o=Q[t[0]])!=null?o:0,l=t[1]&&(c=Q[t[1]])!=null?c:0,s=t[2]&&(h=Q[t[2]])!=null?h:0;return t.length===3?n+(n+l)+n*l*s/250:t.length===2?n+(n+l):n}const Me=e=>{const{configuration:t}=e,{userSettings:n}=Ve();return r(He,{rows:[{key:`${t.id}.wishedShipChance`,label:u("label.wantedBlueprint"),value:E(t.wishedShipChance),separatorAfter:!0},...t.techPointChance>0?[{key:`${t.id}.techPointChance`,label:r(f,{variant:"body2",sx:t.techPointChance>0?{color:"red"}:void 0,children:u("label.techPoints")}),value:r(f,{variant:"body2",sx:t.techPointChance>0?{color:"red"}:void 0,children:E(t.techPointChance)}),separatorAfter:!0}]:[],...t.shipChances.flatMap(l=>{const s=l.possessed&&l.modules.length>0,o=l.wished||qe(l.shipDefinition.id,n);return[{key:`${t.id}.${l.shipDefinition.id}`,label:S(B,{children:[r(_t,{shipDefinition:l.shipDefinition}),Y()&&r("span",{children:"\xA0"}),s&&r(f,{variant:"body2",component:"span",children:u("label.additionalSystemModuleBrackets")}),!s&&l.possessed&&r(f,{variant:"body2",component:"span",children:u("label.techPointsBrackets")}),o&&r(G,{arrow:!0,disableFocusListener:!0,title:`${u("label.wantedBlueprint")}`,children:r(f,{variant:"body2",component:"span",sx:{color:"#ffc107",marginLeft:"4px"},children:"\u2605"})})]}),value:r(G,{arrow:!0,disableFocusListener:!0,title:S(B,{children:[r(f,{variant:"body2",gutterBottom:!0,children:`[${u("label.probabilityWeight")}] / [${u("label.total")}]`}),r(f,{variant:"body2",children:l.formula})]}),children:r(f,{variant:"body2",sx:{color:!s&&l.possessed?"red":void 0},children:E(l.chance)})})},...s?l.modules.map(c=>({key:`${t.id}.${l.shipDefinition.id}.${c.module.id}`,label:S(B,{children:[r(f,{variant:"body2",component:"span",color:"text.secondary",sx:{opacity:.5},children:"\u2517"}),Y()&&r("span",{children:"\xA0"}),r(f,{variant:"body2",component:"span",color:"text.secondary",children:`${c.module.category}${c.module.categoryNumber} ${Ke(l.shipDefinition.id,c.module)}`}),c.wished&&r(G,{arrow:!0,disableFocusListener:!0,title:`${u("label.wantedAdditionalSystemModule")}`,children:r(f,{variant:"body2",component:"span",sx:{color:"#ffc107",marginLeft:"4px"},children:"\u2605"})})]}),value:r(G,{arrow:!0,disableFocusListener:!0,title:S(B,{children:[r(f,{variant:"body2",gutterBottom:!0,children:`[${u("label.shipProbability")}] / [${u("label.remainingAdditionalSystemModules")}]`}),r(f,{variant:"body2",children:c.formula})]}),children:r(f,{variant:"body2",color:"text.secondary",children:E(c.chance)})})})):[]]}),...t.shipTypeChances.map((l,s)=>({key:`${t.id}.${l.shipType}`,label:Je(l.shipType),value:E(l.chance,1),separatorBefore:s===0})),{key:`${t.id}.duration`,label:u("researchAgreement.researchTime"),value:Et(t.filterState),separatorBefore:!0}],rowGap:1})};function E(e,t=3){return`${Number((e*100).toFixed(t))} %`}const Re=e=>{var l,s;const{configuration:t,filterState:n}=e;return S(f,{variant:"body2",children:[[...t.filterState.manufacturerFilter!==null?[ee(t.filterState.manufacturerFilter)]:[],...t.filterState.tacticTypeFilter!==null?[te(t.filterState.tacticTypeFilter)]:[],...t.filterState.strategyTypeFilter!==null?[re(t.filterState.strategyTypeFilter)]:[],...!t.filterState.manufacturerFilter&&!t.filterState.strategyTypeFilter&&!t.filterState.tacticTypeFilter?[u("label.notSelected")]:[]].map(o=>`\u300C${o}\u300D`).join("+"),n.shipId===null&&t.wishedShipChance>0&&r(G,{arrow:!0,disableFocusListener:!0,title:`${u("label.probabilityForWantedBlueprintColon")}${ue(t.wishedShipChance)}`,children:r(f,{variant:"body2",component:"span",sx:{color:"#ffc107",marginLeft:"4px"},children:"\u2605"})}),n.shipId!==null&&r(f,{variant:"body2",component:"span",children:`\u3000\u21D2\u3000${ue((s=(l=t.shipChances.find(o=>o.shipDefinition.id===n.shipId))==null?void 0:l.chance)!=null?s:0)}`})]})};function ue(e){return`${Number((e*100).toFixed(3))} %`}const Bt=e=>{const{configurations:t,filterState:n}=e,l=!!n.manufacturerFilter||!!n.strategyTypeFilter||!!n.tacticTypeFilter;return r(at,{expandables:t.map(s=>({id:s.id,initiallyOpened:l,summary:r(Re,{configuration:s,filterState:n}),details:r(Me,{configuration:s})})),unmount:!0})};var ae={},Gt=Fe.exports;Object.defineProperty(ae,"__esModule",{value:!0});var Ie=ae.default=void 0,Lt=Gt(xe),zt=we,Ut=(0,Lt.default)((0,zt.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree");Ie=ae.default=Ut;var ne={},jt=Fe.exports;Object.defineProperty(ne,"__esModule",{value:!0});var We=ne.default=void 0,Vt=jt(xe),Ht=we,qt=(0,Vt.default)((0,Ht.jsx)("path",{d:"M21 8H3V4h18v4zm0 2H3v4h18v-4zm0 6H3v4h18v-4z"}),"TableRows");We=ne.default=qt;const Kt=e=>{const{mode:t,onChange:n}=e;return S(nt,{value:t,exclusive:!0,onChange:(s,o)=>{n(o)},size:"small","aria-label":"view mode",children:[r(ce,{value:"ships","aria-label":"ships",children:r(Ie,{})}),r(ce,{value:"table","aria-label":"table",children:r(We,{})})]})},Jt=e=>{var b,v,C,w;const{filterState:t,shipFilterOptions:n,onChange:l}=e,[s,o]=y.exports.useState(t),[c,h]=y.exports.useTransition(),p=d=>{o($=>({...$,shipId:d.target.value===""?null:d.target.value,manufacturerFilter:null,strategyTypeFilter:null,tacticTypeFilter:null}))},m=d=>{o($=>({...$,shipId:null,manufacturerFilter:d.target.value===""?null:d.target.value}))},g=d=>{o($=>({...$,shipId:null,strategyTypeFilter:d.target.value===""?null:d.target.value}))},a=d=>{o($=>({...$,shipId:null,tacticTypeFilter:d.target.value===""?null:d.target.value}))},i=()=>{o(d=>({...d,shipId:null,manufacturerFilter:null,strategyTypeFilter:null,tacticTypeFilter:null}))};return y.exports.useEffect(()=>{h(()=>{l(s)})},[s,l]),S(R,{container:!0,spacing:2,children:[r(R,{item:!0,xs:12,sm:8,md:4,children:S(L,{fullWidth:!0,size:"small",children:[r(q,{id:"manufacturer-select-label",children:u("label.researchManufacturer")}),S(z,{labelId:"manufacturer-select-label",value:(b=s.manufacturerFilter)!=null?b:"",label:u("label.researchManufacturer"),onChange:m,children:[r(T,{value:"",children:u("label.notSelected")}),r(W,{}),Object.values(P).map(d=>r(T,{value:d,children:ee(d)},d))]})]})}),r(R,{item:!0,xs:12,sm:8,md:4,children:S(L,{fullWidth:!0,size:"small",children:[r(q,{id:"tactics-select-label",children:u("label.researchTacticType")}),S(z,{labelId:"tactics-select-label",value:(v=s.tacticTypeFilter)!=null?v:"",label:u("label.researchTacticType"),onChange:a,children:[r(T,{value:"",children:u("label.notSelected")}),r(W,{}),Object.values(U).map(d=>r(T,{value:d,children:te(d)},d))]})]})}),r(R,{item:!0,xs:12,sm:8,md:4,children:S(L,{fullWidth:!0,size:"small",children:[r(q,{id:"strategy-select-label",children:u("label.researchStrategyType")}),S(z,{labelId:"strategy-select-label",value:(C=s.strategyTypeFilter)!=null?C:"",label:u("label.researchStrategyType"),onChange:g,children:[r(T,{value:"",children:u("label.notSelected")}),r(W,{}),Object.values(M).map(d=>r(T,{value:d,children:re(d)},d))]})]})}),r(R,{item:!0,xs:12,sm:8,children:S(L,{fullWidth:!0,size:"small",children:[r(q,{id:"ship-select-label",children:u("label.ship")}),S(z,{labelId:"ship-select-label",value:(w=s.shipId)!=null?w:"",label:u("label.ship"),onChange:p,children:[r(T,{value:"",children:u("label.notSelected")}),n.wantedShips.length+n.shipsWithWantedModule.length>0&&r(W,{}),n.wantedShips.length+n.shipsWithWantedModule.length>0&&r(J,{disableSticky:!0,children:u("label.wantedBlueprintColon")}),n.wantedShips.map(d=>S(T,{value:d.id,children:[x(d),r(f,{variant:"body1",component:"span",sx:{color:"#ffc107",marginLeft:"4px"},children:"\u2605"})]},d.id)),n.shipsWithWantedModule.map(({shipDefinition:d,modules:$})=>S(T,{value:d.id,children:[x(d),Y()&&r("span",{children:"\xA0"}),u("label.additionalSystemModuleBrackets"),r(f,{variant:"body1",component:"span",sx:{color:"#ffc107",marginLeft:"4px"},children:"\u2605"})]},d.id)),n.remainingShips.length>0&&r(W,{}),n.remainingShips.length>0&&r(J,{disableSticky:!0,children:u("label.acquirableBlueprintColon")}),n.remainingShips.map(d=>r(T,{value:d.id,children:x(d)},d.id)),n.possessedShips.length>0&&r(W,{}),n.possessedShips.length>0&&r(J,{disableSticky:!0,children:u("label.acquiredBlueprintColon")}),n.possessedShips.map(d=>r(T,{value:d.id,children:x(d)},d.id))]})]})}),r(R,{item:!0,xs:12,sm:4,sx:{display:"flex",justifyContent:"end"},children:r($e,{variant:"outlined",onClick:i,children:u("button.reset")})})]})},Zt=e=>{const{season:t,seasonDisabled:n,onChangeSeason:l}=e,s=y.exports.useCallback(o=>{l(o.target.value)},[l]);return r(R,{container:!0,spacing:2,children:r(R,{item:!0,xs:12,sm:8,md:4,children:r(L,{fullWidth:!0,size:"small",children:S(z,{value:t,label:null,onChange:s,disabled:n,children:[r(T,{value:V.ONE,children:u("researchAgreement.seasonOne")}),r(T,{value:V.TWO_PLUS,children:u("researchAgreement.seasonTwoPlus")})]})})})})},Qt=y.exports.memo(Ot),Yt=y.exports.memo(Bt),hr=()=>{var w;const[e,t]=Ze(),[n,l]=y.exports.useState("ships"),[s,o]=y.exports.useState((w=k.researchAgreement.getSearchParam("season",e))!=null?w:V.TWO_PLUS),c=y.exports.useMemo(()=>Pt(s),[s]),h=y.exports.useMemo(()=>Qe(),[]),p=y.exports.useMemo(()=>Rt(),[]),m=y.exports.useMemo(()=>p.map(d=>Wt(d,c,h)),[p,c]),g=y.exports.useMemo(()=>Mt(c,h),[c,h]),[a,i]=y.exports.useState({shipId:k.researchAgreement.getSearchParam("shipId",e),manufacturerFilter:k.researchAgreement.getSearchParam("manufacturer",e),strategyTypeFilter:k.researchAgreement.getSearchParam("strategy",e),tacticTypeFilter:k.researchAgreement.getSearchParam("tactic",e)}),b=y.exports.useMemo(()=>At(m,a),[m,a]),[v,C]=y.exports.useState(null);return y.exports.useEffect(()=>{t(k.researchAgreement.createSearchParams({view:n,season:s,manufacturer:a.manufacturerFilter,strategy:a.strategyTypeFilter,tactic:a.tacticTypeFilter,shipId:a.shipId}))},[n,s,a,t]),S(B,{children:[r(Xe,{currentRoute:"/researchAgreement"}),r(et,{children:r(F,{component:"div",p:1,children:S(O,{spacing:1,children:[S(O,{pt:1,pb:1,spacing:2,children:[r(f,{variant:"body2",children:u("researchAgreement.pageDescription1")}),r(f,{variant:"body2",children:u("researchAgreement.pageDescription2")}),r(f,{variant:"body2",children:u("researchAgreement.pageDescription3")})]}),r(Ye,{children:r(F,{component:"div",p:2,children:S(O,{spacing:4,children:[S(O,{spacing:2,children:[r(f,{variant:"body2",children:u("researchAgreement.environment")}),r("div",{children:r(Zt,{season:s,seasonDisabled:a.shipId!==null,onChangeSeason:o})})]}),S(O,{spacing:2,children:[r(f,{variant:"body2",children:u("label.researchDirection")}),r("div",{children:r(Jt,{filterState:a,onChange:i,shipFilterOptions:g})}),r(F,{component:"div",sx:{display:"flex",justifyContent:"end"},children:r(Kt,{mode:n,onChange:l})})]})]})})}),n==="ships"&&r(Yt,{configurations:b,filterState:a})]})})}),n==="table"&&r(F,{component:"div",p:1,children:r(Qt,{configurations:b,filterState:a,onClickConfiguration:C})}),v&&r(it,{maxWidth:"sm",title:r(Re,{configuration:v,filterState:a}),content:r(Me,{configuration:v}),actions:r($e,{variant:"outlined",onClick:()=>C(null),children:u("button.close")}),onClose:()=>C(null)}),r(st,{disableContainer:n==="table"})]})};export{hr as ResearchAgreementPage,hr as default};
