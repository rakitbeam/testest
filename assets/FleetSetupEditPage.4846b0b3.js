import{q as U,v as W,w as _,D as N,_ as D,r as p,I as V,y as G,A as q,a as f,T as y,j as o,C as oe,E as we,G as ut,H as ke,bs as st,z as lt,a7 as ct,aJ as dt,bt as Te,bu as he,a2 as I,b as A,bg as pt,J as Y,K as X,L as K,o as T,F as $,B as E,n as $e,S as b,p as Me,b2 as Ie,h as S,e as te,a6 as J,al as Z,ax as ht,ap as ft,i as mt,br as O,u as Ft,bv as gt,c as _e,bj as Ct,ba as yt}from"./index.3216557f.js";import{a as B,c as vt,I as fe,N as xt,P as bt}from"./PageContent.13c2f158.js";import{T as H}from"./TextField.3e666fe7.js";import{d as St,a as Dt,b as Rt,C as At}from"./ConfirmationDialog.47efcd59.js";import{A as Bt}from"./ActionBar.814b2ff5.js";import{B as Et,S as wt,g as kt,c as Le,d as Tt,e as $t,s as Mt,h as It,i as _t,v as re,j as Oe,k as Lt,l as me,A as Ge,m as Ot,a as Gt,G as Fe,b as Pt}from"./fleetSetupValidation.7b85e34e.js";import{R as ae}from"./ResponsiveDialog.92e7dbeb.js";import{F as Ht}from"./Select.e11937aa.js";import{u as jt}from"./useFormControl.617a4d60.js";import{g as zt,c as Pe,S as He}from"./ShipTypeFilterButton.cdceb9b3.js";import{T as Ut}from"./Tooltip.d8ee2bab.js";import"./domUtils.e0e5f00e.js";import"./sorting.c6946657.js";function Wt(n){return String(n).match(/[\d.\-+]*\s*(.*)/)[1]||""}function Nt(n){return parseFloat(n)}function Vt(n){return U("MuiFormControlLabel",n)}const qt=W("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label"]);var j=qt;const Yt=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],Xt=n=>{const{classes:e,disabled:t,labelPlacement:r}=n,a={root:["root",t&&"disabled",`labelPlacement${N(r)}`],label:["label",t&&"disabled"]};return q(a,Vt,e)},Kt=_("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${j.label}`]:e.label},e.root,e[`labelPlacement${N(t.labelPlacement)}`]]}})(({theme:n,ownerState:e})=>D({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${j.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${j.label}`]:{[`&.${j.disabled}`]:{color:n.palette.text.disabled}}})),Jt=p.exports.forwardRef(function(e,t){const r=V({props:e,name:"MuiFormControlLabel"}),{className:a,componentsProps:i={},control:u,disabled:l,disableTypography:h,label:c,labelPlacement:m="end"}=r,C=G(r,Yt),d=jt();let v=l;typeof v=="undefined"&&typeof u.props.disabled!="undefined"&&(v=u.props.disabled),typeof v=="undefined"&&d&&(v=d.disabled);const s={disabled:v};["checked","name","onChange","value","inputRef"].forEach(x=>{typeof u.props[x]=="undefined"&&typeof r[x]!="undefined"&&(s[x]=r[x])});const F=D({},r,{disabled:v,label:c,labelPlacement:m}),g=Xt(F);return f(Kt,D({className:oe(g.root,a),ownerState:F,ref:t},C,{children:[p.exports.cloneElement(u,s),c.type===y||h?c:o(y,D({component:"span",className:g.label},i.typography,{children:c}))]}))});var ge=Jt;function Zt(n){return U("MuiFormGroup",n)}W("MuiFormGroup",["root","row"]);const Qt=["className","row"],en=n=>{const{classes:e,row:t}=n;return q({root:["root",t&&"row"]},Zt,e)},tn=_("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.row&&e.row]}})(({ownerState:n})=>D({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})),nn=p.exports.forwardRef(function(e,t){const r=V({props:e,name:"MuiFormGroup"}),{className:a,row:i=!1}=r,u=G(r,Qt),l=D({},r,{row:i}),h=en(l);return o(tn,D({className:oe(h.root,a),ownerState:l,ref:t},u))});var on=nn,rn=we(o("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),an=we(o("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");const un=_("span")({position:"relative",display:"flex"}),sn=_(rn,{skipSx:!0})({transform:"scale(1)"}),ln=_(an,{skipSx:!0})(({theme:n,ownerState:e})=>D({left:0,position:"absolute",transform:"scale(0)",transition:n.transitions.create("transform",{easing:n.transitions.easing.easeIn,duration:n.transitions.duration.shortest})},e.checked&&{transform:"scale(1)",transition:n.transitions.create("transform",{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.shortest})}));function je(n){const{checked:e=!1,classes:t={},fontSize:r}=n,a=D({},n,{checked:e});return f(un,{className:t.root,ownerState:a,children:[o(sn,{fontSize:r,className:t.background,ownerState:a}),o(ln,{fontSize:r,className:t.dot,ownerState:a})]})}const cn=p.exports.createContext(void 0);var ze=cn;function dn(){return p.exports.useContext(ze)}function pn(n){return U("MuiRadio",n)}const hn=W("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]);var Ce=hn;const fn=["checked","checkedIcon","color","icon","name","onChange","size"],mn=n=>{const{classes:e,color:t}=n,r={root:["root",`color${N(t)}`]};return D({},e,q(r,pn,e))},Fn=_(zt,{shouldForwardProp:n=>ut(n)||n==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`color${N(t.color)}`]]}})(({theme:n,ownerState:e})=>D({color:n.palette.text.secondary,"&:hover":{backgroundColor:ke(e.color==="default"?n.palette.action.active:n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${Ce.checked}`]:{color:n.palette[e.color].main}},{[`&.${Ce.disabled}`]:{color:n.palette.action.disabled}}));function gn(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}const ye=o(je,{checked:!0}),ve=o(je,{}),Cn=p.exports.forwardRef(function(e,t){var r,a;const i=V({props:e,name:"MuiRadio"}),{checked:u,checkedIcon:l=ye,color:h="primary",icon:c=ve,name:m,onChange:C,size:d="medium"}=i,v=G(i,fn),s=D({},i,{color:h,size:d}),F=mn(s),g=dn();let x=u;const R=st(C,g&&g.onChange);let w=m;return g&&(typeof x=="undefined"&&(x=gn(g.value,i.value)),typeof w=="undefined"&&(w=g.name)),o(Fn,D({type:"radio",icon:p.exports.cloneElement(c,{fontSize:(r=ve.props.fontSize)!=null?r:d}),checkedIcon:p.exports.cloneElement(l,{fontSize:(a=ye.props.fontSize)!=null?a:d}),ownerState:s,classes:F,name:w,checked:x,onChange:R,ref:t},v))});var xe=Cn;const yn=["actions","children","defaultValue","name","onChange","value"],vn=p.exports.forwardRef(function(e,t){const{actions:r,children:a,defaultValue:i,name:u,onChange:l,value:h}=e,c=G(e,yn),m=p.exports.useRef(null),[C,d]=lt({controlled:h,default:i,name:"RadioGroup"});p.exports.useImperativeHandle(r,()=>({focus:()=>{let g=m.current.querySelector("input:not(:disabled):checked");g||(g=m.current.querySelector("input:not(:disabled)")),g&&g.focus()}}),[]);const v=ct(t,m),s=g=>{d(g.target.value),l&&l(g,g.target.value)},F=dt(u);return o(ze.Provider,{value:{name:F,onChange:s,value:C},children:o(on,D({role:"radiogroup",ref:v},c,{children:a}))})});var xn=vn;function bn(n){return U("MuiSkeleton",n)}W("MuiSkeleton",["root","text","rectangular","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const Sn=["animation","className","component","height","style","variant","width"];let z=n=>n,be,Se,De,Re;const Dn=n=>{const{classes:e,variant:t,animation:r,hasChildren:a,width:i,height:u}=n;return q({root:["root",t,r,a&&"withChildren",a&&!i&&"fitContent",a&&!u&&"heightAuto"]},bn,e)},Rn=Te(be||(be=z`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),An=Te(Se||(Se=z`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),Bn=_("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],t.animation!==!1&&e[t.animation],t.hasChildren&&e.withChildren,t.hasChildren&&!t.width&&e.fitContent,t.hasChildren&&!t.height&&e.heightAuto]}})(({theme:n,ownerState:e})=>{const t=Wt(n.shape.borderRadius)||"px",r=Nt(n.shape.borderRadius);return D({display:"block",backgroundColor:ke(n.palette.text.primary,n.palette.mode==="light"?.11:.13),height:"1.2em"},e.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${t}/${Math.round(r/.6*10)/10}${t}`,"&:empty:before":{content:'"\\00a0"'}},e.variant==="circular"&&{borderRadius:"50%"},e.hasChildren&&{"& > *":{visibility:"hidden"}},e.hasChildren&&!e.width&&{maxWidth:"fit-content"},e.hasChildren&&!e.height&&{height:"auto"})},({ownerState:n})=>n.animation==="pulse"&&he(De||(De=z`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),Rn),({ownerState:n,theme:e})=>n.animation==="wave"&&he(Re||(Re=z`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(90deg, transparent, ${0}, transparent);
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),An,e.palette.action.hover)),En=p.exports.forwardRef(function(e,t){const r=V({props:e,name:"MuiSkeleton"}),{animation:a="pulse",className:i,component:u="span",height:l,style:h,variant:c="text",width:m}=r,C=G(r,Sn),d=D({},r,{animation:a,component:u,variant:c,hasChildren:Boolean(C.children)}),v=Dn(d);return o(Bn,D({as:u,ref:t,className:oe(v.root,i),ownerState:d},C,{style:D({width:m,height:l},h)}))});var k=En;const wn=n=>{const{fleetSetup:e,onChange:t,errors:r,columnCount:a}=n,i=c=>{t({...e,name:c.target.value.trim()})},u=c=>{t({...e,maxCost:Number(c.target.value)})},l=c=>{t({...e,maxReinforcement:Number(c.target.value)})},h=c=>{t({...e,myListOnly:c.target.value==="myListOnly"})};return o(I,{children:o(A,{p:1,children:o(pt,{sx:{alignItems:"center"},offsetValue:!1,rowGap:1,columnCount:a,rows:[{key:"name",label:"\u8266\u968A\u540D",value:c=>o(H,{variant:"outlined",size:"small",value:e.name,onChange:i,error:!!r.name,helperText:r.name,fullWidth:c})},{key:"reinforcementCount",label:"\u6700\u5927\u5897\u63F4\u6570",value:c=>f(H,{variant:"outlined",size:"small",select:!0,value:e.maxReinforcement,onChange:l,error:!!r.maxReinforcement,helperText:r.maxReinforcement,fullWidth:c,SelectProps:{renderValue:()=>o(y,{variant:"body1",whiteSpace:"normal",children:e.maxReinforcement})},children:[o(B,{value:"5",children:"\uFF15\u96BB\uFF08\u7D50\u5408\u52B9\u679C\u7121\u3057\uFF09"}),o(B,{value:"6",children:"\uFF16\u96BB\uFF08\u5C0F\u578B\u88DC\u7D66\u57FA\u5730\u306B\u7D50\u5408\uFF09"}),o(B,{value:"9",children:"\uFF19\u96BB\uFF08\u4E2D\u7D99\u88DC\u7D66\u65BD\u8A2D\u306B\u7D50\u5408\uFF09"})]})},{key:"maxCost",label:"\u6700\u5927\u53F8\u4EE4Pt",value:c=>f(H,{variant:"outlined",size:"small",select:!0,value:e.maxCost,onChange:u,error:!!r.maxCost,helperText:r.maxCost,fullWidth:c,SelectProps:{renderValue:()=>o(y,{variant:"body1",whiteSpace:"normal",children:e.maxCost})},children:[o(B,{value:"450",children:"\uFF14\uFF15\uFF10\uFF08\u6226\u5730\u6307\u4EE4\u30BB\u30F3\u30BF\u30FC\u306B\u7D50\u5408\uFF09"}),o(B,{value:"430",children:"\uFF14\uFF13\uFF10\uFF08\u5354\u540C\u4F5C\u6226\u6A5F\u69CB\u306B\u7D50\u5408\uFF09"}),o(B,{value:"415",children:"\uFF14\uFF11\uFF15\uFF08\u9060\u8DDD\u96E2\u6307\u4EE4\u5C40\u306B\u7D50\u5408\uFF09"}),o(B,{value:"400",children:"\uFF14\uFF10\uFF10\uFF08\u7D50\u5408\u52B9\u679C\u7121\u3057\uFF09"}),o(B,{value:"350",children:"\uFF13\uFF15\uFF10\uFF08\u6226\u5730\u6307\u4EE4\u30BB\u30F3\u30BF\u30FC\u306B\u7D50\u5408\uFF09"}),o(B,{value:"330",children:"\uFF13\uFF13\uFF10\uFF08\u5354\u540C\u4F5C\u6226\u6A5F\u69CB\u306B\u7D50\u5408\uFF09"}),o(B,{value:"315",children:"\uFF13\uFF11\uFF15\uFF08\u9060\u8DDD\u96E2\u6307\u4EE4\u5C40\u306B\u7D50\u5408\uFF09"}),o(B,{value:"300",children:"\uFF13\uFF10\uFF10\uFF08\u7D50\u5408\u52B9\u679C\u7121\u3057\uFF09"})]})},{key:"myListOnly",label:"\u8FFD\u52A0\u3067\u304D\u308B\u8266\u8239",value:c=>f(H,{variant:"outlined",size:"small",select:!0,value:e.myListOnly?"myListOnly":"all",onChange:h,error:!!r.myListOnly,helperText:r.myListOnly,fullWidth:c,SelectProps:{renderValue:()=>o(y,{variant:"body1",whiteSpace:"normal",children:e.myListOnly?"\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8239":"\u5168\u3066\u306E\u8266\u8239"})},children:[o(B,{value:"all",children:"\u5168\u3066\u306E\u8266\u8239"}),o(B,{value:"myListOnly",children:"\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8239"})]})}]})})})};var ie={},kn=X.exports;Object.defineProperty(ie,"__esModule",{value:!0});var ue=ie.default=void 0,Tn=kn(Y),$n=K,Mn=(0,Tn.default)((0,$n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");ue=ie.default=Mn;const Ue=n=>{const{onOpenAddShips:e,filter:t,buttonProps:r}=n,a=i=>{switch(i){case"addInitialShip":{e(null,t);break}case"addSelfReinforcement":{e("self",t);break}case"addAllyReinforcement":{e("ally",t);break}case"addAlly2Reinforcement":{e("ally2",t);break}case"addAlly3Reinforcement":{e("ally3",t);break}}};return o(Et,{icon:o(ue,{}),text:T("fleetSetup.addShips"),onClick:a,buttonProps:r,options:[{key:"addInitialShip",text:T("fleetSetup.normalAssignment"),value:"addInitialShip"},{key:"addSelfReinforcement",text:T("fleetSetup.reinforcement"),value:"addSelfReinforcement"},{key:"addAllyReinforcement",text:T("fleetSetup.orgReinforcementA"),value:"addAllyReinforcement"},{key:"addAlly2Reinforcement",text:T("fleetSetup.orgReinforcementB"),value:"addAlly2Reinforcement"},{key:"addAlly3Reinforcement",text:T("fleetSetup.orgReinforcementC"),value:"addAlly3Reinforcement"}]})},In=n=>{const{grouping:e,onChangeGrouping:t,onCancel:r,onSave:a,onReset:i,onOpenAddShips:u,saveDisabled:l}=n;return o(Bt,{left:h=>f($,{children:[o(wt,{value:e,onChange:t,buttonProps:h}),o(Ue,{onOpenAddShips:u,buttonProps:h})]}),right:h=>f($,{children:[o(E,{variant:"outlined",startIcon:o(St,{}),onClick:i,...h,children:T("button.initialize")},"reset"),o(E,{variant:"outlined",startIcon:o(Dt,{}),onClick:r,...h,children:T("button.cancel")},"cancel"),o(E,{variant:"contained",startIcon:o(Rt,{}),onClick:a,disabled:l,...h,children:T("button.save")},"save")]})})},_n=n=>{var v;const{initialFleetKey:e}=n,t=$e(),r=p.exports.useMemo(()=>kt(),[]),[a,i]=p.exports.useState(e&&(v=r.find(s=>s.key===e))!=null?v:r[0]),u=p.exports.useCallback((s,F,g)=>{i(x=>Le({shipId:s,count:F,reinforcement:g,fleetSetup:x}))},[]),l=p.exports.useCallback((s,F,g,x)=>{i(R=>Tt({shipId:s,carrierShipId:F,count:g,reinforcement:x,fleetSetup:R}))},[]),h=p.exports.useCallback((s,F,g)=>{i(x=>$t({shipId:s,reinforcement:F,moduleSelection:g,fleetSetup:x}))},[]),c=p.exports.useCallback(()=>{Mt(a),t("/fleetSetup")},[a]),m=p.exports.useCallback(()=>{const s=Number(a.key.substring(5));i(It(s))},[a]),C=p.exports.useMemo(()=>_t(a),[a]),d=p.exports.useMemo(()=>re(a),[a]);return{fleetSetup:a,errors:C,shipWarnings:d,setFleetSetup:i,setShipCount:u,setCarriedShipCount:l,setModule:h,save:c,reset:m}},Ln=n=>{const{fleetSetup:e,fleetShipCount:t}=n,r=t.totalCost>e.maxCost,a=e.totalReinforcementCount>e.maxReinforcement;return o(A,{sx:{height:"100px"},children:o(I,{square:!0,sx:{position:"fixed",right:0,bottom:0,zIndex:1,width:"100%",borderTop:"1px solid rgba(0, 0, 0, 0.2)"},children:o(vt,{maxWidth:"md",disableGutters:!0,children:o(A,{p:1,children:f(b,{spacing:1,flexWrap:"wrap",direction:"row",children:[o(A,{sx:{flexGrow:1,display:"flex",justifyContent:"center"},children:f("div",{children:[o(y,{variant:"body2",color:"text.secondary",children:"\u5897\u63F4"}),o(y,{variant:"body1",sx:{color:a?"red":void 0},children:o("strong",{children:`${e.totalReinforcementCount} / ${e.maxReinforcement}`})})]})}),o(A,{sx:{flexGrow:1,display:"flex",justifyContent:"center"},children:f("div",{children:[o(y,{variant:"body2",color:"text.secondary",children:"\u53F8\u4EE4pt"}),o(y,{variant:"body1",sx:{color:r?"red":void 0},children:o("strong",{children:`${t.totalCost} / ${e.maxCost}`})})]})})]})})})})})};function On(n,e,t,r){const a={};e.ships.forEach(u=>{a[`${u.shipDefinition.id}_${u.reinforcement}`]=!0});const i=Gn(Me,n,e.myListOnly,t);return{fleetSetup:{...e,ships:[...e.ships,...i.flatMap(u=>a[`${u.id}_${n}`]?[]:[Oe({shipDefinition:u,usedModules:null,count:0,reinforcement:n,maxReinforcement:e.maxReinforcement,temporary:!0})])]},reinforcement:n,filter:r}}function Gn(n,e,t,r){const a=n.filter(i=>i.type!==S.CORVETTE&&i.type!==S.FIGHTER);return(e==null?void 0:e.includes("ally"))||!t?a:a.filter(i=>Ie(i.id,r))}function Pn(n){return{...n.fleetSetup,ships:n.fleetSetup.ships.flatMap(e=>e.temporary?e.count===0?[]:[{...e,temporary:!1}]:[e])}}function Hn(n,e){let t={...e,fleetSetup:{...e.fleetSetup,ships:e.fleetSetup.ships.filter(r=>r.temporary===!0)}};return Object.keys(n).filter(r=>n[r]).forEach(r=>{switch(r){case te.FRONT:case te.MIDDLE:case te.BACK:{t={...t,fleetSetup:{...t.fleetSetup,ships:t.fleetSetup.ships.filter(a=>a.shipDefinition.row===r)}};break}case S.CARRIER:case S.AUXILIARY:case S.BATTLE_CRUISER:case S.CRUISER:case S.DESTROYER:case S.FRIGATE:{t={...t,fleetSetup:{...t.fleetSetup,ships:t.fleetSetup.ships.filter(a=>a.shipDefinition.type===r)}};break}}}),t}const jn=n=>{const{userSettings:e,fleetSetup:t,setFleetSetup:r}=n,[a,i]=p.exports.useState(null),u=p.exports.useCallback((C,d)=>{i(On(C,t,e,d!=null?d:null))},[t,e]),l=p.exports.useCallback(()=>{i(null)},[]),h=p.exports.useCallback(()=>{a&&(r(Pn(a)),i(null))},[a,r]),c=p.exports.useCallback((C,d,v)=>{i(s=>s?{...s,fleetSetup:Le({shipId:C,count:d,reinforcement:v,fleetSetup:s.fleetSetup,keepZero:!0})}:null)},[e]),m=p.exports.useMemo(()=>a?re(a.fleetSetup):{},[a]);return{dialogData:a,shipWarnings:m,open:u,cancel:l,apply:h,setShipCount:c}};var se={},zn=X.exports;Object.defineProperty(se,"__esModule",{value:!0});var We=se.default=void 0,Un=zn(Y),Wn=K,Nn=(0,Un.default)((0,Wn.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");We=se.default=Nn;var le={},Vn=X.exports;Object.defineProperty(le,"__esModule",{value:!0});var Ne=le.default=void 0,qn=Vn(Y),Yn=K,Xn=(0,qn.default)((0,Yn.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddBox");Ne=le.default=Xn;const Kn=n=>{const{shipDefinition:e,count:t,maxCount:r,reinforcement:a,showCost:i,showReinforcement:u,carrierShipId:l,shipWarning:h,onChangeShipCount:c,onChangeCarriedShipCount:m}=n,C=J(),d=Z(C.breakpoints.down("sm")),{openShipDetailDialog:v}=ht(),s=f($,{children:[o(y,{variant:"body1",children:o(ft,{onClick:()=>{v(e.id)},children:mt(e)})}),i&&a===null&&o(y,{variant:"body2",color:"text.secondary",children:`\u6307\u4EE4\uFF30\uFF54\uFF1A${e.cost}\u3000\u5408\u8A08\uFF1A${e.cost*t}`}),u&&a==="self"&&o(y,{variant:"body2",color:"text.secondary",children:"\u5897\u63F4"}),u&&a==="ally"&&o(y,{variant:"body2",color:"text.secondary",children:"\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\uFF21"}),u&&a==="ally2"&&o(y,{variant:"body2",color:"text.secondary",children:"\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\uFF22"}),u&&a==="ally3"&&o(y,{variant:"body2",color:"text.secondary",children:"\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\uFF23"})]}),F=h&&o(y,{variant:"caption",color:"red",textAlign:"end",children:h}),g=o(E,{onClick:()=>{l?m==null||m(e.id,l,0,a):c==null||c(e.id,0,a)},disabled:t<=0,children:"\u5916\u3059"}),x=o(fe,{onClick:()=>{l?m==null||m(e.id,l,t-1,a):c==null||c(e.id,t-1,a)},disabled:t<=0,children:o(We,{color:t<=0?"disabled":"primary"})}),R=o(y,{variant:"body1",sx:{minWidth:"55px"},textAlign:"center",children:o("strong",{children:`${t} / ${r}`})}),w=o(fe,{onClick:()=>{l?m==null||m(e.id,l,t+1,a):c==null||c(e.id,t+1,a)},disabled:t>=r,children:o(Ne,{color:t>=r?"disabled":"primary"})}),L=o(E,{onClick:()=>{l?m==null||m(e.id,l,r,a):c==null||c(e.id,r,a)},disabled:t>=r,children:"\u6700\u5927"});return f($,{children:[d&&f(b,{spacing:1,children:[s,f(I,{variant:"outlined",sx:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[f(b,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[x,R,w]}),f(b,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[g,L]})]}),F]}),!d&&f(b,{spacing:1,children:[f(b,{spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[o(A,{pb:1,children:o(b,{spacing:1,children:s})}),o(A,{sx:{display:"flex",justifyContent:"end",flexGrow:1},children:o(I,{variant:"outlined",sx:{display:"inline-block"},children:f(b,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[g,x,R,w,L]})})})]}),F]})]})};function Jn(n){const e={corvette:{key:"corvette",name:"\u8B77\u9001\u8266",count:n.carriedShips.filter(t=>t.shipDefinition.type===S.CORVETTE).map(t=>t.count).reduce((t,r)=>t+r,0),maxCount:n.carrierCapabilities.carryCorvette*n.count},upToLargeFighter:{key:"upToLargeFighter",name:"\u5C0F\uFF5E\u5927\u578B\u6226\u95D8\u6A5F",count:n.carriedShips.filter(t=>t.shipDefinition.type===S.FIGHTER&&t.shipDefinition.subType===O.LARGE_FIGHTER).map(t=>t.count).reduce((t,r)=>t+r,0),maxCount:n.carrierCapabilities.carryUpToLargeFighter*n.count},upToMediumFighter:{key:"upToMediumFighter",name:"\u5C0F\uFF5E\u4E2D\u91CF\u7D1A\u6226\u95D8\u6A5F",count:n.carriedShips.filter(t=>t.shipDefinition.type===S.FIGHTER&&t.shipDefinition.subType===O.MEDIUM_FIGHTER).map(t=>t.count).reduce((t,r)=>t+r,0),maxCount:n.carrierCapabilities.carryUpToMediumFighter*n.count},upToSmallFighter:{key:"upToSmallFighter",name:"\u5C0F\u578B\u6226\u95D8\u6A5F",count:n.carriedShips.filter(t=>t.shipDefinition.type===S.FIGHTER&&t.shipDefinition.subType===O.SMALL_FIGHTER).map(t=>t.count).reduce((t,r)=>t+r,0),maxCount:n.carrierCapabilities.carryUpToSmallFighter*n.count},removedHangar:{key:"removedHangar",name:"\u672A\u5BFE\u5FDC",count:0,maxCount:0}};return Ae(e.upToMediumFighter,[e.upToLargeFighter]),Ae(e.upToSmallFighter,[e.upToMediumFighter,e.upToLargeFighter]),ne(e.upToSmallFighter,e.upToMediumFighter),ne(e.upToMediumFighter,e.upToLargeFighter),e.upToLargeFighter.maxCount===0&&ne(e.upToLargeFighter,e.removedHangar),e}function Ae(n,e){let t=n.count-n.maxCount;t<=0||(n.count-=t,e.forEach(r=>{if(t<=0||r.maxCount===0)return;const a=r.maxCount-r.count;if(a<=0)return;const i=Math.min(a,t);t-=i,r.count+=i}),t>0&&(n.count+=t))}function ne(n,e){const t=n.count-n.maxCount;t>0&&(n.count-=t,e.count+=t)}function Zn(n){return n.count>0||n.maxCount>0}const Qn=n=>{const{shipSelection:e,onOpenAddCarriedShips:t}=n,r=J(),a=Z(r.breakpoints.down("xs")),i=p.exports.useMemo(()=>Jn(e),[e]);return f(b,{spacing:1,direction:a?"column":"row",alignItems:a?"flex-start":"center",justifyContent:"end",flexWrap:"wrap",children:[f(b,{sx:{flexGrow:1},spacing:3,direction:"row",alignItems:"center",justifyContent:"space-between",children:[o(y,{variant:"body2",color:"text.secondary",children:"\u30CF\u30F3\u30AC\u30FC\uFF1A"}),o(b,{spacing:1,direction:"row",alignItems:"center",children:o(b,{spacing:1,direction:"row",alignItems:"center",children:Object.keys(i).filter(u=>Zn(i[u])).map(u=>i[u]).map(u=>f(p.exports.Fragment,{children:[o(y,{variant:"body2",color:"text.secondary",children:u.name}),o(y,{variant:"body2",color:"text.secondary",sx:{color:u.count>u.maxCount?"red":void 0},children:o("strong",{children:`${u.count} / ${u.maxCount}`})})]},u.key))})})]}),o(E,{variant:"outlined",size:"small",startIcon:o(ue,{}),sx:{whiteSpace:"nowrap"},onClick:()=>{t==null||t(e.shipDefinition.id,e.reinforcement)},children:"\u8266\u8F09\u6A5F\u3092\u8FFD\u52A0"})]})};var ce={},eo=X.exports;Object.defineProperty(ce,"__esModule",{value:!0});var Ve=ce.default=void 0,to=eo(Y),no=K,oo=(0,to.default)((0,no.jsx)("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"Tune");Ve=ce.default=oo;const ro=n=>{const{shipId:e,reinforcement:t,moduleSelection:r,myListOnly:a,onChange:i,onClose:u}=n,{userSettings:l}=Ft(),[h,c]=p.exports.useState(r),m=()=>{i(e,t,h),u()},C=s=>{const[F,g]=s.target.value.split("#");c(x=>Lt(F,g,x))},d=s=>{const F=Object.keys(h.groups[s]).find(g=>h.groups[s][g].usage==="used");return F?`${s}#${F}`:null},v=s=>!Object.keys(h.groups[s]).find(F=>h.groups[s][F].module.defaultModule);return o(ae,{title:"\u30B7\u30B9\u30C6\u30E0\u3092\u63DB\u88C5",content:f(b,{spacing:3,children:[Object.keys(h.groups).map(s=>{const F=d(s),g=`${s}#none`;return o(I,{variant:"outlined",children:o(A,{pl:1,pr:1,children:o(Ht,{children:f(xn,{defaultValue:"female",name:`group-${s}`,value:F!=null?F:g,onChange:C,children:[v(s)&&o(ge,{label:"\u7121\u3057",value:g,control:o(xe,{})},g),Object.keys(h.groups[s]).map(x=>{const R=h.groups[s][x],w=t!=="ally"&&t!=="ally2"&&t!=="ally3"&&a&&!R.module.defaultModule&&!gt(x,e,l),L=`${s}#${x}`;return o(ge,{label:f(A,{pt:1,pb:1,children:[o(y,{variant:"body1",children:`${R.module.category}${R.module.categoryNumber} ${_e(e,R.module)}`}),R.module.description&&o(y,{variant:"body2",color:"text.secondary",children:`${R.module.description}`})]}),value:L,control:o(xe,{disabled:w}),disabled:w},x)})]})})})},s)}),a&&o(y,{variant:"caption",paragraph:!0,children:"\u203B\u6240\u6301\u3057\u3066\u3044\u308B\u8FFD\u52A0\u30B7\u30B9\u30C6\u30E0\u306F\u300C\u30DE\u30A4\u30EA\u30B9\u30C8\u300D\u3067\u8A2D\u5B9A\u3067\u304D\u307E\u3059\u3002\u300C\u8FFD\u52A0\u3067\u304D\u308B\u8266\u8239\u300D\u3092\u300C\u5168\u3066\u306E\u8266\u8239\u300D\u306B\u8A2D\u5B9A\u3057\u3066\u3044\u308B\u5834\u5408\u3068\u30E6\u30CB\u30AA\u30F3\u5897\u63F4\u3067\u306F\u5168\u3066\u306E\u8FFD\u52A0\u30B7\u30B9\u30C6\u30E0\u304C\u9078\u3079\u307E\u3059\u3002"})]}),actions:f($,{children:[o(E,{variant:"outlined",onClick:u,children:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),o(E,{variant:"contained",onClick:m,children:"\uFF2F\uFF2B"})]}),onClose:u})},ao=n=>{const{shipId:e,reinforcement:t,moduleSelection:r,myListOnly:a,onChange:i}=n,u=J(),l=Z(u.breakpoints.down("xs")),[h,c]=p.exports.useState(!1),m=()=>{c(!0)},C=()=>{c(!1)},d=[];return Object.keys(r.groups).map(v=>{Object.keys(r.groups[v]).map(s=>r.groups[v][s]).forEach(s=>{s.usage==="used"&&(d.length>0&&d.push(o(p.exports.Fragment,{children:o(y,{variant:"body2",component:"span",children:"\u3001"})},`before_${s.module.id}`)),d.push(o(p.exports.Fragment,{children:o(Ut,{arrow:!0,disableFocusListener:!0,title:_e(e,s.module),children:o(y,{variant:"body2",component:"span",children:`${s.module.category}${s.module.categoryNumber}`})})},s.module.id)))})}),f($,{children:[f(b,{spacing:1,direction:l?"column":"row",alignItems:l?"flex-start":"center",justifyContent:"end",flexWrap:"wrap",children:[o(A,{sx:{flexGrow:1},children:f(y,{variant:"body2",color:"text.secondary",children:["\u30B7\u30B9\u30C6\u30E0\uFF1A",d]})}),!r.static&&o(A,{sx:{display:"flex",alignContent:"end"},children:o(E,{variant:"outlined",size:"small",startIcon:o(Ve,{}),sx:{whiteSpace:"nowrap"},onClick:m,children:"\u30B7\u30B9\u30C6\u30E0\u3092\u63DB\u88C5"})})]}),h&&o(ro,{shipId:e,reinforcement:t,moduleSelection:r,myListOnly:a,onChange:i,onClose:C})]})},Be=p.exports.memo(Kn),de=n=>{const{shipSelections:e,showCost:t,showReinforcement:r,showHangar:a,shipWarnings:i,carrierShipId:u,myListOnly:l,onChangeShipCount:h,onChangeCarriedShipCount:c,onOpenAddCarriedShips:m,onChangeModule:C}=n;return o(b,{spacing:1,children:e==null?void 0:e.map(d=>{var v,s;return o(I,{variant:"outlined",children:o(A,{p:1,children:f(b,{spacing:1,children:[o(Be,{shipDefinition:d.shipDefinition,count:d.count,maxCount:d.maxCount,reinforcement:d.reinforcement,showCost:t,showReinforcement:r,carrierShipId:u,onChangeShipCount:h,onChangeCarriedShipCount:c,shipWarning:i[me(d.shipDefinition.id,d.reinforcement)]}),d.moduleSelection&&C&&o(ao,{shipId:d.shipDefinition.id,reinforcement:d.reinforcement,moduleSelection:d.moduleSelection,myListOnly:l,onChange:C}),a&&d.carrierCapabilities.canCarry&&f(b,{spacing:1,children:[o(Qn,{shipSelection:d,onOpenAddCarriedShips:m}),(v=d.carriedShips)==null?void 0:v.map(F=>{var g;return o(Be,{shipDefinition:F.shipDefinition,count:F.count,maxCount:F.shipDefinition.operationLimit,reinforcement:F.reinforcement,carrierShipId:d.shipDefinition.id,showCost:!1,showReinforcement:!1,onChangeCarriedShipCount:c,shipWarning:i[me(F.shipDefinition.id,d.reinforcement)]},`${d.shipDefinition.id}_${F.shipDefinition.id}_${(g=F.reinforcement)!=null?g:"initial"}`)})]})]})})},`${d.shipDefinition.id}_${(s=d.reinforcement)!=null?s:"initial"}`)})})},io=n=>{const{dialogData:e,shipWarnings:t,myListOnly:r,onCancel:a,onApply:i,onChangeShipCount:u}=n,[l,h]=p.exports.useState(!1),[c,m]=p.exports.useState(()=>{const d=Pe();return e.filter&&typeof d[e.filter]=="boolean"?{...d,[e.filter]:!0}:d}),C=p.exports.useMemo(()=>Hn(c,e),[c,e]);return p.exports.useEffect(()=>{const d=setTimeout(()=>{h(!0)},0);return()=>{clearTimeout(d)}},[]),o(ae,{title:f(b,{spacing:1,direction:"row",justifyContent:"space-between",alignItems:"center",children:[o(y,{variant:"h6",children:uo(e.reinforcement)}),e.reinforcement===null?f("div",{children:[o(y,{variant:"body1",component:"span",children:"\u6307\u4EE4Pt\uFF1A"}),o(y,{variant:"body1",component:"span",sx:{color:e.fleetSetup.totalCost>e.fleetSetup.maxCost?"red":void 0},children:o("strong",{children:`${e.fleetSetup.totalCost} / ${e.fleetSetup.maxCost}`})})]}):f("div",{children:[o(y,{variant:"body1",component:"span",children:"\u5897\u63F4\uFF1A"}),o(y,{variant:"body1",component:"span",sx:{color:e.fleetSetup.totalReinforcementCount>e.fleetSetup.maxReinforcement?"red":void 0},children:o("strong",{children:`${e.fleetSetup.totalReinforcementCount} / ${e.fleetSetup.maxReinforcement}`})})]})]}),content:f(b,{spacing:2,children:[o(y,{variant:"body2",children:so(e.reinforcement)}),o("div",{children:o(He,{filter:c,shipTypes:[S.CARRIER,S.AUXILIARY,S.BATTLE_CRUISER,S.CRUISER,S.DESTROYER,S.FRIGATE],onChange:m,popperProps:{disablePortal:!1,placement:"bottom-start",style:{zIndex:1300}}})}),C.fleetSetup.ships.length===0&&o(Ge,{severity:"info",children:"\u8A72\u5F53\u3059\u308B\u8266\u8239\u304C\u3042\u308A\u307E\u305B\u3093\u3002"}),l?o(de,{shipSelections:C.fleetSetup.ships,showCost:!C.reinforcement,showReinforcement:!1,showHangar:!1,shipWarnings:t,carrierShipId:null,myListOnly:r,onChangeShipCount:u}):f(b,{spacing:1,children:[o(k,{variant:"rectangular",height:90}),o(k,{variant:"rectangular",animation:"wave",height:90}),o(k,{variant:"rectangular",height:90}),o(k,{variant:"rectangular",animation:"wave",height:90}),o(k,{variant:"rectangular",height:90})]})]}),actions:f($,{children:[o(E,{variant:"outlined",onClick:a,children:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),o(E,{variant:"contained",onClick:i,children:"\uFF2F\uFF2B"})]}),onClose:a})};function uo(n){switch(n){case"ally":case"ally2":case"ally3":case"self":return"\u5897\u63F4\u3092\u8FFD\u52A0";default:return"\u8266\u8239\u3092\u8FFD\u52A0"}}function so(n){switch(n){case"ally":return"\u30E6\u30CB\u30AA\u30F3\u30E1\u30F3\u30D0\u30FC\uFF21\u304B\u3089\u9001\u3089\u308C\u308B\u5897\u63F4\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002";case"ally2":return"\u30E6\u30CB\u30AA\u30F3\u30E1\u30F3\u30D0\u30FC\uFF22\u304B\u3089\u9001\u3089\u308C\u308B\u5897\u63F4\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002";case"ally3":return"\u30E6\u30CB\u30AA\u30F3\u30E1\u30F3\u30D0\u30FC\uFF23\u304B\u3089\u9001\u3089\u308C\u308B\u5897\u63F4\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002";case"self":return"\u81EA\u8EAB\u306E\u57FA\u5730\u304B\u3089\u9001\u308B\u5897\u63F4\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8239\u306F\u30DE\u30A4\u30EA\u30B9\u30C8\u3067\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002";default:return"\u8266\u8239\u3092\u901A\u5E38\u914D\u5099\u3057\u307E\u3059\u3002\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8239\u306F\u30DE\u30A4\u30EA\u30B9\u30C8\u3067\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002"}}function lo(n,e,t,r){const a=t.ships.find(l=>l.shipDefinition.id===n&&l.reinforcement===e);if(!a)throw new Error("Invalid carrier");const i={};a.carriedShips.forEach(l=>{i[`${l.shipDefinition.id}_${l.reinforcement}`]=!0});const u=co(a,Me,e,t.myListOnly,r);return{carrierShipId:n,reinforcement:e,shipSelections:u.flatMap(l=>i[`${l.id}_${e}`]?[]:[Oe({shipDefinition:l,usedModules:null,count:0,reinforcement:e,maxReinforcement:t.maxReinforcement,temporary:!0})]),filter:null}}function co(n,e,t,r,a){const i=e.filter(u=>{switch(u.type){case S.CORVETTE:return n.carrierCapabilities.carryCorvette>0;case S.FIGHTER:switch(u.subType){case O.LARGE_FIGHTER:return n.carrierCapabilities.carryUpToLargeFighter>0;case O.MEDIUM_FIGHTER:return n.carrierCapabilities.carryUpToMediumFighter>0||n.carrierCapabilities.carryUpToLargeFighter>0;case O.SMALL_FIGHTER:return n.carrierCapabilities.carryUpToSmallFighter>0||n.carrierCapabilities.carryUpToMediumFighter>0||n.carrierCapabilities.carryUpToLargeFighter>0}}return!1});return(t==null?void 0:t.includes("ally"))||!r?i:i.filter(u=>Ie(u.id,a))}function Ee(n,e){return{...e,ships:e.ships.map(t=>t.shipDefinition.id!==n.carrierShipId||t.reinforcement!==n.reinforcement?t:{...t,carriedShips:[...t.carriedShips,...n.shipSelections.filter(r=>r.count>0).map(r=>Ot({shipId:r.shipDefinition.id,count:r.count,reinforcement:n.reinforcement}))]})}}function po(n,e){let t=e;return Object.keys(n).filter(r=>n[r]).forEach(r=>{switch(r){case S.CORVETTE:case S.FIGHTER:{t={...t,shipSelections:t.shipSelections.filter(a=>a.shipDefinition.type===r)};break}}}),t}const ho=n=>{const{userSettings:e,fleetSetup:t,setFleetSetup:r}=n,[a,i]=p.exports.useState(null),u=p.exports.useCallback((C,d)=>{i(lo(C,d,t,e))},[t,e]),l=p.exports.useCallback(()=>{i(null)},[]),h=p.exports.useCallback(()=>{a&&(r(Ee(a,t)),i(null))},[a,t,r]),c=p.exports.useCallback((C,d,v)=>{i(s=>s?{...s,shipSelections:s.shipSelections.map(F=>F.shipDefinition.id!==C||F.reinforcement!==v?F:{...F,count:d})}:null)},[e]),m=p.exports.useMemo(()=>{if(!a)return{};const C=Ee(a,t);return re(C)},[a,t]);return{dialogData:a,shipWarnings:m,open:u,cancel:l,apply:h,setShipCount:c}},fo=n=>{const{dialogData:e,shipWarnings:t,myListOnly:r,onCancel:a,onApply:i,onChangeShipCount:u}=n,[l,h]=p.exports.useState(!1),[c,m]=p.exports.useState(()=>{const s=Pe();return e.filter&&typeof s[e.filter]=="boolean"?{...s,[e.filter]:!0}:s}),C=p.exports.useMemo(()=>po(c,e),[c,e]);p.exports.useEffect(()=>{const s=setTimeout(()=>{h(!0)},0);return()=>{clearTimeout(s)}},[]);const d=!!e.shipSelections.find(s=>s.shipDefinition.type===S.CORVETTE),v=!!e.shipSelections.find(s=>s.shipDefinition.type===S.FIGHTER);return o(ae,{title:"\u8266\u8F09\u6A5F\u3092\u8FFD\u52A0",content:f(b,{spacing:2,children:[o(y,{variant:"body2",children:"\u8266\u8F09\u6A5F\u3092\u914D\u5099\u3057\u307E\u3059\u3002\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8F09\u6A5F\u306F\u30DE\u30A4\u30EA\u30B9\u30C8\u3067\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002"}),d&&v&&o("div",{children:o(He,{filter:c,shipTypes:[S.CORVETTE,S.FIGHTER],shipRows:[],onChange:m,popperProps:{disablePortal:!1,placement:"bottom-start",style:{zIndex:1300}}})}),C.shipSelections.length===0&&o(Ge,{severity:"info",children:"\u8A72\u5F53\u3059\u308B\u8266\u8F09\u6A5F\u304C\u3042\u308A\u307E\u305B\u3093\u3002"}),l?o(de,{shipSelections:C.shipSelections,showCost:!1,showReinforcement:!1,showHangar:!1,shipWarnings:t,carrierShipId:null,myListOnly:r,onChangeShipCount:u}):f(b,{spacing:1,children:[o(k,{variant:"rectangular",height:90}),o(k,{variant:"rectangular",animation:"wave",height:90}),o(k,{variant:"rectangular",height:90}),o(k,{variant:"rectangular",animation:"wave",height:90}),o(k,{variant:"rectangular",height:90})]})]}),actions:f($,{children:[o(E,{variant:"outlined",onClick:a,children:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),o(E,{variant:"contained",onClick:i,children:"\uFF2F\uFF2B"})]}),onClose:a})},Eo=()=>{const n=$e(),{fleetKey:e}=Ct(),t=J(),r=Z(t.breakpoints.up("lg")),a=p.exports.useMemo(()=>yt(),[]),[i,u]=p.exports.useState(!1),{fleetSetup:l,errors:h,shipWarnings:c,setFleetSetup:m,setShipCount:C,setCarriedShipCount:d,setModule:v,save:s,reset:F}=_n({initialFleetKey:e}),{dialogData:g,shipWarnings:x,open:R,cancel:w,apply:L,setShipCount:qe}=jn({userSettings:a,fleetSetup:l,setFleetSetup:m}),{dialogData:pe,shipWarnings:Ye,open:Xe,cancel:Ke,apply:Je,setShipCount:Ze}=ho({userSettings:a,fleetSetup:l,setFleetSetup:m}),Qe=p.exports.useMemo(()=>Gt(l.ships),[l.ships]),[Q,et]=p.exports.useState(Fe.GROUP_BY_ROW_SORT_BY_TYPE_AND_NAME),ee=p.exports.useMemo(()=>Pt(Q,l),[l,Q]),tt=()=>{n(`/fleetSetup/${l.key}`)},nt=()=>{Object.keys(h).length>0||(s(),n(`/fleetSetup/${l.key}`))},ot=()=>{u(!1)},rt=()=>{u(!0)},at=()=>{u(!1),F()},P=r&&ee.groupedBy===Fe.GROUP_BY_ROW_SORT_BY_TYPE_AND_NAME?"row":"column",it=P==="row"?4:2;return f($,{children:[o(xt,{currentRoute:"/fleetSetup"}),o(In,{grouping:Q,onChangeGrouping:et,onSave:nt,onCancel:tt,onReset:rt,onOpenAddShips:R,saveDisabled:Object.keys(h).length>0}),o(bt,{disableContainer:P==="row",children:o(A,{p:1,sx:{marginBottom:"60px"},children:f(b,{spacing:1,children:[o(wn,{fleetSetup:l,onChange:m,errors:h,columnCount:it}),o(b,{spacing:1,direction:P,children:ee.groups.map(M=>o(I,{sx:{width:P==="row"?`${100/ee.groups.length}%`:void 0},children:o(A,{p:1,children:f(b,{spacing:1,children:[f(b,{spacing:1,direction:"row",alignItems:"center",sx:{width:"100%"},children:[o(A,{sx:{flexGrow:1},children:o(y,{variant:"body1",children:`${M.name}${M.count>0?`\uFF08${M.count}\u96BB\uFF09`:""}`})}),o(Ue,{filter:M.id,onOpenAddShips:R,buttonProps:{size:"small"}})]}),M.ships.length>0&&o(de,{shipSelections:M.ships,onChangeShipCount:C,onChangeCarriedShipCount:d,onOpenAddCarriedShips:Xe,onChangeModule:v,showCost:!0,showReinforcement:!0,showHangar:!0,shipWarnings:c,carrierShipId:null,myListOnly:l.myListOnly})]})})},M.id))})]})})}),o(Ln,{fleetSetup:l,fleetShipCount:Qe}),g&&o(io,{dialogData:g,shipWarnings:x,myListOnly:l.myListOnly,onCancel:w,onApply:L,onChangeShipCount:qe}),pe&&o(fo,{dialogData:pe,shipWarnings:Ye,myListOnly:l.myListOnly,onCancel:Ke,onApply:Je,onChangeShipCount:Ze}),i&&o(At,{title:"\u521D\u671F\u5316",question:"\u8266\u968A\u3092\u521D\u671F\u72B6\u614B\u306B\u623B\u3057\u307E\u3059\u304B\uFF1F",cancelText:"\u30AD\u30E3\u30F3\u30BB\u30EB",confirmText:"\u521D\u671F\u5316",onCancel:ot,onConfirm:at})]})};export{Eo as FleetSetupEditPage,Eo as default};
