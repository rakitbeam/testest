import{j as e,a as p,F as _,B as O,t,r as h,S as y,T as g,P as C,J as R,K as M,L as $,W as E,u as F,a_ as B,a$ as W,Y as f,a2 as k,b,k as q,b0 as w,c as U,b1 as Y,aE as z,aF as j,aH as H,p as K,o as G}from"./index.36b31c50.js";import{d as J,a as Q,b as V,C as X}from"./ConfirmationDialog.34a29bba.js";import{S as Z,a as ee,s as ie,c as te}from"./ShipTypeFilterButton.cca7933c.js";import{A as se}from"./ActionBar.79de57f9.js";import{d as ne}from"./Settings.eaf73c27.js";import{T as I,a as v}from"./ToggleButtonGroup.c8e625b5.js";import{N as ae,P as re}from"./PageContent.cd72ab05.js";import{P as oe}from"./PageFooter.85f37e24.js";import"./ResponsiveDialog.6326ffce.js";import"./domUtils.f1d59317.js";import"./useFormControl.c197e665.js";const ce=r=>{const{shipFilter:i,onCancel:s,onSave:n,onReset:l,onFilter:d}=r;return e(se,{left:o=>e(Z,{filter:i,onChange:d,researchManufacturer:!1,researchStrategyTypes:!1,researchTacticTypes:!1,buttonProps:o},"filter"),right:o=>p(_,{children:[e(O,{variant:"outlined",startIcon:e(J,{}),onClick:l,...o,children:t("button.initialize")},"reset"),e(O,{variant:"outlined",startIcon:e(Q,{}),onClick:s,...o,children:t("button.cancel")},"cancel"),e(O,{variant:"contained",startIcon:e(V,{}),onClick:n,...o,children:t("button.save")},"save")]})})},P=r=>{const{label:i,options:s,possession:n,onChange:l}=r,[d,o]=h.exports.useState(n),[u,S]=h.exports.useTransition(),c=(m,a)=>{o(a===null?C.UNDEFINED:Number(a))};return h.exports.useEffect(()=>{S(()=>{l(d)})},[d,l]),p(y,{spacing:1,direction:"row",alignItems:"center",children:[e(g,{variant:"body2",children:i}),p(I,{size:"small",color:"primary",value:`${d}`,exclusive:!0,onChange:c,children:[e(v,{value:`${C.POSSESSED}`,children:s[0]}),e(v,{value:`${C.NOT_POSSESSED}`,children:s[1]})]})]})};var x={},le=M.exports;Object.defineProperty(x,"__esModule",{value:!0});var A=x.default=void 0,de=le(R),pe=$,he=(0,de.default)((0,pe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");A=x.default=he;const N=r=>{const{wish:i,onChange:s}=r,[n,l]=h.exports.useState(i),[d,o]=h.exports.useTransition(),u=(S,c)=>{l(c===null||c==="clear"?E.UNDEFINED:Number(c))};return h.exports.useEffect(()=>{o(()=>{s(n)})},[n,s]),p(y,{spacing:1,direction:"row",alignItems:"center",children:[e(g,{variant:"body2",children:t("myList.wantOption")}),p(I,{size:"small",color:"primary",value:`${n}`,exclusive:!0,onChange:u,children:[e(v,{value:`${E.WANTED}`,children:t("myList.wantOptionYes")}),e(v,{value:`${E.NOT_WANTED}`,children:t("myList.wantOptionNo")}),n!==E.UNDEFINED&&e(v,{value:"clear",children:e(A,{})})]})]})},ue=r=>{const{ship:i,...s}=r,{userSettings:n,setShipPossession:l,setShipWish:d,setModulePossession:o,setModuleWish:u}=F(),S=B(i.id,n),c=W(i.id,n),m=h.exports.useMemo(()=>c!==E.UNDEFINED?!0:i.source===f.TECH_FILE&&S===C.NOT_POSSESSED,[i,S,c]);return e(k,{elevation:2,...s,children:e(b,{p:1,children:p(y,{spacing:3,children:[e(g,{variant:"h6",children:q(i)}),e(P,{label:Se(i),options:fe(i),possession:S,onChange:a=>l(i.id,a)}),m&&e(N,{wish:c,onChange:a=>d(i.id,a)}),(i.source===f.TECH_FILE||i.source===f.STARTER_SHIP)&&S===C.POSSESSED&&i.modules&&i.modules.filter(a=>!a.defaultModule).map(a=>{const T=w(a.id,i.id,n);return e(b,{pl:2,children:p(y,{spacing:3,children:[e(g,{variant:"h6",children:`${a.category}${a.categoryNumber} ${U(i.id,a)}`}),e(P,{label:t("myList.additionalModuleAcquiredOption"),options:[t("myList.blueprintAcquiredOptionYes"),t("myList.blueprintAcquiredOptionNo")],possession:T,onChange:L=>o(a.id,i.id,L)}),T===C.NOT_POSSESSED&&e(N,{wish:Y(a.id,i.id,n),onChange:L=>u(a.id,i.id,L)})]})},a.id)})]})})})};function Se(r){switch(r.source){case f.CITY_TRADE:return t("myList.shipBoughtOption");case f.DOCK_EFFECT:return t("myList.dockingEffectBlueprintAcquiredOption");default:return t("myList.blueprintAcquiredOption")}}function fe(r){switch(r.source){case f.CITY_TRADE:return[t("myList.shipBoughtOptionYes"),t("myList.shipBoughtOptionNo")];default:return[t("myList.blueprintAcquiredOptionYes"),t("myList.blueprintAcquiredOptionNo")]}}const D=r=>{const{id:i,title:s,shipDefinitions:n,initiallyOpened:l,preRenderDetails:d=!1}=r,[o,u]=h.exports.useState(l);return p(z,{expanded:o,onChange:(c,m)=>{u(m)},children:[e(j,{id:i,expandIcon:e(ne,{}),children:e(g,{variant:"body1",children:s})}),e(H,{children:(o||d)&&e(y,{spacing:3,children:n.map(c=>e(ue,{ship:c},c.id))})})]})},ge=r=>{const{shipFilter:i}=r,s=h.exports.useMemo(()=>{const n=ee(K,i);return ie(n)},[i]);return p(y,{spacing:1,children:[e("div",{children:e(D,{id:"tech-file-ships",title:t("shipSource.techFile"),initiallyOpened:!1,preRenderDetails:!0,shipDefinitions:s[f.TECH_FILE]})}),e("div",{children:e(D,{id:"city-trade-ships",title:t("shipSource.cityTrade"),initiallyOpened:!1,shipDefinitions:s[f.CITY_TRADE]})}),e("div",{children:e(D,{id:"dock-effect-ships",title:t("shipSource.dockEffect"),initiallyOpened:!1,shipDefinitions:s[f.DOCK_EFFECT]})}),e("div",{children:e(D,{id:"starter-ships",title:t("shipSource.starterShip"),initiallyOpened:!1,shipDefinitions:s[f.STARTER_SHIP]})})]})},Pe=()=>{const r=G(),{saveUserSettings:i,restoreUserSettings:s,resetUserSettings:n}=F(),[l,d]=h.exports.useState(te),[o,u]=h.exports.useState(!1);h.exports.useEffect(()=>()=>{s()},[s]);const S=()=>{s(),r("/myList")},c=()=>{i(),r("/myList")},m=()=>{u(!1)},a=()=>{u(!0)},T=()=>{u(!1),n()};return p(_,{children:[e(ae,{currentRoute:"/myList"}),e(ce,{shipFilter:l,onCancel:S,onReset:a,onSave:c,onFilter:d}),e(re,{children:p(b,{p:1,children:[p(y,{pt:1,pb:2,spacing:2,children:[e(g,{variant:"body2",children:t("myListConfig.pageDescription1")}),e(g,{variant:"body2",children:t("myListConfig.pageDescription2")}),e(g,{variant:"body2",children:t("myListConfig.pageDescription3")})]}),e(ge,{shipFilter:l})]})}),o&&e(X,{title:t("button.initialize"),question:t("myList.confirmInitialize"),cancelText:t("button.cancel"),confirmText:t("button.initialize"),onCancel:m,onConfirm:T}),e(oe,{})]})};export{Pe as MyListEditPage,Pe as default};
