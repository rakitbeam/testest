import{A as be,C as me,r as c,J as G,j as P,k as a,H as Ut,bq as Ht,ah as gt,ap as jt,av as et,at as We,a_ as V,aY as Wt,I as ge,a$ as ie,ar as Be,_ as b,D as W,K as X,aV as Bt,aU as qt,N as xt,b7 as _t,O as xe,ai as Mt,G as Ce,L as Nt,bP as Yt,aa as dt,w as oe,q as ee,P as Se,Q as ye,R as Re,B as se,t as H,F as J,ax as Kt,T as _e}from"./index.39323e70.js";import{I as tt,N as Xt,P as Gt}from"./PageContent.a8c52da6.js";import{P as Zt}from"./PageFooter.8598986d.js";import{d as Qt}from"./Clear.143cd622.js";import{A as Jt}from"./ActionBar.e93e98c7.js";import{b as Ct,d as eo,a as to}from"./Download.d9f70569.js";import{B as oo}from"./ButtonMenu.ac347408.js";import{d as no}from"./Delete.e6f2ae51.js";import{R as ao}from"./ResponsiveDialog.336248ff.js";import"./domUtils.80bda63c.js";import"./Popper.060f9f2f.js";const ro={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};var lo=ro;function we(e){return be("MuiSlider",e)}const io=me("MuiSlider",["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel"]);var qe=io;const so=e=>{const{open:t}=e;return{offset:G(t&&qe.valueLabelOpen),circle:qe.valueLabelCircle,label:qe.valueLabelLabel}};function Pt(e){const{children:t,className:n,value:o}=e,r=so(e);return c.exports.cloneElement(t,{className:G(t.props.className)},P(c.exports.Fragment,{children:[t.props.children,a("span",{className:G(r.offset,n),"aria-hidden":!0,children:a("span",{className:r.circle,children:a("span",{className:r.label,children:o})})})]}))}const co=2;function Tt(e,t){return e-t}function $e(e,t,n){return e==null?t:Math.min(Math.max(t,e),n)}function St(e,t){var n;const{index:o}=(n=e.reduce((r,s,m)=>{const i=Math.abs(t-s);return r===null||i<r.distance||i===r.distance?{distance:i,index:m}:r},null))!=null?n:{};return o}function Fe(e,t){if(t.current!==void 0&&e.changedTouches){const n=e;for(let o=0;o<n.changedTouches.length;o+=1){const r=n.changedTouches[o];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ye(e,t,n){return(e-t)*100/(n-t)}function uo(e,t,n){return(n-t)*e+t}function po(e){if(Math.abs(e)<1){const n=e.toExponential().split("e-"),o=n[0].split(".")[1];return(o?o.length:0)+parseInt(n[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function mo(e,t,n){const o=Math.round((e-n)/t)*t+n;return Number(o.toFixed(po(t)))}function yt({values:e,newValue:t,index:n}){const o=e.slice();return o[n]=t,o.sort(Tt)}function Ue({sliderRef:e,activeIndex:t,setActive:n}){var o,r;const s=We(e.current);if(!((o=e.current)!=null&&o.contains(s.activeElement))||Number(s==null||(r=s.activeElement)==null?void 0:r.getAttribute("data-index"))!==t){var m;(m=e.current)==null||m.querySelector(`[type="range"][data-index="${t}"]`).focus()}n&&n(t)}const fo={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},vo=e=>e;let He;function ot(){return He===void 0&&(typeof CSS!="undefined"&&typeof CSS.supports=="function"?He=CSS.supports("touch-action","none"):He=!0),He}function ho(e){const{"aria-labelledby":t,defaultValue:n,disabled:o=!1,disableSwap:r=!1,isRtl:s=!1,marks:m=!1,max:i=100,min:u=0,name:x,onChange:d,onChangeCommitted:h,orientation:C="horizontal",ref:$,scale:v=vo,step:p=1,tabIndex:g,value:_}=e,w=c.exports.useRef(),[T,M]=c.exports.useState(-1),[A,j]=c.exports.useState(-1),[Z,te]=c.exports.useState(!1),Y=c.exports.useRef(0),[E,O]=Ut({controlled:_,default:n!=null?n:u,name:"Slider"}),U=d&&((l,f,S)=>{const R=l.nativeEvent||l,y=new R.constructor(R.type,R);Object.defineProperty(y,"target",{writable:!0,value:{value:f,name:x}}),d(y,f,S)}),z=Array.isArray(E);let L=z?E.slice().sort(Tt):[E];L=L.map(l=>$e(l,u,i));const fe=m===!0&&p!==null?[...Array(Math.floor((i-u)/p)+1)].map((l,f)=>({value:u+p*f})):m||[],D=fe.map(l=>l.value),{isFocusVisibleRef:ue,onBlur:Xe,onFocus:Ge,ref:Ze}=Ht(),[Me,ne]=c.exports.useState(-1),B=c.exports.useRef(),Ne=gt(Ze,B),Ie=gt($,Ne),Qe=l=>f=>{var S;const R=Number(f.currentTarget.getAttribute("data-index"));Ge(f),ue.current===!0&&ne(R),j(R),l==null||(S=l.onFocus)==null||S.call(l,f)},ke=l=>f=>{var S;Xe(f),ue.current===!1&&ne(-1),j(-1),l==null||(S=l.onBlur)==null||S.call(l,f)};jt(()=>{if(o&&B.current.contains(document.activeElement)){var l;(l=document.activeElement)==null||l.blur()}},[o]),o&&T!==-1&&M(-1),o&&Me!==-1&&ne(-1);const Q=l=>f=>{var S;(S=l.onChange)==null||S.call(l,f);const R=Number(f.currentTarget.getAttribute("data-index")),y=L[R],I=D.indexOf(y);let N=f.target.valueAsNumber;if(fe&&p==null&&(N=N<y?D[I-1]:D[I+1]),N=$e(N,u,i),fe&&p==null){const K=D.indexOf(L[R]);N=N<L[R]?D[K-1]:D[K+1]}if(z){r&&(N=$e(N,L[R-1]||-1/0,L[R+1]||1/0));const K=N;N=yt({values:L,newValue:N,index:R});let k=R;r||(k=N.indexOf(K)),Ue({sliderRef:B,activeIndex:k})}O(N),ne(R),U&&U(f,N,R),h&&h(f,N)},Pe=c.exports.useRef();let ve=C;s&&C==="horizontal"&&(ve+="-reverse");const q=({finger:l,move:f=!1})=>{const{current:S}=B,{width:R,height:y,bottom:I,left:N}=S.getBoundingClientRect();let K;ve.indexOf("vertical")===0?K=(I-l.y)/y:K=(l.x-N)/R,ve.indexOf("-reverse")!==-1&&(K=1-K);let k;if(k=uo(K,u,i),p)k=mo(k,p,u);else{const Je=St(D,k);k=D[Je]}k=$e(k,u,i);let le=0;if(z){f?le=Pe.current:le=St(L,k),r&&(k=$e(k,L[le-1]||-1/0,L[le+1]||1/0));const Je=k;k=yt({values:L,newValue:k,index:le}),r&&f||(le=k.indexOf(Je),Pe.current=le)}return{newValue:k,activeIndex:le}},ae=et(l=>{const f=Fe(l,w);if(!f)return;if(Y.current+=1,l.type==="mousemove"&&l.buttons===0){re(l);return}const{newValue:S,activeIndex:R}=q({finger:f,move:!0});Ue({sliderRef:B,activeIndex:R,setActive:M}),O(S),!Z&&Y.current>co&&te(!0),U&&S!==E&&U(l,S,R)}),re=et(l=>{const f=Fe(l,w);if(te(!1),!f)return;const{newValue:S}=q({finger:f,move:!0});M(-1),l.type==="touchend"&&j(-1),h&&h(l,S),w.current=void 0,pe()}),he=et(l=>{if(o)return;ot()||l.preventDefault();const f=l.changedTouches[0];f!=null&&(w.current=f.identifier);const S=Fe(l,w);if(S!==!1){const{newValue:y,activeIndex:I}=q({finger:S});Ue({sliderRef:B,activeIndex:I,setActive:M}),O(y),U&&U(l,y,I)}Y.current=0;const R=We(B.current);R.addEventListener("touchmove",ae),R.addEventListener("touchend",re)}),pe=c.exports.useCallback(()=>{const l=We(B.current);l.removeEventListener("mousemove",ae),l.removeEventListener("mouseup",re),l.removeEventListener("touchmove",ae),l.removeEventListener("touchend",re)},[re,ae]);c.exports.useEffect(()=>{const{current:l}=B;return l.addEventListener("touchstart",he,{passive:ot()}),()=>{l.removeEventListener("touchstart",he,{passive:ot()}),pe()}},[pe,he]),c.exports.useEffect(()=>{o&&pe()},[o,pe]);const Te=l=>f=>{var S;if((S=l.onMouseDown)==null||S.call(l,f),o||f.defaultPrevented||f.button!==0)return;f.preventDefault();const R=Fe(f,w);if(R!==!1){const{newValue:I,activeIndex:N}=q({finger:R});Ue({sliderRef:B,activeIndex:N,setActive:M}),O(I),U&&U(f,I,N)}Y.current=0;const y=We(B.current);y.addEventListener("mousemove",ae),y.addEventListener("mouseup",re)},Ae=Ye(z?L[0]:u,u,i),Ee=Ye(L[L.length-1],u,i)-Ae,Le=(l={})=>{const f={onMouseDown:Te(l||{})},S=V({},l,f);return V({ref:Ie},S)},Oe=l=>f=>{var S;(S=l.onMouseOver)==null||S.call(l,f);const R=Number(f.currentTarget.getAttribute("data-index"));j(R)},De=l=>f=>{var S;(S=l.onMouseLeave)==null||S.call(l,f),j(-1)};return{active:T,axis:ve,axisProps:fo,dragging:Z,focusedThumbIndex:Me,getHiddenInputProps:(l={})=>{var f;const S={onChange:Q(l||{}),onFocus:Qe(l||{}),onBlur:ke(l||{})},R=V({},l,S);return V({tabIndex:g,"aria-labelledby":t,"aria-orientation":C,"aria-valuemax":v(i),"aria-valuemin":v(u),name:x,type:"range",min:e.min,max:e.max,step:(f=e.step)!=null?f:void 0,disabled:o},R,{style:V({},lo,{direction:s?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:Le,getThumbProps:(l={})=>{const f={onMouseOver:Oe(l||{}),onMouseLeave:De(l||{})};return V({},l,f)},marks:fe,open:A,range:z,trackLeap:Ee,trackOffset:Ae,values:L}}const bo=["aria-label","aria-valuetext","className","component","classes","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","scale","step","tabIndex","track","value","valueLabelDisplay","valueLabelFormat","isRtl","components","componentsProps"],Rt=e=>e,go=e=>{const{disabled:t,dragging:n,marked:o,orientation:r,track:s,classes:m}=e;return ge({root:["root",t&&"disabled",n&&"dragging",o&&"marked",r==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]},we,m)},xo=({children:e})=>e,Co=c.exports.forwardRef(function(t,n){var o,r,s,m,i,u,x;const{"aria-label":d,"aria-valuetext":h,className:C,component:$,classes:v,disableSwap:p=!1,disabled:g=!1,getAriaLabel:_,getAriaValueText:w,marks:T=!1,max:M=100,min:A=0,orientation:j="horizontal",scale:Z=Rt,step:te=1,track:Y="normal",valueLabelDisplay:E="off",valueLabelFormat:O=Rt,isRtl:U=!1,components:z={},componentsProps:L={}}=t,fe=Wt(t,bo),D=V({},t,{marks:T,classes:v,disabled:g,isRtl:U,max:M,min:A,orientation:j,scale:Z,step:te,track:Y,valueLabelDisplay:E,valueLabelFormat:O}),{axisProps:ue,getRootProps:Xe,getHiddenInputProps:Ge,getThumbProps:Ze,open:Me,active:ne,axis:B,range:Ne,focusedThumbIndex:Ie,dragging:Qe,marks:ke,values:Q,trackOffset:Pe,trackLeap:ve}=ho(V({},D,{ref:n}));D.marked=ke.length>0&&ke.some(y=>y.label),D.dragging=Qe,D.focusedThumbIndex=Ie;const q=go(D),ae=(o=$!=null?$:z.Root)!=null?o:"span",re=ie({elementType:ae,getSlotProps:Xe,externalSlotProps:L.root,externalForwardedProps:fe,ownerState:D,className:[q.root,C]}),he=(r=z.Rail)!=null?r:"span",pe=ie({elementType:he,externalSlotProps:L.rail,ownerState:D,className:q.rail}),Te=(s=z.Track)!=null?s:"span",Ae=ie({elementType:Te,externalSlotProps:L.track,additionalProps:{style:V({},ue[B].offset(Pe),ue[B].leap(ve))},ownerState:D,className:q.track}),Ee=(m=z.Thumb)!=null?m:"span",Le=ie({elementType:Ee,getSlotProps:Ze,externalSlotProps:L.thumb,ownerState:D}),Oe=(i=z.ValueLabel)!=null?i:Pt,De=ie({elementType:Oe,externalSlotProps:L.valueLabel,ownerState:D}),ze=(u=z.Mark)!=null?u:"span",Ve=ie({elementType:ze,externalSlotProps:L.mark,ownerState:D,className:q.mark}),l=(x=z.MarkLabel)!=null?x:"span",f=ie({elementType:l,externalSlotProps:L.markLabel,ownerState:D}),S=z.Input||"input",R=ie({elementType:S,getSlotProps:Ge,externalSlotProps:L.input,ownerState:D});return P(ae,V({},re,{children:[a(he,V({},pe)),a(Te,V({},Ae)),ke.filter(y=>y.value>=A&&y.value<=M).map((y,I)=>{const N=Ye(y.value,A,M),K=ue[B].offset(N);let k;return Y===!1?k=Q.indexOf(y.value)!==-1:k=Y==="normal"&&(Ne?y.value>=Q[0]&&y.value<=Q[Q.length-1]:y.value<=Q[0])||Y==="inverted"&&(Ne?y.value<=Q[0]||y.value>=Q[Q.length-1]:y.value>=Q[0]),P(c.exports.Fragment,{children:[a(ze,V({"data-index":I},Ve,!Be(ze)&&{markActive:k},{style:V({},K,Ve.style),className:G(Ve.className,k&&q.markActive)})),y.label!=null?a(l,V({"aria-hidden":!0,"data-index":I},f,!Be(l)&&{markLabelActive:k},{style:V({},K,f.style),className:G(q.markLabel,f.className,k&&q.markLabelActive),children:y.label})):null]},y.value)}),Q.map((y,I)=>{const N=Ye(y,A,M),K=ue[B].offset(N),k=E==="off"?xo:Oe;return a(c.exports.Fragment,{children:a(k,V({},!Be(k)&&{valueLabelFormat:O,valueLabelDisplay:E,value:typeof O=="function"?O(Z(y),I):O,index:I,open:Me===I||ne===I||E==="on",disabled:g},De,{className:G(q.valueLabel,De.className),children:a(Ee,V({"data-index":I,"data-focusvisible":Ie===I},Le,{className:G(q.thumb,Le.className,ne===I&&q.active,Ie===I&&q.focusVisible),style:V({},K,{pointerEvents:p&&ne!==I?"none":void 0},Le.style),children:a(S,V({"data-index":I,"aria-label":_?_(I):d,"aria-valuenow":Z(y),"aria-valuetext":w?w(Z(y),I):h,value:Q[I]},R))}))}))},I)})]}))});var So=Co;const yo=e=>!e||!Be(e);var je=yo;const Ro=["component","components","componentsProps","color","size"],ce=b({},qe,me("MuiSlider",["colorPrimary","colorSecondary","thumbColorPrimary","thumbColorSecondary","sizeSmall","thumbSizeSmall"])),Io=W("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${X(n.color)}`],n.size!=="medium"&&t[`size${X(n.size)}`],n.marked&&t.marked,n.orientation==="vertical"&&t.vertical,n.track==="inverted"&&t.trackInverted,n.track===!1&&t.trackFalse]}})(({theme:e,ownerState:t})=>b({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(e.vars||e).palette[t.color].main,WebkitTapHighlightColor:"transparent"},t.orientation==="horizontal"&&b({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},t.size==="small"&&{height:2},t.marked&&{marginBottom:20}),t.orientation==="vertical"&&b({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},t.size==="small"&&{width:2},t.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${ce.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${ce.dragging}`]:{[`& .${ce.thumb}, & .${ce.track}`]:{transition:"none"}}})),ko=W("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})(({ownerState:e})=>b({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},e.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track==="inverted"&&{opacity:1})),Lo=W("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?Bt(e.palette[t.color].main,.62):qt(e.palette[t.color].main,.5);return b({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{border:"none"},t.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track===!1&&{display:"none"},t.track==="inverted"&&{backgroundColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n,borderColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n})}),$o=W("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${X(n.color)}`],n.size!=="medium"&&t[`thumbSize${X(n.size)}`]]}})(({theme:e,ownerState:t})=>b({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{width:12,height:12},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":b({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},t.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${ce.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:xt(e.palette[t.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${ce.active}`]:{boxShadow:`0px 0px 0px 14px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:xt(e.palette[t.color].main,.16)}`},[`&.${ce.disabled}`]:{"&:hover":{boxShadow:"none"}}})),wo=W(Pt,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e,ownerState:t})=>b({[`&.${ce.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),transform:"translateY(-100%) scale(0)",position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},t.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},t.orientation==="vertical"&&{right:"30px",top:"24px",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",right:"-20%",top:"25%"}},t.size==="small"&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),_o=W("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>_t(e)&&e!=="markActive",overridesResolver:(e,t)=>t.mark})(({theme:e,ownerState:t,markActive:n})=>b({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8})),Mo=W("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>_t(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e,ownerState:t,markLabelActive:n})=>b({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},t.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},t.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(e.vars||e).palette.text.primary})),No=e=>{const{color:t,size:n,classes:o={}}=e;return b({},o,{root:G(o.root,we(`color${X(t)}`),o[`color${X(t)}`],n&&[we(`size${X(n)}`),o[`size${X(n)}`]]),thumb:G(o.thumb,we(`thumbColor${X(t)}`),o[`thumbColor${X(t)}`],n&&[we(`thumbSize${X(n)}`),o[`thumbSize${X(n)}`]])})},Po=c.exports.forwardRef(function(t,n){var o,r,s,m;const i=xe({props:t,name:"MuiSlider"}),x=Mt().direction==="rtl",{component:d="span",components:h={},componentsProps:C={},color:$="primary",size:v="medium"}=i,p=Ce(i,Ro),g=b({},i,{color:$,size:v}),_=No(g);return a(So,b({},p,{isRtl:x,components:b({Root:Io,Rail:ko,Track:Lo,Thumb:$o,ValueLabel:wo,Mark:_o,MarkLabel:Mo},h),componentsProps:b({},C,{root:b({},C.root,je(h.Root)&&{as:d,ownerState:b({},(o=C.root)==null?void 0:o.ownerState,{color:$,size:v})}),thumb:b({},C.thumb,je(h.Thumb)&&{ownerState:b({},(r=C.thumb)==null?void 0:r.ownerState,{color:$,size:v})}),track:b({},C.track,je(h.Track)&&{ownerState:b({},(s=C.track)==null?void 0:s.ownerState,{color:$,size:v})}),valueLabel:b({},C.valueLabel,je(h.ValueLabel)&&{ownerState:b({},(m=C.valueLabel)==null?void 0:m.ownerState,{color:$,size:v})})}),classes:_,ref:n}))});var It=Po;const To=c.exports.createContext({});var Ke=To;const Ao=c.exports.createContext({});var ut=Ao;function Eo(e){return be("MuiStep",e)}me("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Oo=["active","children","className","component","completed","disabled","expanded","index","last"],Do=e=>{const{classes:t,orientation:n,alternativeLabel:o,completed:r}=e;return ge({root:["root",n,o&&"alternativeLabel",r&&"completed"]},Eo,t)},zo=W("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>b({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),Vo=c.exports.forwardRef(function(t,n){const o=xe({props:t,name:"MuiStep"}),{active:r,children:s,className:m,component:i="div",completed:u,disabled:x,expanded:d=!1,index:h,last:C}=o,$=Ce(o,Oo),{activeStep:v,connector:p,alternativeLabel:g,orientation:_,nonLinear:w}=c.exports.useContext(Ke);let[T=!1,M=!1,A=!1]=[r,u,x];v===h?T=r!==void 0?r:!0:!w&&v>h?M=u!==void 0?u:!0:!w&&v<h&&(A=x!==void 0?x:!0);const j=c.exports.useMemo(()=>({index:h,last:C,expanded:d,icon:h+1,active:T,completed:M,disabled:A}),[h,C,d,T,M,A]),Z=b({},o,{active:T,orientation:_,alternativeLabel:g,completed:M,disabled:A,expanded:d,component:i}),te=Do(Z),Y=P(zo,b({as:i,className:G(te.root,m),ref:n,ownerState:Z},$,{children:[p&&g&&h!==0?p:null,s]}));return a(ut.Provider,{value:j,children:p&&!g&&h!==0?P(c.exports.Fragment,{children:[p,Y]}):Y})});var nt=Vo,Fo=Nt(a("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Uo=Nt(a("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Ho(e){return be("MuiStepIcon",e)}const jo=me("MuiStepIcon",["root","active","completed","error","text"]);var at=jo,kt;const Wo=["active","className","completed","error","icon"],Bo=e=>{const{classes:t,active:n,completed:o,error:r}=e;return ge({root:["root",n&&"active",o&&"completed",r&&"error"],text:["text"]},Ho,t)},rt=W(Yt,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${at.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${at.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${at.error}`]:{color:(e.vars||e).palette.error.main}})),qo=W("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),Yo=c.exports.forwardRef(function(t,n){const o=xe({props:t,name:"MuiStepIcon"}),{active:r=!1,className:s,completed:m=!1,error:i=!1,icon:u}=o,x=Ce(o,Wo),d=b({},o,{active:r,completed:m,error:i}),h=Bo(d);if(typeof u=="number"||typeof u=="string"){const C=G(s,h.root);return i?a(rt,b({as:Uo,className:C,ref:n,ownerState:d},x)):m?a(rt,b({as:Fo,className:C,ref:n,ownerState:d},x)):P(rt,b({className:C,ref:n,ownerState:d},x,{children:[kt||(kt=a("circle",{cx:"12",cy:"12",r:"12"})),a(qo,{className:h.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:d,children:u})]}))}return u});var Ko=Yo;function Xo(e){return be("MuiStepLabel",e)}const Go=me("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]);var de=Go;const Zo=["children","className","componentsProps","error","icon","optional","StepIconComponent","StepIconProps"],Qo=e=>{const{classes:t,orientation:n,active:o,completed:r,error:s,disabled:m,alternativeLabel:i}=e;return ge({root:["root",n,s&&"error",m&&"disabled",i&&"alternativeLabel"],label:["label",o&&"active",r&&"completed",s&&"error",m&&"disabled",i&&"alternativeLabel"],iconContainer:["iconContainer",o&&"active",r&&"completed",s&&"error",m&&"disabled",i&&"alternativeLabel"],labelContainer:["labelContainer",i&&"alternativeLabel"]},Xo,t)},Jo=W("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})(({ownerState:e})=>b({display:"flex",alignItems:"center",[`&.${de.alternativeLabel}`]:{flexDirection:"column"},[`&.${de.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),en=W("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>b({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${de.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${de.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${de.alternativeLabel}`]:{marginTop:16},[`&.${de.error}`]:{color:(e.vars||e).palette.error.main}})),tn=W("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${de.alternativeLabel}`]:{paddingRight:0}})),on=W("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${de.alternativeLabel}`]:{textAlign:"center"}})),At=c.exports.forwardRef(function(t,n){const o=xe({props:t,name:"MuiStepLabel"}),{children:r,className:s,componentsProps:m={},error:i=!1,icon:u,optional:x,StepIconComponent:d,StepIconProps:h}=o,C=Ce(o,Zo),{alternativeLabel:$,orientation:v}=c.exports.useContext(Ke),{active:p,disabled:g,completed:_,icon:w}=c.exports.useContext(ut),T=u||w;let M=d;T&&!M&&(M=Ko);const A=b({},o,{active:p,alternativeLabel:$,completed:_,disabled:g,error:i,orientation:v}),j=Qo(A);return P(Jo,b({className:G(j.root,s),ref:n,ownerState:A},C,{children:[T||M?a(tn,{className:j.iconContainer,ownerState:A,children:a(M,b({completed:_,active:p,error:i,icon:T},h))}):null,P(on,{className:j.labelContainer,ownerState:A,children:[r?a(en,b({className:j.label,ownerState:A},m.label,{children:r})):null,x]})]}))});At.muiName="StepLabel";var lt=At;function nn(e){return be("MuiStepConnector",e)}me("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const an=["className"],rn=e=>{const{classes:t,orientation:n,alternativeLabel:o,active:r,completed:s,disabled:m}=e,i={root:["root",n,o&&"alternativeLabel",r&&"active",s&&"completed",m&&"disabled"],line:["line",`line${X(n)}`]};return ge(i,nn,t)},ln=W("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>b({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:8+4,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),sn=W("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t[`line${X(n.orientation)}`]]}})(({ownerState:e,theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return b({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:n},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),cn=c.exports.forwardRef(function(t,n){const o=xe({props:t,name:"MuiStepConnector"}),{className:r}=o,s=Ce(o,an),{alternativeLabel:m,orientation:i="horizontal"}=c.exports.useContext(Ke),{active:u,disabled:x,completed:d}=c.exports.useContext(ut),h=b({},o,{alternativeLabel:m,orientation:i,active:u,completed:d,disabled:x}),C=rn(h);return a(ln,b({className:G(C.root,r),ref:n,ownerState:h},s,{children:a(sn,{className:C.line,ownerState:h})}))});var dn=cn;function un(e){return be("MuiStepper",e)}me("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const pn=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],mn=e=>{const{orientation:t,alternativeLabel:n,classes:o}=e;return ge({root:["root",t,n&&"alternativeLabel"]},un,o)},fn=W("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel]}})(({ownerState:e})=>b({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),vn=a(dn,{}),hn=c.exports.forwardRef(function(t,n){const o=xe({props:t,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:s=!1,children:m,className:i,component:u="div",connector:x=vn,nonLinear:d=!1,orientation:h="horizontal"}=o,C=Ce(o,pn),$=b({},o,{alternativeLabel:s,orientation:h,component:u}),v=mn($),p=c.exports.Children.toArray(m).filter(Boolean),g=p.map((w,T)=>c.exports.cloneElement(w,b({index:T,last:T+1===p.length},w.props))),_=c.exports.useMemo(()=>({activeStep:r,alternativeLabel:s,connector:x,nonLinear:d,orientation:h}),[r,s,x,d,h]);return a(Ke.Provider,{value:_,children:a(fn,b({as:u,ownerState:$,className:G(v.root,i),ref:n},C,{children:g}))})});var bn=hn;const gn=e=>{var j,Z,te,Y;const{index:t,total:n,imageSelection:o,onUpdateImage:r,setModifier:s,getModifier:m}=e,i=m(o.id),u=c.exports.useRef(null),x=c.exports.useRef(null),d=c.exports.useRef(null),h=c.exports.useRef(null);c.exports.useEffect(()=>{const E=()=>{r({...o,canvasInfo:null})};return window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}},[o,r]),c.exports.useEffect(()=>{var O,U;const E=(U=(O=h.current)==null?void 0:O.offsetWidth)!=null?U:null;!o.canvasInfo&&E!==null&&r({...o,canvasInfo:{width:E,height:E*o.imageInfo.aspectRatio,scale:E/o.imageInfo.width}})},[o,r,h]);const C=c.exports.useCallback((E,O)=>{if(d.current!==null&&typeof O=="number"){const{maxHeight:U}=d.current.style;if(typeof U=="undefined"||o.canvasInfo===null)return;const z=o.canvasInfo.height*(1-O/100),L=o.canvasInfo.height-z;d.current.style.height=`${z}px`,d.current.style.borderTop="1px dashed yellow",s(o.id,{cutTop:L/o.canvasInfo.height})}},[d,s,o]),$=c.exports.useCallback((E,O)=>{if(d.current!==null&&typeof O=="number"){const{maxHeight:U}=d.current.style;if(typeof U=="undefined"||o.canvasInfo===null)return;const z=Number(U.replace("px",""))*(O/100);d.current.style.marginTop=`-${z}px`,s(o.id,{moveUp:z/o.canvasInfo.height})}},[d,s,o]),v=c.exports.useCallback(()=>{var E,O;(O=(E=d.current)==null?void 0:E.style)!=null&&O.borderTop&&(d.current.style.borderTop="none")},[d]),p=(Z=(j=o.canvasInfo)==null?void 0:j.width)!=null?Z:Number.NaN,g=(Y=(te=o.canvasInfo)==null?void 0:te.height)!=null?Y:Number.NaN,_=Number.isFinite(p)?`${p}px`:"100%",w=Number.isFinite(g)?`${g}px`:"auto",T=Number.isFinite(g)?`-${Math.round(g/2)}px`:"0",M={0:`${p*.35}px`,1:`${p*.05}px`,2:`${p*.15}px`,3:`${p*.25}px`},A={0:`${p*(1-.35)-30}px`,1:`${p*(1-.05)-30}px`,2:`${p*(1-.15)-30}px`,3:`${p*(1-.25)-30}px`};return a(dt,{children:P(oe,{direction:"row",children:[P(ee,{sx:{position:"relative",alignSelf:"stretch"},children:[a(ee,{ref:u,pb:4,sx:{position:"absolute",top:T,left:M[`${t%4}`],height:w},children:t>0&&a(It,{sx:{'& input[type="range"]':{WebkitAppearance:"slider-vertical"}},orientation:"vertical",defaultValue:i.cutTop*100,onChange:C,onChangeCommitted:v,onKeyDown:Lt,valueLabelDisplay:"off"})}),a(ee,{ref:x,pb:4,sx:{position:"absolute",top:T,left:A[`${t%4}`],height:w},children:t>0&&a(It,{sx:{'& input[type="range"]':{WebkitAppearance:"slider-vertical"}},orientation:"vertical",defaultValue:i.moveUp*100,onChange:$,valueLabelDisplay:"off",onKeyDown:Lt,color:"secondary"})})]}),a(ee,{ref:d,sx:{flexGrow:1,overflow:"hidden",display:"flex",marginTop:0,borderTop:"none"},style:{height:t>0&&o.canvasInfo!==null?o.canvasInfo.height*(1-i.cutTop):"auto",maxHeight:w,marginTop:t>0&&o.canvasInfo!==null?`-${i.moveUp*o.canvasInfo.height}px`:"0"},children:a(oe,{direction:"row",alignItems:"end",children:a(ee,{ref:h,sx:{width:_,height:w},children:a("img",{width:_,height:w,src:o.dataUrl,alt:o.file.name})})})})]})})};function Lt(e){(e.key==="ArrowLeft"||e.key==="ArrowRight")&&e.preventDefault()}const xn=e=>{const{imageSelections:t,onUpdateImage:n,setModifier:o,getModifier:r}=e,s=c.exports.useMemo(()=>t.map(m=>{var i,u;return(u=(i=m.canvasInfo)==null?void 0:i.height)!=null?u:null}).reduce((m,i)=>m!==null&&i!==null?m+i:null,0),[t]);return a(ee,{sx:{height:s!==null?`${s}px`:"auto"},children:t.map((m,i)=>a(gn,{imageSelection:m,index:i,total:t.length,onUpdateImage:n,setModifier:o,getModifier:r},m.id))})};async function Cn(e){const t=await Promise.allSettled([...e].map(yn)),n=[];return t.forEach(o=>{switch(o.status){case"fulfilled":{n.push(o.value);break}case"rejected":{console.error("Failed to read image",o.reason);break}}}),n}let Sn=0;async function yn(e){return new Promise((t,n)=>{try{const o=new FileReader;o.onload=()=>{const r=new Image;r.onload=()=>{t({id:`image${Sn++}`,file:e,dataUrl:`${o.result}`,imageInfo:{aspectRatio:r.height/r.width,width:r.width,height:r.height},canvasInfo:null})},r.onerror=s=>{n(s)},r.src=`${o.result}`},o.readAsDataURL(e)}catch(o){n(o)}})}function Rn(e){return[...e].sort((t,n)=>t.file.name.localeCompare(n.file.name,"en"))}function In(e){const t={},n=[];return e.forEach(o=>{t[o.file.name]||(t[o.file.name]=!0,n.push(o))}),n}function $t(e={}){return{cutTop:0,moveUp:0,...e}}const kn=()=>{const[e,t]=c.exports.useState([]),[n,o]=c.exports.useState(!1),r=c.exports.useRef({}),s=c.exports.useCallback(v=>{o(!0),(async()=>{try{const p=await Cn(v);t(g=>In([...g,...Rn(p)])),o(!1)}catch(p){console.error(p),o(!1)}})()},[]),m=c.exports.useCallback(v=>{t(p=>p.map(g=>g.id!==v.id?g:v))},[]),i=c.exports.useCallback(v=>{t(p=>{const g=[...p];return g[v]=p[v-1],g[v-1]=p[v],v-1===0&&delete r.current[g[v-1].id],g})},[]),u=c.exports.useCallback(v=>{t(p=>{const g=[...p];return g[v]=p[v+1],g[v+1]=p[v],v===0&&delete r.current[g[v].id],g})},[]),x=c.exports.useCallback(v=>{t(p=>{const g=[...p],_=g.splice(v,1);return r.current[_[0].id]&&delete r.current[_[0].id],g})},[r]),d=c.exports.useCallback(()=>{t([])},[]),h=c.exports.useCallback((v,p)=>{var _;const g=(_=r.current[v])!=null?_:$t();r.current[v]={...g,...p}},[r]),C=c.exports.useCallback(v=>{var p;return(p=r.current[v])!=null?p:$t()},[r]),$=c.exports.useCallback(()=>{r.current={}},[r]);return{imageSelections:e,loading:n,addFiles:s,updateImageSelection:m,moveImageUp:i,moveImageDown:u,removeImage:x,clearImages:d,setModifier:h,getModifier:C,clearModifier:$}};var pt={},Ln=ye.exports;Object.defineProperty(pt,"__esModule",{value:!0});var st=pt.default=void 0,$n=Ln(Se),wn=Re,_n=(0,$n.default)((0,wn.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore");st=pt.default=_n;var mt={},Mn=ye.exports;Object.defineProperty(mt,"__esModule",{value:!0});var ct=mt.default=void 0,Nn=Mn(Se),Pn=Re,Tn=(0,Nn.default)((0,Pn.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");ct=mt.default=Tn;var ft={},An=ye.exports;Object.defineProperty(ft,"__esModule",{value:!0});var Et=ft.default=void 0,En=An(Se),On=Re,Dn=(0,En.default)((0,On.jsx)("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4 2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}),"Collections");Et=ft.default=Dn;var vt={},zn=ye.exports;Object.defineProperty(vt,"__esModule",{value:!0});var Ot=vt.default=void 0,Vn=zn(Se),Fn=Re,Un=(0,Vn.default)((0,Fn.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"}),"AddPhotoAlternate");Ot=vt.default=Un;var F=(e=>(e[e.CHOOSE_AND_REORDER=0]="CHOOSE_AND_REORDER",e[e.CUT_AND_MOVE=1]="CUT_AND_MOVE",e[e.PREVIEW_AND_CONFIRM=2]="PREVIEW_AND_CONFIRM",e))(F||{});const Hn=e=>{const{resultCanvas:t,buttonProps:n,disabled:o}=e,r=c.exports.useCallback(s=>{if(t!==null)switch(s){case"copyToClipboard":{jn(t);break}case"downloadFile":{wt(t);break}}},[t]);return Wn?a(J,{children:a(oo,{icon:a(eo,{}),text:H("button.share"),value:void 0,buttonProps:n,onClick:r,options:[{key:"copyToClipboard",icon:a(to,{}),text:H("button.copyToClipboard"),value:"copyToClipboard"},{key:"downloadFile",icon:a(Ct,{}),text:H("button.downloadFile"),value:"downloadFile"}]})}):a(se,{variant:"outlined",disabled:o||t===null,startIcon:a(Ct,{}),onClick:()=>{t!==null&&wt(t)},...n,children:H("button.downloadFile")})};function wt(e){var t=document.createElement("a");t.download="image.jpg",t.href=e.toDataURL("image/jpeg"),t.click()}async function jn(e){return new Promise((t,n)=>{e.toBlob(o=>{if(o!==null)try{navigator.clipboard.write([new ClipboardItem({[o.type]:Promise.resolve(o)})]),t()}catch(r){n(r)}},"image/png")})}function Wn(){return!!navigator.clipboard&&!!ClipboardItem}const Bn=e=>{const{mode:t,imageSelections:n,disabled:o,resultCanvas:r,onAddFiles:s,onClearImages:m,onChangeMode:i}=e,u=c.exports.useRef(null),x=c.exports.useCallback(()=>{var d,h;(h=(d=u.current)==null?void 0:d.files)!=null&&h.length&&(s(u.current.files),u.current.value="")},[s,u]);return a(Jt,{left:d=>P(J,{children:[t===F.CHOOSE_AND_REORDER&&P(J,{children:[P(se,{variant:"outlined",startIcon:n.length>0?a(Ot,{}):a(Et,{}),component:"label",children:[n.length>0?H("button.addImages"):H("button.chooseImages"),a("input",{hidden:!0,ref:u,type:"file",id:"imageUpload",name:"imageUpload",multiple:!0,disabled:o,accept:"image/jpeg",onChange:x})]},"addFiles"),n.length>0&&a(se,{variant:"outlined",onClick:m,startIcon:a(Qt,{}),disabled:o,...d,children:H("button.reset")},"clearImages")]}),t===F.CUT_AND_MOVE&&a(J,{children:a(se,{variant:"outlined",onClick:()=>i(F.CHOOSE_AND_REORDER),startIcon:a(st,{}),...d,children:H("button.back")},"backToChooseAndReorder")}),t===F.PREVIEW_AND_CONFIRM&&a(J,{children:a(se,{variant:"outlined",onClick:()=>i(F.CUT_AND_MOVE),startIcon:a(st,{}),...d,children:H("button.back")},"backToCutAndMove")})]}),right:d=>P(J,{children:[t===F.CHOOSE_AND_REORDER&&a(J,{children:a(se,{variant:"outlined",onClick:()=>i(F.CUT_AND_MOVE),endIcon:a(ct,{}),disabled:n.length<2,...d,children:H("button.next")},"nextToCutAndMove")}),t===F.CUT_AND_MOVE&&a(J,{children:a(se,{variant:"outlined",onClick:()=>i(F.PREVIEW_AND_CONFIRM),endIcon:a(ct,{}),...d,children:H("button.next")},"nextToPreviewAndConfirm")}),t===F.PREVIEW_AND_CONFIRM&&a(J,{children:a(Hn,{resultCanvas:r,disabled:o||r===null,buttonProps:d},"share")})]})})};var ht={},qn=ye.exports;Object.defineProperty(ht,"__esModule",{value:!0});var Dt=ht.default=void 0,Yn=qn(Se),Kn=Re,Xn=(0,Yn.default)((0,Kn.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");Dt=ht.default=Xn;var bt={},Gn=ye.exports;Object.defineProperty(bt,"__esModule",{value:!0});var zt=bt.default=void 0,Zn=Gn(Se),Qn=Re,Jn=(0,Zn.default)((0,Qn.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");zt=bt.default=Jn;const ea=e=>{const{imageSelections:t,onMoveUp:n,onMoveDown:o,onRemove:r}=e,[s,m]=c.exports.useState(null),i=Mt(),u=Kt(i.breakpoints.down("sm"));return t.length===0?null:P(dt,{children:[a(ee,{p:1,children:a(oe,{spacing:1,children:t.map((x,d)=>P(c.exports.Fragment,{children:[a(_e,{variant:"caption",color:"text.secondary",noWrap:!0,children:x.file.name}),P(oe,{direction:"row",spacing:1,alignItems:"center",sx:{minHeight:"90px"},children:[a(ee,{sx:{flexGrow:1,position:"relative"},children:a("img",{src:x.dataUrl,alt:x.file.name,style:{width:"100%",cursor:u?"zoom-in":"default"},onClick:u?()=>m(x):void 0})}),P(oe,{spacing:1,children:[a("div",{children:a(tt,{onClick:()=>n(d),disabled:d===0,children:a(Dt,{})})}),a("div",{children:a(tt,{onClick:()=>o(d),disabled:d===t.length-1,children:a(zt,{})})})]}),a("div",{children:a(tt,{onClick:()=>r(d),children:a(no,{})})})]})]},x.id))})}),s!==null&&a(ao,{title:a(_e,{variant:"body2",noWrap:!0,children:s.file.name}),content:a(oe,{spacing:1,children:a("div",{children:a("img",{src:s.dataUrl,alt:s.file.name,style:{scale:.5}})})}),onClose:()=>m(null),actions:a(se,{variant:"outlined",onClick:()=>m(null),children:H("button.close")},"share"),maxWidth:!1})]})},it=e=>{const{step:t}=e;return a(dt,{children:a(ee,{p:1,children:P(bn,{activeStep:t,children:[a(nt,{children:a(lt,{children:H("imageEdit.chooseAndOrder")})}),a(nt,{children:a(lt,{children:H("imageEdit.cutAndMove")})}),a(nt,{children:a(lt,{children:H("imageEdit.previewAndConfirm")})})]})})})},ta=e=>{const{imageSelections:t,getModifier:n,onResultReady:o}=e,r=c.exports.useRef(null);return c.exports.useEffect(()=>{if(r.current===null)return;const s=r.current,m=s.getContext("2d");if(m===null)return;s.width=oa(t),s.height=na(t,n);let i=0;(async()=>{for(const u of t)await new Promise(x=>{const d=new Image;d.onload=()=>{const h=Vt(u,n),C=u.imageInfo.height-h,$=Ft(u,n),v=0,p=C,g=u.imageInfo.width,_=h,w=0,T=i-$,M=u.imageInfo.width,A=h;m.drawImage(d,v,p,g,_,w,T,M,A),i=T+A,x()},d.src=u.dataUrl});o(s)})()},[r,t,n,o]),a("div",{children:a("canvas",{ref:r,style:{width:"100%"}})})};function oa(e){return Math.max(...e.map(t=>t.imageInfo.width))}function na(e,t){return e.map(n=>Vt(n,t)-Ft(n,t)).reduce((n,o)=>n+o,0)}function Vt(e,t){return console.log(t(e.id).cutTop),Math.round(e.imageInfo.height*(1-t(e.id).cutTop))}function Ft(e,t){return Math.round(e.imageInfo.height*t(e.id).moveUp)}const va=()=>{const[e,t]=c.exports.useState(F.CHOOSE_AND_REORDER),[n,o]=c.exports.useState(null),{imageSelections:r,loading:s,addFiles:m,updateImageSelection:i,moveImageUp:u,moveImageDown:x,removeImage:d,clearImages:h,setModifier:C,getModifier:$,clearModifier:v}=kn(),p=c.exports.useCallback(g=>{g===F.CHOOSE_AND_REORDER&&v(),o(null),t(g),window.scrollTo(0,0)},[]);return P(J,{children:[a(Xt,{currentRoute:"/imageEdit"}),a(Bn,{mode:e,imageSelections:r,disabled:s,resultCanvas:n,onAddFiles:m,onClearImages:h,onChangeMode:p}),a(Gt,{children:P(ee,{p:1,children:[e===F.CHOOSE_AND_REORDER&&P(oe,{pt:1,pb:1,spacing:2,children:[a(_e,{variant:"body2",children:H("imageEdit.pageDescription1")}),a(_e,{variant:"body2",children:H("imageEdit.pageDescription2")}),a(it,{step:F.CHOOSE_AND_REORDER}),a(ea,{imageSelections:r,onMoveUp:u,onMoveDown:x,onRemove:d})]}),e===F.CUT_AND_MOVE&&P(oe,{pt:1,pb:1,spacing:2,children:[a(it,{step:F.CUT_AND_MOVE}),a(_e,{variant:"body2",children:H("imageEdit.cutAndMoveDescription")}),a(xn,{imageSelections:r,onUpdateImage:i,setModifier:C,getModifier:$})]}),e===F.PREVIEW_AND_CONFIRM&&P(oe,{pt:1,pb:1,spacing:2,children:[a(it,{step:F.PREVIEW_AND_CONFIRM}),a(ta,{imageSelections:r,getModifier:$,onResultReady:o})]})]})}),a(Zt,{})]})};export{va as default};
