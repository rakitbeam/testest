var W=Object.defineProperty,q=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var j=(s,t,n)=>t in s?W(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,p=(s,t)=>{for(var n in t||(t={}))N.call(t,n)&&j(s,n,t[n]);if(v)for(var n of v(t))b.call(t,n)&&j(s,n,t[n]);return s},C=(s,t)=>q(s,z(t));var O=(s,t)=>{var n={};for(var u in s)N.call(s,u)&&t.indexOf(u)<0&&(n[u]=s[u]);if(s!=null&&v)for(var u of v(s))t.indexOf(u)<0&&b.call(s,u)&&(n[u]=s[u]);return n};import{j as e,b as l,F as k,h as T,S as B,T as S,ac as P,ad as F,v as H,w as Y,x as K,r as d,A as G,c as L,a1 as J,a2 as Q,a3 as V,t as X}from"./vendor.612e55a5.js";import{d as Z,a as ee,b as te,C as se}from"./ConfirmationDialog.2bb0bdf0.js";import{S as ne,a as ue,s as ie,c as ae}from"./ShipTypeFilterButton.183365a7.js";import{A as re}from"./ActionBar.a2802d77.js";import{g as oe,j as g,d as le}from"./index.bcaed592.js";import{a as ce,g as U,s as de,c as he}from"./userSettingsUtils.304511e2.js";import{d as pe}from"./Settings.1acf125d.js";import{P as m,W as A}from"./WishState.3db35fd5.js";import{N as Ce,C as ge}from"./NavigationBar.e91af742.js";import"./ResponsiveDialog.418e97d8.js";import"./domUtils.e9df6b0f.js";const Se=s=>{const{shipFilter:t,onCancel:n,onSave:u,onReset:r,onFilter:a}=s;return e(re,{left:i=>e(ne,{filter:t,onChange:a,researchManufacturer:!1,researchStrategyTypes:!1,researchTacticTypes:!1,buttonProps:i},"filter"),right:i=>l(k,{children:[e(T,C(p({variant:"outlined",startIcon:e(Z,{}),onClick:r},i),{children:"\u521D\u671F\u5316"}),"reset"),e(T,C(p({variant:"outlined",startIcon:e(ee,{}),onClick:n},i),{children:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),"cancel"),e(T,C(p({variant:"contained",startIcon:e(te,{}),onClick:u},i),{children:"\u4FDD\u5B58"}),"save")]})})},fe=s=>{const{shipId:t,possession:n,onChange:u}=s,r=(i,o)=>{u(t,o===null?m.UNDEFINED:Number(o))},a=oe(t).source;return l(B,{spacing:1,direction:"row",alignItems:"center",children:[e(S,{variant:"body1",children:Be(a)}),l(P,{size:"small",color:"primary",value:`${n}`,exclusive:!0,onChange:r,children:[e(F,{value:`${m.POSSESSED}`,children:$(a,!0)}),e(F,{value:`${m.NOT_POSSESSED}`,children:$(a,!1)})]})]})};function Be(s){switch(s){case g.CITY_TRADE:return"\u90FD\u5E02\u3067";case g.DOCK_EFFECT:return"\u81E8\u6642\u8A2D\u8A08\u56F3\u3092";default:return"\u8A2D\u8A08\u56F3\u3092"}}function $(s,t){switch(s){case g.CITY_TRADE:return t?"\u8CB7\u3063\u3066\u3044\u308B":"\u8CB7\u3063\u3066\u3044\u306A\u3044";default:return t?"\u6301\u3063\u3066\u3044\u308B":"\u6301\u3063\u3066\u3044\u306A\u3044"}}var x={},De=Y.exports;Object.defineProperty(x,"__esModule",{value:!0});var M=x.default=void 0,Ee=De(H),Fe=K,me=(0,Ee.default)((0,Fe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");M=x.default=me;const Ae=s=>{const{shipId:t,wish:n,onChange:u}=s,r=(a,i)=>{u(t,i===null||i==="clear"?A.UNDEFINED:Number(i))};return l(B,{spacing:1,direction:"row",alignItems:"center",children:[e(S,{variant:"body1",children:"\u30AC\u30C1\u30E3\u3067"}),l(P,{size:"small",color:"primary",value:`${n}`,exclusive:!0,onChange:r,children:[e(F,{value:`${A.WANTED}`,children:"\u51FA\u3066\u6B32\u3057\u3044"}),e(F,{value:`${A.NOT_WANTED}`,children:"\u51FA\u3066\u6B32\u3057\u304F\u306A\u3044"}),n!==A.UNDEFINED&&e(F,{value:"clear",children:e(M,{})})]})]})},ve=s=>{const o=s,{ship:t,possession:n,wish:u,onPossessionChange:r,onWishChange:a}=o,i=O(o,["ship","possession","wish","onPossessionChange","onWishChange"]);return e(G,C(p({elevation:2},i),{children:e(L,{p:1,children:l(B,{spacing:3,children:[e(S,{variant:"h6",children:t.name}),e(fe,{shipId:t.id,possession:n,onChange:r}),n===m.NOT_POSSESSED&&t.source===g.TECH_FILE&&e(Ae,{shipId:t.id,wish:u,onChange:a})]})})}))},ye=d.exports.memo(ve),y=s=>{const{id:t,title:n,shipDefinitions:u,shipSetting:r,initiallyOpened:a,handlePossessionChange:i,handleWishChange:o,preRenderDetails:c=!1}=s,[h,I]=d.exports.useState(a);return l(J,{expanded:h,onChange:(f,D)=>{I(D)},children:[e(Q,{id:t,expandIcon:e(pe,{}),children:e(S,{variant:"body1",children:n})}),e(V,{children:(h||c)&&e(B,{spacing:3,children:u.map(f=>{var D,E,R,_;return e(ye,{ship:f,possession:(E=(D=r[f.id])==null?void 0:D.possession)!=null?E:m.UNDEFINED,wish:(_=(R=r[f.id])==null?void 0:R.wish)!=null?_:A.UNDEFINED,onPossessionChange:i,onWishChange:o},f.id)})})})]})},Te=s=>{const{shipSetting:t,shipFilter:n,onShipSettingChange:u}=s,r=d.exports.useMemo(()=>{const o=ue(le,n);return ie(o)},[n]),a=d.exports.useCallback((o,c)=>{u(h=>ce(h,o,c))},[u]),i=d.exports.useCallback((o,c)=>{u(h=>C(p({},h),{[o]:C(p({},h[o]),{wish:c})}))},[u]);return l(B,{spacing:1,children:[e("div",{children:e(y,{id:"tech-file-ships",title:"\u6280\u8853\u30D5\u30A1\u30A4\u30EB\u304B\u3089\u624B\u306B\u5165\u308B\u8266\u8239/\u8A2D\u8A08\u56F3",initiallyOpened:!1,preRenderDetails:!0,shipDefinitions:r[g.TECH_FILE],shipSetting:t,handlePossessionChange:a,handleWishChange:i})}),e("div",{children:e(y,{id:"city-trade-ships",title:"\u90FD\u5E02\u3067\u8CB7\u3048\u308B\u8266\u8239",initiallyOpened:!1,shipDefinitions:r[g.CITY_TRADE],shipSetting:t,handlePossessionChange:a,handleWishChange:i})}),e("div",{children:e(y,{id:"dock-effect-ships",title:"\u7D50\u5408\u52B9\u679C\u3067\u624B\u306B\u5165\u308B\u8266\u8239/\u81E8\u6642\u8A2D\u8A08\u56F3",initiallyOpened:!1,shipDefinitions:r[g.DOCK_EFFECT],shipSetting:t,handlePossessionChange:a,handleWishChange:i})}),e("div",{children:e(y,{id:"starter-ships",title:"\u521D\u671F\u914D\u5E03\u3067\u624B\u306B\u5165\u308B\u8266\u8239/\u8A2D\u8A08\u56F3",initiallyOpened:!1,shipDefinitions:r[g.STARTER_SHIP],shipSetting:t,handlePossessionChange:a,handleWishChange:i})})]})},$e=()=>{const s=X(),[t,n]=d.exports.useState(U),[u,r]=d.exports.useState(ae),[a,i]=d.exports.useState(t.ships),[o,c]=d.exports.useState(!1);return l(k,{children:[e(Ce,{currentRoute:"/myList"}),e(Se,{shipFilter:u,onCancel:()=>{i(t.ships),s("/myList")},onReset:()=>{c(!0)},onSave:()=>{const E=C(p({},U()),{ships:a});de(E),n(E),s("/myList")},onFilter:r}),e(ge,{children:l(L,{p:1,children:[l(B,{pt:1,pb:2,spacing:2,children:[e(S,{variant:"body2",children:"\u3053\u3053\u3067\u306F\u8266\u8239/\u8A2D\u8A08\u56F3\u306E\u6240\u6709\u72B6\u614B\u3092\u8A2D\u5B9A\u3067\u304D\u307E\u3059\u3002"}),e(S,{variant:"body2",children:"\u5168\u3066\u7D30\u304B\u304F\u8A2D\u5B9A\u3059\u308B\u5FC5\u8981\u306F\u3042\u308A\u307E\u305B\u3093\u3002"}),e(S,{variant:"body2",children:"\u8A2D\u5B9A\u30C7\u30FC\u30BF\u306F\u30D6\u30E9\u30A6\u30B6\u306E\u30ED\u30FC\u30AB\u30EB\u30B9\u30C8\u30EC\u30FC\u30B8\u306B\u4FDD\u5B58\u3055\u308C\u307E\u3059\u3002"})]}),e(Te,{shipSetting:a,shipFilter:u,onShipSettingChange:i})]})}),o&&e(se,{title:"\u521D\u671F\u5316",question:"\u30DE\u30A4\u30EA\u30B9\u30C8\u8A2D\u5B9A\u3092\u521D\u671F\u72B6\u614B\u306B\u623B\u3057\u307E\u3059\u304B\uFF1F",cancelText:"\u30AD\u30E3\u30F3\u30BB\u30EB",confirmText:"\u521D\u671F\u5316",onCancel:()=>{c(!1)},onConfirm:()=>{c(!1),i(he().ships)}})]})};export{$e as MyListEditPage,$e as default};
