import{j as e,a as d,F as g,B as x,t as l,u as v,r as u,g as E,b as F,T as c,c as B,d as j,S as M,e as L,f,h as R,i as b,s as k,k as T,l as N,m as A,n as O,o as I,p as q}from"./index.4c1627a9.js";import{d as U}from"./Settings.688fc412.js";import{d as V,a as W}from"./ContentCopy.acd3ff63.js";import{S as P,c as _,a as z,e as G,b as H,d as K,f as J}from"./ShipTypeFilterButton.9e175de6.js";import{A as Q}from"./ActionBar.4145f370.js";import{C as X,S as Y,c as Z}from"./ShipDataTable.582013c3.js";import{E as ee}from"./ExpandStack.89096ade.js";import{n as te}from"./sorting.c6946657.js";import{R as ie}from"./ResponsiveDialog.0f44d934.js";import{T as se}from"./TextField.2d04e7ef.js";import{N as ae,P as ne}from"./PageContent.458fcd43.js";import{P as oe}from"./PageFooter.a2adf88e.js";import"./domUtils.e3328ef3.js";import"./useFormControl.f57ee12d.js";import"./useTable.aa687cbc.js";import"./Select.e46657bb.js";const re=o=>{const{shipFilter:t,columnConfig:s,onEdit:n,onFilter:a,onShare:h,onColumnConfigChange:p}=o;return e(Q,{left:r=>d(g,{children:[e(X,{columnConfig:s,onChange:p,disableResearchAgreementOptions:!0,buttonProps:r},"columnConfig"),e(P,{filter:t,onChange:a,researchManufacturer:!1,researchStrategyTypes:!1,researchTacticTypes:!1,buttonProps:r},"filter"),e(x,{variant:"outlined",startIcon:e(U,{}),onClick:n,...r,children:l("myList.editMyList")},"edit")]}),right:r=>e(g,{children:e(x,{variant:"outlined",startIcon:e(V,{}),onClick:h,...r,children:l("button.share")},"share")})})},le=o=>{const{ship:t}=o,{userSettings:s}=v(),n=u.exports.useMemo(()=>E(t,s),[t,s]);return n.length===0?null:e(F,{mt:.5,children:n.map(a=>d(c,{variant:"body2",color:"text.secondary",children:[e(c,{variant:"body2",component:"span",color:"text.secondary",sx:{opacity:.5},children:"\u2517 "}),`${a.category}${a.categoryNumber} ${B(t.id,a)}`]},a.id))})},ce=o=>{const{ship:t}=o,{userSettings:s}=v(),n=u.exports.useMemo(()=>j(t,s),[t,s]);return n.length===0?null:e(F,{mt:.5,children:n.map(a=>d(c,{variant:"body2",color:"text.secondary",children:[e(c,{variant:"body2",component:"span",color:"text.secondary",sx:{opacity:.5},children:"\u2517 "}),`${a.category}${a.categoryNumber} ${B(t.id,a)}`]},a.id))})},w=u.exports.memo(Y),pe=o=>{const{shipListState:t,columnConfig:s}=o;return d(M,{spacing:1,children:[e(ee,{expandables:[{id:"possessed-ships",initiallyOpened:!0,summary:e(c,{variant:"body1",children:l("myList.acquiredShipsAndBlueprints")}),details:e(w,{shipDefinitions:t.possessed,columnConfig:s,decorateName:(n,a)=>d(g,{children:[n,e(le,{ship:a})]})})},{id:"wished-ships",initiallyOpened:!1,summary:e(c,{variant:"body1",children:l("label.wantedBlueprints")}),details:e(w,{shipDefinitions:t.wished,columnConfig:s,decorateName:(n,a)=>d(g,{children:[n,e(ce,{ship:a})]})})},{id:"unwished-by-user-ships",initiallyOpened:!1,summary:e(c,{variant:"body1",children:l("label.unwantedBlueprints")}),details:e(w,{shipDefinitions:t.unwishedByUser,columnConfig:s})},{id:"unwished-by-data-ships",initiallyOpened:!1,summary:e(c,{variant:"body1",children:l("myList.unwantedDuplicates")}),details:d(g,{children:[e(w,{shipDefinitions:t.unwishedByData,columnConfig:s}),e(F,{pt:1,children:e(c,{variant:"caption",align:"right",paragraph:!0,children:l("myList.unwantedDuplicatesFootnote")})})]})}]}),e(c,{variant:"caption",align:"right",paragraph:!0,children:l("myList.pageFootnote")})]})};function de(o,t){const s=[],n=[],a=[],h=[],p=[];o.forEach(i=>{switch(i.row){case f.FRONT:{s.push(i);break}case f.MIDDLE:{n.push(i);break}case f.BACK:{a.push(i);break}default:switch(i.type){case b.CORVETTE:{h.push(i);break}case b.FIGHTER:{p.push(i);break}}}});const r=te([(i,m)=>k(i.type,i.subType)-k(m.type,m.subType),(i,m)=>T(i).localeCompare(T(m),N())]);return[l("myList.acquiredShipsAndBlueprints"),[`\u3010${L(f.FRONT)}\u3011`,...s.sort(r).map(i=>S(i,t))].join(`
`),[`\u3010${L(f.MIDDLE)}\u3011`,...n.sort(r).map(i=>S(i,t))].join(`
`),[`\u3010${L(f.BACK)}\u3011`,...a.sort(r).map(i=>S(i,t))].join(`
`),[`\u3010${R(b.CORVETTE)}\u3011`,...h.sort(r).map(i=>S(i,t))].join(`
`),[`\u3010${R(b.FIGHTER)}\u3011`,...p.sort(r).map(i=>S(i,t))].join(`
`)].join(`

`)}function S(o,t){const s=E(o,t);return s.length===0?`\u3000${T(o)}`:[`\u3000${T(o)}`,s.map(n=>`\u3000\u2517 ${n.category}${n.categoryNumber} ${B(o.id,n)}`).join(`
`)].join(`
`)}const he=o=>{const{ships:t,onClose:s}=o,[n,a]=u.exports.useState(!1),{userSettings:h}=v(),[p,r]=u.exports.useState(()=>de(t.possessed,h)),i=()=>{p&&O(p).then(()=>{a(!0)})},m=D=>{r(D.target.value)},C=()=>{s(),a(!1)};return e(ie,{title:l("button.share"),content:d(M,{spacing:1,children:[e(se,{variant:"filled",id:"outlined-multiline-static",multiline:!0,onChange:m,rows:10,defaultValue:p,fullWidth:!0}),!!navigator.clipboard&&e(x,{variant:"outlined",startIcon:n?e(A,{}):e(W,{}),onClick:i,fullWidth:!0,children:l("button.copyToClipboard")})]}),actions:e(x,{variant:"outlined",onClick:C,children:l("button.close")}),onClose:C})},Me=()=>{const o=I(),{userSettings:t}=v(),[s,n]=u.exports.useState(_),[a,h]=u.exports.useState(null),[p,r]=u.exports.useState(()=>Z({name:!0,row:!0,type:!0,cost:!1,operationLimit:!1})),i=u.exports.useMemo(()=>{const y=z(q,s);return{possessed:G(y,t.ships),wished:H(y,t),unwishedByUser:K(y,t.ships),unwishedByData:J(y,t)}},[t,s]),m=()=>{o("/myList/edit")},C=()=>{h(i)},D=()=>{h(null)},$=Object.values(p).filter(y=>typeof y=="boolean"&&y).length>3;return d(g,{children:[e(ae,{currentRoute:"/myList"}),e(re,{shipFilter:s,columnConfig:p,onEdit:m,onFilter:n,onShare:C,onColumnConfigChange:r}),e(ne,{disableContainer:$,children:d(F,{p:1,children:[d(M,{pt:1,pb:2,spacing:2,children:[e(c,{variant:"body2",children:l("myList.pageDescription1")}),e(c,{variant:"body2",children:l("myList.pageDescription2")}),e(c,{variant:"body2",children:l("myList.pageDescription3")})]}),e(pe,{shipListState:i,columnConfig:p})]})}),a&&e(he,{ships:a,onClose:D}),e(oe,{disableContainer:$})]})};export{Me as MyListPage,Me as default};
