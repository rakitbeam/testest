import{J as j,K as z,L as B,t as n,r as p,a as P,F as A,j as l,B as M,a2 as N,b as L,a3 as $,an as V,k as o,l as s,ao as q,O as E,T as D,ap as W,h as G,s as H,e as J,aq as F,ar as Y,as as k,Z,at as R,$ as Q,au as I,a0 as U,av as m,a1 as X,aw as T,ax as ee}from"./index.5abf1b34.js";import{B as re,C as ae,g as ne,L as te}from"./domUtils.fc5866a5.js";import{P as oe}from"./useFormControl.f97c89bf.js";import{G as le,M as ie,a as se,L as ce}from"./PageContent.1bfed528.js";import{C as me}from"./ShipTypeFilterButton.58faf5cd.js";import{u as pe,T as ue}from"./useTable.257323ab.js";var v={},de=z.exports;Object.defineProperty(v,"__esModule",{value:!0});var O=v.default=void 0,he=de(j),ye=B,Ce=(0,he.default)((0,ye.jsx)("path",{d:"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z"}),"ViewColumn");O=v.default=Ce;function Ee(e={}){return{name:!0,type:!1,row:!1,cost:!1,operationLimit:!1,dpmShip:!1,dpmAntiAir:!1,dpmSiege:!1,hp:!1,speed:!1,warpSpeed:!1,dpmShipPerCommandPoint:!1,dpmAntiAirPerCommandPoint:!1,dpmSiegePerCommandPoint:!1,hpPerCommandPoint:!1,source:!1,manufacturer:!1,researchManufacturer:!1,researchStrategyType:!1,researchTacticType:!1,weight:!1,...e}}function fe(e){const{disableResearchAgreementOptions:r}=e;return[{columnKey:"type",name:n("label.shipType")},{columnKey:"row",name:n("label.rowPlacement")},{columnKey:"cost",name:n("label.commandPoints")},{columnKey:"operationLimit",name:n("label.operationLimit")},{columnKey:"dpmShip",name:n("label.antiShipDpm")},{columnKey:"dpmAntiAir",name:n("label.antiAirDpm")},{columnKey:"dpmSiege",name:n("label.siegeDpm")},{columnKey:"hp",name:n("label.hp")},{columnKey:"speed",name:n("label.cruiseSpeed")},{columnKey:"warpSpeed",name:n("label.warpSpeed")},{columnKey:"dpmShipPerCommandPoint",name:n("label.antiShipDpmPerCommandPoint")},{columnKey:"dpmAntiAirPerCommandPoint",name:n("label.antiAirDpmPerCommandPoint")},{columnKey:"dpmSiegePerCommandPoint",name:n("label.siegeDpmPerCommandPoint")},{columnKey:"hpPerCommandPoint",name:n("label.hpPerCommandPoint")},{columnKey:"source",name:n("label.acquirableThrough")},{columnKey:"manufacturer",name:n("label.manufacturer")},...r!==!0?[{columnKey:"researchManufacturer",name:n("label.researchManufacturerColumn")},{columnKey:"researchStrategyType",name:n("label.researchStrategyTypeColumn")},{columnKey:"researchTacticType",name:n("label.researchTacticTypeColumn")}]:[],{columnKey:"weight",name:n("label.probabilityWeight")}]}const We=e=>{const{onChange:r,buttonProps:a,disableResearchAgreementOptions:t}=e,[i,c]=p.exports.useState(e.columnConfig),[f,u]=p.exports.useState(!1),[x]=p.exports.useState(()=>fe({disableResearchAgreementOptions:t})),y=p.exports.useRef(null),_=d=>{c(S=>({...S,[d]:!S[d]}))};return p.exports.useEffect(()=>{const d=setTimeout(()=>{r(i)},0);return()=>clearTimeout(d)},[i,r]),P(A,{children:[l(re,{variant:"outlined",fullWidth:a==null?void 0:a.fullWidth,size:a==null?void 0:a.size,ref:y,children:l(M,{startIcon:l(O,{}),onClick:()=>u(!0),children:n("button.displayItems")})},"columnConfig"),l(oe,{open:f,anchorEl:y.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1},children:({TransitionProps:d,placement:S})=>{var K;return l(le,{...d,style:{transformOrigin:S==="bottom"?"center top":"center bottom"},children:l("div",{children:l(ae,{onClickAway:()=>u(!1),children:P(N,{children:[l(L,{sx:{overflowY:"auto",maxHeight:`${((K=ne(y.current))!=null?K:0)-50}px`},children:l(ie,{id:"split-button-menu",children:x.map(C=>P(se,{selected:i[C.columnKey],onClick:()=>_(C.columnKey),children:[l(te,{children:l(me,{edge:"start",checked:i[C.columnKey],tabIndex:-1,disableRipple:!0})}),l(ce,{children:C.name})]},C.columnKey))})}),l($,{}),l(L,{p:1,display:"flex",justifyContent:"end",children:l(M,{variant:"outlined",onClick:()=>u(!1),children:n("button.close")})})]})})})})}})]})},Se=e=>({id:"nameLink",renderHeader:()=>n("label.shipName"),renderCell:r=>{var t;return((t=e.decorateName)!=null?t:(i,c)=>i)(l(D,{variant:"body2",children:l(W,{onClick:()=>{e.onClick(r.id)},children:o(r)})}),r)},sortFn:(r,a)=>o(r).localeCompare(o(a),s())}),Te={id:"type",renderHeader:()=>n("label.shipType"),renderCell:e=>G(e.type,e.subType),sortFn:[(e,r)=>H(e.type,e.subType)-H(r.type,r.subType),(e,r)=>o(e).localeCompare(o(r),s())],initialSortDirection:"asc"},ge={id:"row",renderHeader:()=>n("label.rowPlacement"),renderCell:e=>J(e.row),sortFn:[(e,r)=>F(e.row)-F(r.row),(e,r)=>o(e).localeCompare(o(r),s())]},be={id:"cost",renderHeader:()=>n("label.commandPoints"),renderCell:e=>e.cost,sortFn:[(e,r)=>e.cost-r.cost,(e,r)=>o(e).localeCompare(o(r),s())]},Pe={id:"operationLimit",renderHeader:()=>n("label.operationLimit"),renderCell:e=>e.operationLimit,sortFn:[(e,r)=>e.operationLimit-r.operationLimit,(e,r)=>o(e).localeCompare(o(r),s())]},we={id:"source",renderHeader:()=>n("label.acquirableThrough"),renderCell:e=>Y(e.source),sortFn:[(e,r)=>k(e.source)-k(r.source),(e,r)=>o(e).localeCompare(o(r),s())]},Ae={id:"manufacturer",renderHeader:()=>n("label.manufacturer"),renderCell:e=>Z(e.manufacturer),sortFn:[(e,r)=>R(e.manufacturer)-R(r.manufacturer),(e,r)=>o(e).localeCompare(o(r),s())]},De={id:"researchManufacturer",renderHeader:()=>n("label.researchManufacturerColumn"),renderCell:e=>e.researchManufacturer?Q(e.researchManufacturer):"-",sortFn:[(e,r)=>(e.researchManufacturer?I(e.researchManufacturer):0)-(r.researchManufacturer?I(r.researchManufacturer):0),(e,r)=>o(e).localeCompare(o(r),s())]},ve={id:"researchStrategyType",renderHeader:()=>n("label.researchStrategyTypeColumn"),renderCell:e=>{var r,a;return l(A,{children:(a=(r=e.researchStrategyTypes)==null?void 0:r.map(t=>l(D,{variant:"body2",children:U(t)},t)))!=null?a:"-"})},sortFn:[(e,r)=>{var a,t;return((a=e.researchStrategyTypes)!=null&&a[0]?m(e.researchStrategyTypes[0]):0)-((t=r.researchStrategyTypes)!=null&&t[0]?m(r.researchStrategyTypes[0]):0)},(e,r)=>{var a,t;return((a=e.researchStrategyTypes)!=null&&a[1]?m(e.researchStrategyTypes[1]):0)-((t=r.researchStrategyTypes)!=null&&t[1]?m(r.researchStrategyTypes[1]):0)},(e,r)=>{var a,t;return((a=e.researchStrategyTypes)!=null&&a[2]?m(e.researchStrategyTypes[2]):0)-((t=r.researchStrategyTypes)!=null&&t[2]?m(r.researchStrategyTypes[2]):0)},(e,r)=>{var a,t;return((a=e.researchStrategyTypes)!=null&&a[3]?m(e.researchStrategyTypes[3]):0)-((t=r.researchStrategyTypes)!=null&&t[3]?m(r.researchStrategyTypes[3]):0)},(e,r)=>o(e).localeCompare(o(r),s())]},xe={id:"researchTacticType",renderHeader:()=>n("label.researchTacticTypeColumn"),renderCell:e=>{var r,a;return l(A,{children:(a=(r=e.researchTacticTypes)==null?void 0:r.map(t=>l(D,{variant:"body2",children:X(t)},t)))!=null?a:"-"})},sortFn:[(e,r)=>{var a,t;return((a=e.researchTacticTypes)!=null&&a[0]?T(e.researchTacticTypes[0]):0)-((t=r.researchTacticTypes)!=null&&t[0]?T(r.researchTacticTypes[0]):0)},(e,r)=>{var a,t;return((a=e.researchTacticTypes)!=null&&a[1]?T(e.researchTacticTypes[1]):0)-((t=r.researchTacticTypes)!=null&&t[1]?T(r.researchTacticTypes[1]):0)},(e,r)=>o(e).localeCompare(o(r),s())]},Ke={id:"weight",renderHeader:()=>n("label.probabilityWeight"),renderCell:e=>e.weight,sortFn:[(e,r)=>e.weight-r.weight,(e,r)=>o(e).localeCompare(o(r),s())]},Me=h(n("label.antiShipDpm"),"dpmShip"),Le=h(n("label.antiAirDpm"),"dpmAntiAir"),He=h(n("label.siegeDpm"),"dpmSiege"),Fe=h(n("label.hp"),"hp"),ke=h(n("label.cruiseSpeed"),"speed"),Re=h(n("label.warpSpeed"),"warpSpeed"),Ie=b(n("label.antiShipDpmPerCommandPoint"),"dpmShip"),Ve=b(n("label.antiAirDpmPerCommandPoint"),"dpmAntiAir"),Oe=b(n("label.siegeDpmPerCommandPoint"),"dpmSiege"),_e=b(n("label.hpPerCommandPoint"),"hp");function h(e,r){return{id:r,renderHeader:()=>e,renderCell:a=>V(g(a.id,r)),sortFn:[(a,t)=>{var i,c;return((i=g(a.id,r))!=null?i:0)-((c=g(t.id,r))!=null?c:0)},(a,t)=>o(a).localeCompare(o(t),s())]}}function b(e,r){return{id:`${r}_per_command_point`,renderHeader:()=>e,renderCell:a=>V(w(a,r),0),sortFn:[(a,t)=>{var i,c;return((i=w(a,r))!=null?i:0)-((c=w(t,r))!=null?c:0)},(a,t)=>o(a).localeCompare(o(t),s())]}}function g(e,r){var t,i;const a=(i=(t=q(E(e),null))==null?void 0:t[r])!=null?i:null;if(typeof a=="boolean")throw new Error(`${r} is not a numeric value`);return a}function w(e,r){if(e.cost===0)return null;const a=g(e.id,r);if(typeof a=="boolean")throw new Error(`${r} is not a numeric value`);return a===null?null:a/e.cost}const Ge=e=>{const{shipDefinitions:r,columnConfig:a,decorateName:t}=e,{table:i,setTableData:c}=pe(),{openShipDetailDialog:f}=ee(),u=p.exports.useMemo(()=>[Se({onClick:f,decorateName:t}),...a.type?[Te]:[],...a.row?[ge]:[],...a.cost?[be]:[],...a.operationLimit?[Pe]:[],...a.dpmShip?[Me]:[],...a.dpmAntiAir?[Le]:[],...a.dpmSiege?[He]:[],...a.hp?[Fe]:[],...a.speed?[ke]:[],...a.warpSpeed?[Re]:[],...a.dpmShipPerCommandPoint?[Ie]:[],...a.dpmAntiAirPerCommandPoint?[Ve]:[],...a.dpmSiegePerCommandPoint?[Oe]:[],...a.hpPerCommandPoint?[_e]:[],...a.source?[we]:[],...a.manufacturer?[Ae]:[],...a.researchManufacturer?[De]:[],...a.researchStrategyType?[ve]:[],...a.researchTacticType?[xe]:[],...a.weight?[Ke]:[]],[a,t,f]);return p.exports.useEffect(()=>{c({columns:u,data:r,rowIdFn:y=>y.id})},[c,u,r]),l(ue,{table:i,size:"small"})};export{We as C,Ge as S,Ee as c};
