import{q as Z,v as ee,w as L,x as Se,_ as C,r as I,y as te,z as Oe,A as ae,a as v,j as n,C as re,D as z,E as j,G as Te,H as Ce,I as Re,J as se,K as ne,L as oe,P as $,d as me,W as K,M as le,N as Ne,O as _e,f as R,Q as G,R as l,U as u,V as d,X as M,Y as b,e as Ee,Z as be,t as k,$ as Ae,a0 as Pe,a1 as xe,F as ye,B as w,a2 as Fe,b as X,a3 as ve,S as ke}from"./index.bc9ea099.js";import{B as Me,C as De,g as Ue,L as ge}from"./domUtils.cb11983a.js";import{u as Be,P as we}from"./useFormControl.7ef86f90.js";import{G as Ge,M as He,a as We,L as $e}from"./PageContent.2e377fbf.js";function Le(e){return Z("PrivateSwitchBase",e)}ee("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ze=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],je=e=>{const{classes:t,checked:a,disabled:r,edge:s}=e,o={root:["root",a&&"checked",r&&"disabled",s&&`edge${z(s)}`],input:["input"]};return ae(o,Le,t)},Ke=L(Se)(({ownerState:e})=>C({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Je=L("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),qe=I.exports.forwardRef(function(t,a){const{autoFocus:r,checked:s,checkedIcon:o,className:h,defaultChecked:S,disabled:i,disableFocusRipple:c=!1,edge:m=!1,icon:f,id:O,inputProps:D,inputRef:A,name:U,onBlur:P,onChange:x,onFocus:N,readOnly:B,required:p,tabIndex:F,type:y,value:_}=t,ue=te(t,ze),[V,de]=Oe({controlled:s,default:Boolean(S),name:"SwitchBase",state:"checked"}),E=Be(),he=T=>{N&&N(T),E&&E.onFocus&&E.onFocus(T)},fe=T=>{P&&P(T),E&&E.onBlur&&E.onBlur(T)},pe=T=>{if(T.nativeEvent.defaultPrevented)return;const Q=T.target.checked;de(Q),x&&x(T,Q)};let g=i;E&&typeof g=="undefined"&&(g=E.disabled);const Ie=y==="checkbox"||y==="radio",H=C({},t,{checked:V,disabled:g,disableFocusRipple:c,edge:m}),Y=je(H);return v(Ke,C({component:"span",className:re(Y.root,h),centerRipple:!0,focusRipple:!c,disabled:g,tabIndex:null,role:void 0,onFocus:he,onBlur:fe,ownerState:H,ref:a},ue,{children:[n(Je,C({autoFocus:r,checked:s,defaultChecked:S,className:Y.input,disabled:g,id:Ie&&O,name:U,onChange:pe,readOnly:B,ref:A,required:p,ownerState:H,tabIndex:F,type:y},y==="checkbox"&&_===void 0?{}:{value:_},D)),V?o:f]}))});var Ve=qe,Ye=j(n("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Qe=j(n("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Xe=j(n("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Ze(e){return Z("MuiCheckbox",e)}const et=ee("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]);var W=et;const tt=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],at=e=>{const{classes:t,indeterminate:a,color:r}=e,s={root:["root",a&&"indeterminate",`color${z(r)}`]},o=ae(s,Ze,t);return C({},t,o)},rt=L(Ve,{shouldForwardProp:e=>Te(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,a.color!=="default"&&t[`color${z(a.color)}`]]}})(({theme:e,ownerState:t})=>C({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ce(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${W.checked}, &.${W.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${W.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),st=n(Qe,{}),nt=n(Ye,{}),ot=n(Xe,{}),lt=I.exports.forwardRef(function(t,a){var r,s;const o=Re({props:t,name:"MuiCheckbox"}),{checkedIcon:h=st,color:S="primary",icon:i=nt,indeterminate:c=!1,indeterminateIcon:m=ot,inputProps:f,size:O="medium",className:D}=o,A=te(o,tt),U=c?m:i,P=c?m:h,x=C({},o,{color:S,indeterminate:c,size:O}),N=at(x);return n(rt,C({type:"checkbox",inputProps:C({"data-indeterminate":c},f),icon:I.exports.cloneElement(U,{fontSize:(r=U.props.fontSize)!=null?r:O}),checkedIcon:I.exports.cloneElement(P,{fontSize:(s=P.props.fontSize)!=null?s:O}),ownerState:x,ref:a,className:re(N.root,D)},A,{classes:N}))});var ct=lt,J={},it=ne.exports;Object.defineProperty(J,"__esModule",{value:!0});var ce=J.default=void 0,ut=it(se),dt=oe,ht=(0,ut.default)((0,dt.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt");ce=J.default=ht;var q={},ft=ne.exports;Object.defineProperty(q,"__esModule",{value:!0});var ie=q.default=void 0,pt=ft(se),It=oe,St=(0,pt.default)((0,It.jsx)("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z"}),"FilterAltOff");ie=q.default=St;function Ot(e){return(e!=null?e:[R.FRONT,R.MIDDLE,R.BACK]).map(t=>({filterKey:t,name:Ee(t)}))}function Tt(e){return(e!=null?e:Object.keys(G)).map(t=>({filterKey:t,name:G[t].name}))}function Ct(e){return(e!=null?e:[l.JUPITER_INDUSTRIES,l.NOMA_SHIPPING_GROUP,l.ANTONIOS_CONSORTIUM,l.DAWN_ACCORD,l.HAYREDDIN_CLAN]).map(t=>({filterKey:t,name:be(t)}))}function Rt(e){return(e!=null?e:[u.JUPITER_INDUSTRIES,u.NOMA_SHIPPING_GROUP,u.ANTONIOS_CONSORTIUM,u.DAWN_ACCORD]).map(t=>({filterKey:t,name:k("label.researchManufacturerOption",{manufacturer:Ae(t)})}))}function mt(e){return(e!=null?e:[d.OUTSTANDING_FIREPOWER,d.SUSTAINED_COMBAT,d.STRATEGY_AND_SUPPORT,d.FIGHTER_AND_CORVETTE]).map(t=>({filterKey:t,name:k("label.researchStrategyTypeOption",{strategyType:Pe(t)})}))}function Nt(e){return(e!=null?e:[M.PROJECTILE_WEAPONS,M.DIRECT_FIRE_WEAPONS]).map(t=>({filterKey:t,name:k("label.researchTacticTypeOption",{tacticType:xe(t)})}))}function _t(e={}){var t,a,r,s,o,h;return[...Ot((t=e.shipRows)!=null?t:null),...Tt((a=e.shipTypes)!=null?a:null),...Ct((r=e.manufacturer)!=null?r:null),...e.researchManufacturer===!1?[]:Rt((s=e.researchManufacturer)!=null?s:null),...e.researchStrategyTypes===!1?[]:mt((o=e.researchStrategyTypes)!=null?o:null),...e.researchTacticTypes===!1?[]:Nt((h=e.researchTacticTypes)!=null?h:null)]}function gt(){return{[R.FRONT]:!1,[R.MIDDLE]:!1,[R.BACK]:!1,...Object.keys(G).reduce((e,t)=>({...e,[t]:!1}),{}),[l.JUPITER_INDUSTRIES]:!1,[l.NOMA_SHIPPING_GROUP]:!1,[l.ANTONIOS_CONSORTIUM]:!1,[l.DAWN_ACCORD]:!1,[l.HAYREDDIN_CLAN]:!1,[u.JUPITER_INDUSTRIES]:!1,[u.NOMA_SHIPPING_GROUP]:!1,[u.ANTONIOS_CONSORTIUM]:!1,[u.DAWN_ACCORD]:!1,[d.OUTSTANDING_FIREPOWER]:!1,[d.SUSTAINED_COMBAT]:!1,[d.STRATEGY_AND_SUPPORT]:!1,[d.FIGHTER_AND_CORVETTE]:!1,[M.PROJECTILE_WEAPONS]:!1,[M.DIRECT_FIRE_WEAPONS]:!1}}function Et(e){const t={...e};return Object.keys(t).forEach(a=>{t[a]=!1}),t}function Bt(e,t){let a=e;return bt(t)&&(a=a.filter(r=>t[r.row]===!0)),At(t)&&(a=a.filter(r=>t[r.type]===!0)),Pt(t)&&(a=a.filter(r=>t[r.manufacturer]===!0)),xt(t)&&(a=a.filter(r=>r.researchManufacturer&&t[r.researchManufacturer]===!0)),yt(t)&&(a=a.filter(r=>{var s;return((s=r.researchStrategyTypes)!=null?s:[]).some(o=>t[o]===!0)})),Ft(t)&&(a=a.filter(r=>{var s;return((s=r.researchTacticTypes)!=null?s:[]).some(o=>t[o]===!0)})),a}function wt(e){const t={[b.STARTER_SHIP]:[],[b.TECH_FILE]:[],[b.CITY_TRADE]:[],[b.DOCK_EFFECT]:[],[b.SALVAGE]:[],[b.UNKNOWN]:[]};return e.forEach(a=>{t[a.source].push(a)}),t}function bt(e){return[R.FRONT,R.MIDDLE,R.BACK].some(t=>e[t]===!0)}function At(e){return Object.keys(G).some(t=>e[t]===!0)}function Pt(e){return[l.JUPITER_INDUSTRIES,l.NOMA_SHIPPING_GROUP,l.ANTONIOS_CONSORTIUM,l.DAWN_ACCORD,l.HAYREDDIN_CLAN].some(t=>e[t]===!0)}function xt(e){return[u.JUPITER_INDUSTRIES,u.NOMA_SHIPPING_GROUP,u.ANTONIOS_CONSORTIUM,u.DAWN_ACCORD].some(t=>e[t]===!0)}function yt(e){return[d.OUTSTANDING_FIREPOWER,d.SUSTAINED_COMBAT,d.STRATEGY_AND_SUPPORT,d.FIGHTER_AND_CORVETTE].some(t=>e[t]===!0)}function Ft(e){return[M.PROJECTILE_WEAPONS,M.DIRECT_FIRE_WEAPONS].some(t=>e[t]===!0)}function Gt(e,t){return e.filter(a=>{var r;return((r=t[a.id])==null?void 0:r.possession)===$.POSSESSED})}function Ht(e,t){return e.filter(a=>{var r;return me(a,t).length>0?!0:((r=t.ships[a.id])==null?void 0:r.wish)===K.WANTED})}function Wt(e,t){return e.filter(a=>{var r;return le(a.id)&&((r=t[a.id])==null?void 0:r.wish)===K.NOT_WANTED})}function $t(e,t){return e.filter(s=>s.source===b.TECH_FILE||s.source===b.STARTER_SHIP).filter(s=>{var o;return((o=t.ships[s.id])==null?void 0:o.possession)===$.POSSESSED}).filter(s=>{var o,h,S;if(!!s.modules&&Ne(s,t).length>0||s.baseModelId)return!1;if(!!s.subModelIds||!!s.baseModelId){const i=(S=(h=s.subModelIds)!=null?h:(o=_e(s.baseModelId))==null?void 0:o.subModelIds)!=null?S:[];return vt(i,t.ships)?!(i.filter(f=>le(f)&&!!t.ships[f]&&t.ships[f].possession!==$.POSSESSED).filter(f=>t.ships[f].wish!==K.NOT_WANTED).length>0):!1}return!0})}function vt(e,t){return e.length>0&&e.every(a=>{var r;return!!((r=t[a])!=null&&r.possession)})}const Lt=e=>{const{onChange:t,popperProps:a,shipRows:r,shipTypes:s,researchManufacturer:o,researchStrategyTypes:h,researchTacticTypes:S,buttonProps:i}=e,[c,m]=I.exports.useState(e.filter),[f,O]=I.exports.useState(!1),[D]=I.exports.useState(()=>_t({shipRows:r,shipTypes:s,researchManufacturer:o,researchStrategyTypes:h,researchTacticTypes:S})),A=I.exports.useRef(null),[U,P]=I.exports.useTransition(),x=p=>{m(F=>({...F,[p]:!F[p]}))},N=()=>{m(p=>Et(p))};I.exports.useEffect(()=>{P(()=>{t(c)})},[c,t]);const B=Object.values(c).some(p=>p);return v(ye,{children:[v(Me,{variant:"outlined",ref:A,fullWidth:i==null?void 0:i.fullWidth,size:i==null?void 0:i.size,children:[n(w,{startIcon:n(ce,{}),onClick:()=>O(!0),sx:{flexShrink:1},children:k("button.filter")}),B&&n(w,{size:"small",onClick:N,sx:{flexShrink:3},children:n(ie,{})})]},"filter"),n(we,{open:f,anchorEl:A.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1},...a,children:({TransitionProps:p,placement:F})=>{var y;return n(Ge,{...p,style:{transformOrigin:F==="bottom"?"center top":"center bottom"},children:n("div",{children:n(De,{onClickAway:()=>O(!1),children:v(Fe,{children:[n(X,{sx:{overflowY:"auto",maxHeight:`${((y=Ue(A.current))!=null?y:0)-50}px`},children:n(He,{id:"split-button-menu",children:D.map(_=>v(We,{selected:c[_.filterKey],onClick:()=>x(_.filterKey),children:[n(ge,{children:n(ct,{edge:"start",checked:c[_.filterKey],tabIndex:-1,disableRipple:!0})}),n($e,{children:_.name})]},_.filterKey))})}),n(ve,{}),n(X,{p:1,display:"flex",justifyContent:"end",children:v(ke,{spacing:1,direction:"row",children:[n(w,{variant:"outlined",onClick:N,disabled:!B,children:k("button.unselectAll")}),n(w,{variant:"outlined",onClick:()=>O(!1),children:k("button.close")})]})})]})})})})}})]})};export{ct as C,Lt as S,Bt as a,Ht as b,gt as c,Wt as d,Gt as e,$t as f,Ve as g,wt as s};
