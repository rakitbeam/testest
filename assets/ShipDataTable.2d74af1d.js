import{P as z,Q as N,R as q,t,r as p,j as D,F as v,k as i,B as H,aa as E,q as L,ab as $,aB as _,g as o,d as c,aC as W,Y as G,T as K,aD as Y,b as J,s as F,a as Q,aE as k,a9 as U,aF as R,a5 as X,aG as I,a6 as Z,aH as V,a8 as ee,aI as m,a7 as ae,aJ as g,aK as re}from"./index.245efad9.js";import{B as ne,C as te,g as oe,L as le}from"./domUtils.4260d65f.js";import{P as ie}from"./useFormControl.641b0b06.js";import{G as se,M as ce,a as me,L as pe}from"./PageContent.bb3fc027.js";import{C as ue}from"./ShipTypeFilterButton.accf4cbe.js";import{u as de,T as he}from"./useTable.3867a2d7.js";var x={},Ce=N.exports;Object.defineProperty(x,"__esModule",{value:!0});var O=x.default=void 0,ye=Ce(z),fe=q,Se=(0,ye.default)((0,fe.jsx)("path",{d:"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z"}),"ViewColumn");O=x.default=Se;function Je(e={}){return{name:!0,type:!1,row:!1,cost:!1,operationLimit:!1,dpmShip:!1,dpmAntiAir:!1,dpmSiege:!1,hp:!1,armor:!1,shield:!1,speed:!1,warpSpeed:!1,dpmShipPerCommandPoint:!1,dpmAntiAirPerCommandPoint:!1,dpmSiegePerCommandPoint:!1,hpPerCommandPoint:!1,source:!1,manufacturer:!1,researchManufacturer:!1,researchTacticType:!1,researchStrategyType:!1,weight:!1,...e}}function ge(e){const{disableResearchAgreementOptions:a}=e;return[{columnKey:"type",name:t("label.shipType")},{columnKey:"row",name:t("label.rowPlacement")},{columnKey:"cost",name:t("label.commandPoints")},{columnKey:"operationLimit",name:t("label.operationLimit")},{columnKey:"dpmShip",name:t("label.antiShipDpm")},{columnKey:"dpmAntiAir",name:t("label.antiAirDpm")},{columnKey:"dpmSiege",name:t("label.siegeDpm")},{columnKey:"hp",name:t("label.hp")},{columnKey:"armor",name:t("label.armor")},{columnKey:"shield",name:t("label.shield")},{columnKey:"speed",name:t("label.cruiseSpeed")},{columnKey:"warpSpeed",name:t("label.warpSpeed")},{columnKey:"dpmShipPerCommandPoint",name:t("label.antiShipDpmPerCommandPoint")},{columnKey:"dpmAntiAirPerCommandPoint",name:t("label.antiAirDpmPerCommandPoint")},{columnKey:"dpmSiegePerCommandPoint",name:t("label.siegeDpmPerCommandPoint")},{columnKey:"hpPerCommandPoint",name:t("label.hpPerCommandPoint")},{columnKey:"source",name:t("label.acquirableThrough")},{columnKey:"manufacturer",name:t("label.manufacturer")},...a!==!0?[{columnKey:"researchManufacturer",name:t("label.researchManufacturerColumn")},{columnKey:"researchTacticType",name:t("label.researchTacticTypeColumn")},{columnKey:"researchStrategyType",name:t("label.researchStrategyTypeColumn")}]:[],{columnKey:"weight",name:t("label.probabilityWeight")}]}const Qe=e=>{const{onChange:a,buttonProps:r,disableResearchAgreementOptions:n}=e,[l,s]=p.exports.useState(e.columnConfig),[P,u]=p.exports.useState(!1),[y]=p.exports.useState(()=>ge({disableResearchAgreementOptions:n})),d=p.exports.useRef(null),[B,w]=p.exports.useTransition(),j=f=>{s(S=>({...S,[f]:!S[f]}))};return p.exports.useEffect(()=>{w(()=>{a(l)})},[l,a]),D(v,{children:[i(ne,{variant:"outlined",fullWidth:r==null?void 0:r.fullWidth,size:r==null?void 0:r.size,ref:d,children:i(H,{startIcon:i(O,{}),onClick:()=>u(!0),children:t("button.displayItems")})},"columnConfig"),i(ie,{open:P,anchorEl:d.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1},children:({TransitionProps:f,placement:S})=>{var M;return i(se,{...f,style:{transformOrigin:S==="bottom"?"center top":"center bottom"},children:i("div",{children:i(te,{onClickAway:()=>u(!1),children:D(E,{children:[i(L,{component:"div",sx:{overflowY:"auto",maxHeight:`${((M=oe(d.current))!=null?M:0)-50}px`},children:i(ce,{id:"split-button-menu",children:y.map(C=>D(me,{selected:l[C.columnKey],onClick:()=>j(C.columnKey),children:[i(le,{children:i(ue,{edge:"start",checked:l[C.columnKey],tabIndex:-1,disableRipple:!0})}),i(pe,{children:C.name})]},C.columnKey))})}),i($,{}),i(L,{component:"div",p:1,display:"flex",justifyContent:"end",children:i(H,{variant:"outlined",onClick:()=>u(!1),children:t("button.close")})})]})})})})}})]})},Te=e=>({id:"nameLink",renderHeader:()=>t("label.shipName"),renderCell:a=>{var n;return((n=e.decorateName)!=null?n:(l,s)=>l)(i(K,{variant:"body2",children:i(Y,{onClick:()=>{e.onClick(a.id)},children:o(a)})}),a)},sortFn:(a,r)=>o(a).localeCompare(o(r),c())}),be={id:"type",renderHeader:()=>t("label.shipType"),renderCell:e=>J(e.type,e.subType),sortFn:[(e,a)=>F(e.type,e.subType)-F(a.type,a.subType),(e,a)=>o(e).localeCompare(o(a),c())],initialSortDirection:"asc"},Pe={id:"row",renderHeader:()=>t("label.rowPlacement"),renderCell:e=>Q(e.row),sortFn:[(e,a)=>k(e.row)-k(a.row),(e,a)=>o(e).localeCompare(o(a),c())]},we={id:"cost",renderHeader:()=>t("label.commandPoints"),renderCell:e=>e.cost,sortFn:[(e,a)=>e.cost-a.cost,(e,a)=>o(e).localeCompare(o(a),c())]},De={id:"operationLimit",renderHeader:()=>t("label.operationLimit"),renderCell:e=>e.operationLimit,sortFn:[(e,a)=>e.operationLimit-a.operationLimit,(e,a)=>o(e).localeCompare(o(a),c())]},Ae={id:"source",renderHeader:()=>t("label.acquirableThrough"),renderCell:e=>U(e.source),sortFn:[(e,a)=>R(e.source)-R(a.source),(e,a)=>o(e).localeCompare(o(a),c())]},ve={id:"manufacturer",renderHeader:()=>t("label.manufacturer"),renderCell:e=>X(e.manufacturer),sortFn:[(e,a)=>I(e.manufacturer)-I(a.manufacturer),(e,a)=>o(e).localeCompare(o(a),c())]},Ke={id:"researchManufacturer",renderHeader:()=>t("label.researchManufacturerColumn"),renderCell:e=>e.researchManufacturer?Z(e.researchManufacturer):"-",sortFn:[(e,a)=>(e.researchManufacturer?V(e.researchManufacturer):0)-(a.researchManufacturer?V(a.researchManufacturer):0),(e,a)=>o(e).localeCompare(o(a),c())]},xe={id:"researchStrategyType",renderHeader:()=>t("label.researchStrategyTypeColumn"),renderCell:e=>{var a,r;return i(v,{children:(r=(a=e.researchStrategyTypes)==null?void 0:a.map(n=>i(K,{variant:"body2",children:ee(n)},n)))!=null?r:"-"})},sortFn:[(e,a)=>{var r,n;return((r=e.researchStrategyTypes)!=null&&r[0]?m(e.researchStrategyTypes[0]):0)-((n=a.researchStrategyTypes)!=null&&n[0]?m(a.researchStrategyTypes[0]):0)},(e,a)=>{var r,n;return((r=e.researchStrategyTypes)!=null&&r[1]?m(e.researchStrategyTypes[1]):0)-((n=a.researchStrategyTypes)!=null&&n[1]?m(a.researchStrategyTypes[1]):0)},(e,a)=>{var r,n;return((r=e.researchStrategyTypes)!=null&&r[2]?m(e.researchStrategyTypes[2]):0)-((n=a.researchStrategyTypes)!=null&&n[2]?m(a.researchStrategyTypes[2]):0)},(e,a)=>{var r,n;return((r=e.researchStrategyTypes)!=null&&r[3]?m(e.researchStrategyTypes[3]):0)-((n=a.researchStrategyTypes)!=null&&n[3]?m(a.researchStrategyTypes[3]):0)},(e,a)=>o(e).localeCompare(o(a),c())]},Me={id:"researchTacticType",renderHeader:()=>t("label.researchTacticTypeColumn"),renderCell:e=>{var a,r;return i(v,{children:(r=(a=e.researchTacticTypes)==null?void 0:a.map(n=>i(K,{variant:"body2",children:ae(n)},n)))!=null?r:"-"})},sortFn:[(e,a)=>{var r,n;return((r=e.researchTacticTypes)!=null&&r[0]?g(e.researchTacticTypes[0]):0)-((n=a.researchTacticTypes)!=null&&n[0]?g(a.researchTacticTypes[0]):0)},(e,a)=>{var r,n;return((r=e.researchTacticTypes)!=null&&r[1]?g(e.researchTacticTypes[1]):0)-((n=a.researchTacticTypes)!=null&&n[1]?g(a.researchTacticTypes[1]):0)},(e,a)=>o(e).localeCompare(o(a),c())]},He={id:"weight",renderHeader:()=>t("label.probabilityWeight"),renderCell:e=>e.weight,sortFn:[(e,a)=>e.weight-a.weight,(e,a)=>o(e).localeCompare(o(a),c())]},Le={id:"armor",renderHeader:()=>t("label.armor"),renderCell:e=>{var a,r;return(r=(a=e.defaultStats)==null?void 0:a.armor)!=null?r:"-"},sortFn:[(e,a)=>{var r,n,l,s;return((n=(r=e.defaultStats)==null?void 0:r.armor)!=null?n:0)-((s=(l=a.defaultStats)==null?void 0:l.armor)!=null?s:0)},(e,a)=>o(e).localeCompare(o(a),c())]},Fe={id:"shield",renderHeader:()=>t("label.shield"),renderCell:e=>{var a,r;return(r=(a=e.defaultStats)==null?void 0:a.shield)!=null?r:"-"},sortFn:[(e,a)=>{var r,n,l,s;return((n=(r=e.defaultStats)==null?void 0:r.shield)!=null?n:0)-((s=(l=a.defaultStats)==null?void 0:l.shield)!=null?s:0)},(e,a)=>o(e).localeCompare(o(a),c())]},ke=h(t("label.antiShipDpm"),"dpmShip"),Re=h(t("label.antiAirDpm"),"dpmAntiAir"),Ie=h(t("label.siegeDpm"),"dpmSiege"),Ve=h(t("label.hp"),"hp"),_e=h(t("label.cruiseSpeed"),"speed"),Oe=h(t("label.warpSpeed"),"warpSpeed"),Be=b(t("label.antiShipDpmPerCommandPoint"),"dpmShip"),je=b(t("label.antiAirDpmPerCommandPoint"),"dpmAntiAir"),ze=b(t("label.siegeDpmPerCommandPoint"),"dpmSiege"),Ne=b(t("label.hpPerCommandPoint"),"hp");function h(e,a){return{id:a,renderHeader:()=>e,renderCell:r=>_(T(r.id,a)),sortFn:[(r,n)=>{var l,s;return((l=T(r.id,a))!=null?l:0)-((s=T(n.id,a))!=null?s:0)},(r,n)=>o(r).localeCompare(o(n),c())]}}function b(e,a){return{id:`${a}_per_command_point`,renderHeader:()=>e,renderCell:r=>_(A(r,a),0),sortFn:[(r,n)=>{var l,s;return((l=A(r,a))!=null?l:0)-((s=A(n,a))!=null?s:0)},(r,n)=>o(r).localeCompare(o(n),c())]}}function T(e,a){var n,l;const r=(l=(n=W(G(e),null))==null?void 0:n[a])!=null?l:null;if(typeof r=="boolean")throw new Error(`${a} is not a numeric value`);return r}function A(e,a){if(e.cost===0)return null;const r=T(e.id,a);if(typeof r=="boolean")throw new Error(`${a} is not a numeric value`);return r===null?null:r/e.cost}const Ue=e=>{const{shipDefinitions:a,columnConfig:r,decorateName:n,initialSorting:l,onChangeSorting:s}=e,{table:P,setTableData:u}=de({initialSorting:l,onChangeSorting:s}),{openShipDetailDialog:y}=re(),d=p.exports.useMemo(()=>[Te({onClick:y,decorateName:n}),...r.type?[be]:[],...r.row?[Pe]:[],...r.cost?[we]:[],...r.operationLimit?[De]:[],...r.dpmShip?[ke]:[],...r.dpmAntiAir?[Re]:[],...r.dpmSiege?[Ie]:[],...r.hp?[Ve]:[],...r.armor?[Le]:[],...r.shield?[Fe]:[],...r.speed?[_e]:[],...r.warpSpeed?[Oe]:[],...r.dpmShipPerCommandPoint?[Be]:[],...r.dpmAntiAirPerCommandPoint?[je]:[],...r.dpmSiegePerCommandPoint?[ze]:[],...r.hpPerCommandPoint?[Ne]:[],...r.source?[Ae]:[],...r.manufacturer?[ve]:[],...r.researchManufacturer?[Ke]:[],...r.researchTacticType?[Me]:[],...r.researchStrategyType?[xe]:[],...r.weight?[He]:[]],[r,n,y]);return p.exports.useEffect(()=>{u({columns:d,data:a,rowIdFn:w=>w.id})},[u,d,a]),i(he,{table:P,size:"small"})};export{Qe as C,Ue as S,Je as c};
