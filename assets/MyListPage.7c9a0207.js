import{j as e,a as l,F as y,B as F,u as A,r as d,g as k,b,T as r,c as T,d as L,S as w,t as E,e as f,f as M,h as S,s as R,i as D,k as j,l as N,m as O,n as I,o as v,p as U}from"./index.3216557f.js";import{d as V}from"./Settings.4bff0c4e.js";import{d as W,a as q}from"./ContentCopy.089ee2ae.js";import{S as P,c as _,a as z,e as G,b as H,d as K,f as J}from"./ShipTypeFilterButton.cdceb9b3.js";import{A as Q}from"./ActionBar.814b2ff5.js";import{C as X,S as Y,c as Z}from"./ShipDataTable.940c426e.js";import{E as ee}from"./ExpandStack.aeda0449.js";import{n as te}from"./sorting.c6946657.js";import{R as ie}from"./ResponsiveDialog.92e7dbeb.js";import{T as ae}from"./TextField.3e666fe7.js";import{N as se,P as ne}from"./PageContent.13c2f158.js";import{P as ue}from"./PageFooter.7282b329.js";import"./domUtils.e0e5f00e.js";import"./useFormControl.617a4d60.js";import"./useTable.8c92a317.js";import"./Select.e11937aa.js";const oe=u=>{const{shipFilter:t,columnConfig:a,onEdit:n,onFilter:s,onShare:p,onColumnConfigChange:c}=u;return e(Q,{left:o=>l(y,{children:[e(X,{columnConfig:a,onChange:c,disableResearchAgreementOptions:!0,buttonProps:o},"columnConfig"),e(P,{filter:t,onChange:s,researchManufacturer:!1,researchStrategyTypes:!1,researchTacticTypes:!1,buttonProps:o},"filter"),e(F,{variant:"outlined",startIcon:e(V,{}),onClick:n,...o,children:"\u30DE\u30A4\u30EA\u30B9\u30C8\u8A2D\u5B9A"},"edit")]}),right:o=>e(y,{children:e(F,{variant:"outlined",startIcon:e(W,{}),onClick:p,...o,children:"\u5171\u6709"},"share")})})},re=u=>{const{ship:t}=u,{userSettings:a}=A(),n=d.exports.useMemo(()=>k(t,a),[t,a]);return n.length===0?null:e(b,{mt:.5,children:n.map(s=>l(r,{variant:"body2",color:"text.secondary",children:[e(r,{variant:"body2",component:"span",color:"text.secondary",sx:{opacity:.5},children:"\u2517 "}),`${s.category}${s.categoryNumber} ${T(t.id,s)}`]},s.id))})},ce=u=>{const{ship:t}=u,{userSettings:a}=A(),n=d.exports.useMemo(()=>L(t,a),[t,a]);return n.length===0?null:e(b,{mt:.5,children:n.map(s=>l(r,{variant:"body2",color:"text.secondary",children:[e(r,{variant:"body2",component:"span",color:"text.secondary",sx:{opacity:.5},children:"\u2517 "}),`${s.category}${s.categoryNumber} ${T(t.id,s)}`]},s.id))})},B=d.exports.memo(Y),le=u=>{const{shipListState:t,columnConfig:a}=u;return l(w,{spacing:1,children:[e(ee,{expandables:[{id:"possessed-ships",initiallyOpened:!0,summary:e(r,{variant:"body1",children:"\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8239/\u8A2D\u8A08\u56F3"}),details:e(B,{shipDefinitions:t.possessed,columnConfig:a,decorateName:(n,s)=>l(y,{children:[n,e(re,{ship:s})]})})},{id:"wished-ships",initiallyOpened:!1,summary:e(r,{variant:"body1",children:"\u6B32\u3057\u3044\u8A2D\u8A08\u56F3"}),details:e(B,{shipDefinitions:t.wished,columnConfig:a,decorateName:(n,s)=>l(y,{children:[n,e(ce,{ship:s})]})})},{id:"unwished-by-user-ships",initiallyOpened:!1,summary:e(r,{variant:"body1",children:"\u6B32\u3057\u304F\u306A\u3044\u8A2D\u8A08\u56F3"}),details:e(B,{shipDefinitions:t.unwishedByUser,columnConfig:a})},{id:"unwished-by-data-ships",initiallyOpened:!1,summary:e(r,{variant:"body1",children:"\u88AB\u3063\u3066\u6B32\u3057\u304F\u306A\u3044\u8266\u8239"}),details:l(y,{children:[e(B,{shipDefinitions:t.unwishedByData,columnConfig:a}),e(b,{pt:1,children:e(r,{variant:"caption",align:"right",paragraph:!0,children:"\u203B\u88AB\u308A\u3067\u6280\u8853\u30DD\u30A4\u30F3\u30C8\u304B\u300C\u51FA\u3066\u6B32\u3057\u304F\u306A\u3044\u300D\u30B5\u30D6\u30E2\u30C7\u30EB\u306B\u306A\u308B\u8266\u8239\u304C\u81EA\u52D5\u7684\u306B\u8868\u793A\u3055\u308C\u307E\u3059"})})]})}]}),e(r,{variant:"caption",align:"right",paragraph:!0,children:"\u203B\u8A2D\u5B9A\u30C7\u30FC\u30BF\u306F\u30D6\u30E9\u30A6\u30B6\u306E\u30ED\u30FC\u30AB\u30EB\u30B9\u30C8\u30EC\u30FC\u30B8\u306B\u4FDD\u5B58\u3055\u308C\u3066\u3044\u307E\u3059\u3002"})]})};function pe(u,t){const a=[],n=[],s=[],p=[],c=[];u.forEach(i=>{switch(i.row){case f.FRONT:{a.push(i);break}case f.MIDDLE:{n.push(i);break}case f.BACK:{s.push(i);break}default:switch(i.type){case S.CORVETTE:{p.push(i);break}case S.FIGHTER:{c.push(i);break}}}});const o=te([(i,h)=>R(i.type,i.subType)-R(h.type,h.subType),(i,h)=>D(i).localeCompare(D(h),j())]);return["\u6240\u6301\u3057\u3066\u3044\u308B\u8266\u8239/\u8A2D\u8A08\u56F3",[`\u3010${E(f.FRONT)}\u3011`,...a.sort(o).map(i=>g(i,t))].join(`
`),[`\u3010${E(f.MIDDLE)}\u3011`,...n.sort(o).map(i=>g(i,t))].join(`
`),[`\u3010${E(f.BACK)}\u3011`,...s.sort(o).map(i=>g(i,t))].join(`
`),[`\u3010${M(S.CORVETTE)}\u3011`,...p.sort(o).map(i=>g(i,t))].join(`
`),[`\u3010${M(S.FIGHTER)}\u3011`,...c.sort(o).map(i=>g(i,t))].join(`
`)].join(`

`)}function g(u,t){const a=k(u,t);return a.length===0?`\u3000${D(u)}`:[`\u3000${D(u)}`,a.map(n=>`\u3000\u2517 ${n.category}${n.categoryNumber} ${T(u.id,n)}`).join(`
`)].join(`
`)}const de=u=>{const{ships:t,onClose:a}=u,[n,s]=d.exports.useState(!1),{userSettings:p}=A(),[c,o]=d.exports.useState(()=>pe(t.possessed,p)),i=()=>{c&&O(c).then(()=>{s(!0)})},h=x=>{o(x.target.value)},C=()=>{a(),s(!1)};return e(ie,{title:"\u5171\u6709",content:l(w,{spacing:1,children:[e(ae,{variant:"filled",id:"outlined-multiline-static",multiline:!0,onChange:h,rows:10,defaultValue:c,fullWidth:!0}),!!navigator.clipboard&&e(F,{variant:"outlined",startIcon:n?e(N,{}):e(q,{}),onClick:i,fullWidth:!0,children:"\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC"})]}),actions:e(F,{variant:"outlined",onClick:C,children:"\u9589\u3058\u308B"}),onClose:C})},we=()=>{const u=I(),{userSettings:t}=A(),[a,n]=d.exports.useState(_),[s,p]=d.exports.useState(null),[c,o]=d.exports.useState(()=>Z({name:!0,row:!0,type:!0,cost:!1,operationLimit:!1})),i=d.exports.useMemo(()=>{const m=z(U,a);return{possessed:G(m,t.ships),wished:H(m,t),unwishedByUser:K(m,t.ships),unwishedByData:J(m,t)}},[t,a]),h=()=>{u("/myList/edit")},C=()=>{p(i)},x=()=>{p(null)},$=Object.values(c).filter(m=>typeof m=="boolean"&&m).length>3;return l(y,{children:[e(se,{currentRoute:"/myList"}),e(oe,{shipFilter:a,columnConfig:c,onEdit:h,onFilter:n,onShare:C,onColumnConfigChange:o}),e(ne,{disableContainer:$,children:l(b,{p:1,children:[l(w,{pt:1,pb:2,spacing:2,children:[e(r,{variant:"body2",children:v("myList.pageDescription1")}),e(r,{variant:"body2",children:v("myList.pageDescription2")}),e(r,{variant:"body2",children:v("myList.pageDescription3")})]}),e(le,{shipListState:i,columnConfig:c})]})}),s&&e(de,{ships:s,onClose:x}),e(ue,{disableContainer:$})]})};export{we as MyListPage,we as default};
