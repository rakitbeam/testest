import{k as e,j as h,F as O,B as L,t,r as n,w as C,T as f,U as E,W as b,ba as M,d as k,aM as I,q as D,f as _,bb as R,u as A,bc as W,bd as B,a3 as g,aa as $,g as w,ab as q,aO as U,aP as z,aR as Y,m as H,z as j}from"./index.fad91b77.js";import{d as G,C as K}from"./ConfirmationDialog.d19c2848.js";import{d as V,a as J}from"./DeleteForever.b46ff0ff.js";import{S as Q,a as X,s as Z,c as ee}from"./ShipTypeFilterButton.9e312707.js";import{A as ie}from"./ActionBar.5645c7a7.js";import{d as se}from"./Settings.e4d18c93.js";import{T as P,a as T}from"./ToggleButtonGroup.65707baf.js";import{d as te}from"./Clear.27fd9dac.js";import{N as ne,P as oe}from"./PageContent.92ba33e4.js";import{P as ae}from"./PageFooter.ab270402.js";import"./ResponsiveDialog.8ad72488.js";import"./DialogContentText.764208a2.js";import"./domUtils.a1aa94c3.js";import"./useFormControl.ba513f82.js";import"./IconButton.74fcf1eb.js";const re=a=>{const{shipFilter:i,onCancel:s,onSave:o,onReset:c,onFilter:d}=a;return e(ie,{left:r=>e(Q,{filter:i,onChange:d,researchManufacturer:!1,researchStrategyTypes:!1,researchTacticTypes:!1,buttonProps:r},"filter"),right:r=>h(O,{children:[e(L,{variant:"outlined",startIcon:e(V,{}),onClick:c,...r,children:t("button.initialize")},"reset"),e(L,{variant:"outlined",startIcon:e(J,{}),onClick:s,...r,children:t("button.cancel")},"cancel"),e(L,{variant:"contained",startIcon:e(G,{}),onClick:o,...r,children:t("button.save")},"save")]})})},N=a=>{const{label:i,options:s,possession:o,onChange:c}=a,[d,r]=n.exports.useState(o),[u,p]=n.exports.useTransition(),l=(m,y)=>{r(y===null?E.UNDEFINED:Number(y))};return n.exports.useEffect(()=>{p(()=>{c(d)})},[d,c]),h(C,{spacing:1,direction:"row",alignItems:"center",children:[e(f,{variant:"body2",children:i}),h(P,{size:"small",color:"primary",value:`${d}`,exclusive:!0,onChange:l,children:[e(T,{value:`${E.POSSESSED}`,children:s[0]}),e(T,{value:`${E.NOT_POSSESSED}`,children:s[1]})]})]})},F=a=>{const{wish:i,onChange:s}=a,[o,c]=n.exports.useState(i),[d,r]=n.exports.useTransition(),u=(p,l)=>{c(l===null||l==="clear"?b.UNDEFINED:Number(l))};return n.exports.useEffect(()=>{r(()=>{s(o)})},[o,s]),h(C,{spacing:1,direction:"row",alignItems:"center",children:[e(f,{variant:"body2",children:t("myList.wantOption")}),h(P,{size:"small",color:"primary",value:`${o}`,exclusive:!0,onChange:u,children:[e(T,{value:`${b.WANTED}`,children:t("myList.wantOptionYes")}),e(T,{value:`${b.NOT_WANTED}`,children:t("myList.wantOptionNo")}),o!==b.UNDEFINED&&e(T,{value:"clear",children:e(te,{})})]})]})},ce=a=>{const{ship:i,module:s,userSettings:o,setModulePossession:c,setModuleWish:d}=a,r=n.exports.useCallback(m=>{c(s.id,i.id,m)},[s,i,c]),u=n.exports.useCallback(m=>{d(s.id,i.id,m)},[s,i,d]),p=n.exports.useMemo(()=>M(s.id,i.id,o),[s,i,o]),l=k()===I.JAPANESE;return e(D,{component:"div",pl:2,children:h(C,{spacing:3,children:[h("div",{children:[e(f,{variant:"h6",children:`${s.category}${s.categoryNumber} ${_(i.id,s)}`}),l&&s.description&&e(f,{variant:"caption",color:"text.secondary",children:s.description})]}),e(N,{label:t("myList.additionalModuleAcquiredOption"),options:[t("myList.blueprintAcquiredOptionYes"),t("myList.blueprintAcquiredOptionNo")],possession:p,onChange:r}),p===E.NOT_POSSESSED&&e(F,{wish:R(s.id,i.id,o),onChange:u})]})},s.id)},le=a=>{const{ship:i,...s}=a,{userSettings:o,setShipPossession:c,setShipWish:d,setModulePossession:r,setModuleWish:u}=A(),p=n.exports.useMemo(()=>W(i.id,o),[i,o]),l=n.exports.useMemo(()=>B(i.id,o),[i,o]),m=n.exports.useMemo(()=>l!==b.UNDEFINED?!0:i.source===g.TECH_FILE&&p===E.NOT_POSSESSED,[i,p,l]),y=n.exports.useCallback(S=>{c(i.id,S)},[c,i]),x=n.exports.useCallback(S=>{d(i.id,S)},[d,i]);return e($,{elevation:2,...s,children:e(D,{component:"div",p:1,children:h(C,{spacing:3,children:[e(f,{variant:"h6",children:w(i)}),e(N,{label:de(i),options:pe(i),possession:p,onChange:y}),m&&e(F,{wish:l,onChange:x}),(i.source===g.TECH_FILE||i.source===g.STARTER_SHIP)&&p===E.POSSESSED&&i.modules&&i.modules.filter(S=>!S.defaultModule&&S.category!=="STATIC").map(S=>h(n.exports.Fragment,{children:[e(q,{}),e(ce,{ship:i,module:S,userSettings:o,setModulePossession:r,setModuleWish:u})]},S.id))]})})})};function de(a){switch(a.source){case g.CITY_TRADE:return t("myList.shipBoughtOption");case g.DOCK_EFFECT:return t("myList.dockingEffectBlueprintAcquiredOption");case g.SALVAGE:return t("myList.salvageAcquiredOption");default:return t("myList.blueprintAcquiredOption")}}function pe(a){switch(a.source){case g.CITY_TRADE:return[t("myList.shipBoughtOptionYes"),t("myList.shipBoughtOptionNo")];default:return[t("myList.blueprintAcquiredOptionYes"),t("myList.blueprintAcquiredOptionNo")]}}const v=a=>{const{id:i,title:s,shipDefinitions:o,initiallyOpened:c,preRenderDetails:d=!1}=a,[r,u]=n.exports.useState(c),p=n.exports.useCallback((l,m)=>{u(m)},[]);return h(U,{expanded:r,onChange:p,children:[e(z,{id:i,expandIcon:e(se,{}),children:e(f,{variant:"body1",children:s})}),e(Y,{children:(r||d)&&e(C,{spacing:3,children:o.map(l=>e(le,{ship:l},l.id))})})]})},he=a=>{const{shipFilter:i}=a,s=n.exports.useMemo(()=>{const o=X(H,i);return Z(o)},[i]);return h(C,{spacing:1,children:[e("div",{children:e(v,{id:"tech-file-ships",title:t("shipSource.techFile"),initiallyOpened:!1,preRenderDetails:!0,shipDefinitions:s[g.TECH_FILE]})}),e("div",{children:e(v,{id:"city-trade-ships",title:t("shipSource.cityTrade"),initiallyOpened:!1,shipDefinitions:s[g.CITY_TRADE]})}),e("div",{children:e(v,{id:"dock-effect-ships",title:t("shipSource.dockEffect"),initiallyOpened:!1,shipDefinitions:s[g.DOCK_EFFECT]})}),e("div",{children:e(v,{id:"salvage-ships",title:t("shipSource.salvage"),initiallyOpened:!1,shipDefinitions:s[g.SALVAGE]})}),e("div",{children:e(v,{id:"starter-ships",title:t("shipSource.starterShip"),initiallyOpened:!1,shipDefinitions:s[g.STARTER_SHIP]})})]})},Ae=()=>{const a=j(),{saveUserSettings:i,restoreUserSettings:s,resetUserSettings:o}=A(),[c,d]=n.exports.useState(ee),[r,u]=n.exports.useState(!1);n.exports.useEffect(()=>()=>{s()},[s]);const p=n.exports.useCallback(()=>{s(),a("/myList")},[s,a]),l=n.exports.useCallback(()=>{i(),a("/myList")},[i,a]),m=n.exports.useCallback(()=>{u(!1)},[]),y=n.exports.useCallback(()=>{u(!0)},[]),x=n.exports.useCallback(()=>{u(!1),o()},[o]);return h(O,{children:[e(ne,{currentRoute:"/myList"}),e(re,{shipFilter:c,onCancel:p,onReset:y,onSave:l,onFilter:d}),e(oe,{children:h(D,{component:"div",p:1,children:[h(C,{pt:1,pb:2,spacing:2,children:[e(f,{variant:"body2",children:t("myListConfig.pageDescription1")}),e(f,{variant:"body2",children:t("myListConfig.pageDescription2")}),e(f,{variant:"body2",children:t("myListConfig.pageDescription3")})]}),e(he,{shipFilter:c})]})}),r&&e(K,{title:t("button.initialize"),question:t("myList.confirmInitialize"),cancelText:t("button.cancel"),confirmText:t("button.initialize"),onCancel:m,onConfirm:x}),e(ae,{})]})};export{Ae as MyListEditPage,Ae as default};
