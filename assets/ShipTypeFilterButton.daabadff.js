import{C as Z,D as ee,E as $,G as Se,_ as R,j as O,H as te,I as Oe,J as ae,n as k,p as n,K as re,L as z,M as K,N as Te,O as Ce,P as Re,c as se,i as ne,r as oe,Q as W,x as Ee,W as j,R as le,U as me,V as _e,S as E,X as G,Y as c,Z as h,$ as D,a0 as f,a1 as l,a2 as Ne,a as Ae,a3 as be,t as v,a4 as Pe,a5 as Fe,a6 as ye,a7 as xe,F as ke,v as w,a8 as ve,B as X,a9 as De,u as Me}from"./index.9f278538.js";import{B as Ue,C as Be,g as ge,L as we}from"./domUtils.258b4431.js";import{u as Ge,P as He}from"./useFormControl.3bfcccba.js";import{G as Le,M as We,a as $e,L as ze}from"./PageContent.8ddaee03.js";function Ke(e){return Z("PrivateSwitchBase",e)}ee("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const je=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Ve=e=>{const{classes:t,checked:a,disabled:r,edge:s}=e,o={root:["root",a&&"checked",r&&"disabled",s&&`edge${z(s)}`],input:["input"]};return ae(o,Ke,t)},Ye=$(Se)(({ownerState:e})=>R({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Je=$("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),qe=O.exports.forwardRef(function(t,a){const{autoFocus:r,checked:s,checkedIcon:o,className:p,defaultChecked:d,disabled:u,disableFocusRipple:i=!1,edge:m=!1,icon:I,id:T,inputProps:M,inputRef:b,name:U,onBlur:P,onChange:F,onFocus:_,readOnly:g,required:S,tabIndex:x,type:y,value:N}=t,ue=te(t,je),[J,de]=Oe({controlled:s,default:Boolean(d),name:"SwitchBase",state:"checked"}),A=Ge(),he=C=>{_&&_(C),A&&A.onFocus&&A.onFocus(C)},fe=C=>{P&&P(C),A&&A.onBlur&&A.onBlur(C)},pe=C=>{if(C.nativeEvent.defaultPrevented)return;const Q=C.target.checked;de(Q),F&&F(C,Q)};let B=u;A&&typeof B=="undefined"&&(B=A.disabled);const Ie=y==="checkbox"||y==="radio",H=R({},t,{checked:J,disabled:B,disableFocusRipple:i,edge:m}),q=Ve(H);return k(Ye,R({component:"span",className:re(q.root,p),centerRipple:!0,focusRipple:!i,disabled:B,tabIndex:null,role:void 0,onFocus:he,onBlur:fe,ownerState:H,ref:a},ue,{children:[n(Je,R({autoFocus:r,checked:s,defaultChecked:d,className:q.input,disabled:B,id:Ie&&T,name:U,onChange:pe,readOnly:g,ref:b,required:S,ownerState:H,tabIndex:x,type:y},y==="checkbox"&&N===void 0?{}:{value:N},M)),J?o:I]}))});var Qe=qe,Xe=K(n("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Ze=K(n("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),et=K(n("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function tt(e){return Z("MuiCheckbox",e)}const at=ee("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]);var L=at;const rt=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],st=e=>{const{classes:t,indeterminate:a,color:r}=e,s={root:["root",a&&"indeterminate",`color${z(r)}`]},o=ae(s,tt,t);return R({},t,o)},nt=$(Qe,{shouldForwardProp:e=>Te(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,a.color!=="default"&&t[`color${z(a.color)}`]]}})(({theme:e,ownerState:t})=>R({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ce(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${L.checked}, &.${L.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${L.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),ot=n(Ze,{}),lt=n(Xe,{}),ct=n(et,{}),it=O.exports.forwardRef(function(t,a){var r,s;const o=Re({props:t,name:"MuiCheckbox"}),{checkedIcon:p=ot,color:d="primary",icon:u=lt,indeterminate:i=!1,indeterminateIcon:m=ct,inputProps:I,size:T="medium",className:M}=o,b=te(o,rt),U=i?m:u,P=i?m:p,F=R({},o,{color:d,indeterminate:i,size:T}),_=st(F);return n(nt,R({type:"checkbox",inputProps:R({"data-indeterminate":i},I),icon:O.exports.cloneElement(U,{fontSize:(r=U.props.fontSize)!=null?r:T}),checkedIcon:O.exports.cloneElement(P,{fontSize:(s=P.props.fontSize)!=null?s:T}),ownerState:F,ref:a,className:re(_.root,M)},b,{classes:_}))});var ut=it,V={},dt=ne.exports;Object.defineProperty(V,"__esModule",{value:!0});var ce=V.default=void 0,ht=dt(se),ft=oe,pt=(0,ht.default)((0,ft.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt");ce=V.default=pt;var Y={},It=ne.exports;Object.defineProperty(Y,"__esModule",{value:!0});var ie=Y.default=void 0,St=It(se),Ot=oe,Tt=(0,St.default)((0,Ot.jsx)("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z"}),"FilterAltOff");ie=Y.default=Tt;function Ct(e){return(e!=null?e:[E.FRONT,E.MIDDLE,E.BACK]).map(t=>({filterKey:t,name:Ae(t)}))}function Rt(e){return(e!=null?e:Object.keys(G)).map(t=>({filterKey:t,name:G[t].name}))}function Et(e){return(e!=null?e:[c.JUPITER_INDUSTRIES,c.NOMA_SHIPPING_GROUP,c.ANTONIOS_CONSORTIUM,c.DAWN_ACCORD,c.HAYREDDIN_CLAN]).map(t=>({filterKey:t,name:be(t)}))}function mt(e){return(e!=null?e:[l.CITY_TRADE,l.DOCK_EFFECT,l.SALVAGE]).map(t=>({filterKey:t,name:xe(t)}))}function _t(e){return(e!=null?e:[h.JUPITER_INDUSTRIES,h.NOMA_SHIPPING_GROUP,h.ANTONIOS_CONSORTIUM,h.DAWN_ACCORD]).map(t=>({filterKey:t,name:v("label.researchManufacturerOption",{manufacturer:Pe(t)})}))}function Nt(e){return(e!=null?e:[f.OUTSTANDING_FIREPOWER,f.SUSTAINED_COMBAT,f.STRATEGY_AND_SUPPORT,f.FIGHTER_AND_CORVETTE]).map(t=>({filterKey:t,name:v("label.researchStrategyTypeOption",{strategyType:ye(t)})}))}function At(e){return(e!=null?e:[D.PROJECTILE_WEAPONS,D.DIRECT_FIRE_WEAPONS]).map(t=>({filterKey:t,name:v("label.researchTacticTypeOption",{tacticType:Fe(t)})}))}function bt(e={}){var t,a,r,s,o,p,d;return[...Ct((t=e.shipRows)!=null?t:null),...Rt((a=e.shipTypes)!=null?a:null),...Et((r=e.manufacturer)!=null?r:null),...e.researchManufacturer===!1?[]:_t((s=e.researchManufacturer)!=null?s:null),...e.researchTacticTypes===!1?[]:At((o=e.researchTacticTypes)!=null?o:null),...e.researchStrategyTypes===!1?[]:Nt((p=e.researchStrategyTypes)!=null?p:null),...mt((d=e.shipSources)!=null?d:null)]}function Ht(){return{[E.FRONT]:!1,[E.MIDDLE]:!1,[E.BACK]:!1,...Object.keys(G).reduce((e,t)=>({...e,[t]:!1}),{}),[c.JUPITER_INDUSTRIES]:!1,[c.NOMA_SHIPPING_GROUP]:!1,[c.ANTONIOS_CONSORTIUM]:!1,[c.DAWN_ACCORD]:!1,[c.HAYREDDIN_CLAN]:!1,[h.JUPITER_INDUSTRIES]:!1,[h.NOMA_SHIPPING_GROUP]:!1,[h.ANTONIOS_CONSORTIUM]:!1,[h.DAWN_ACCORD]:!1,[D.PROJECTILE_WEAPONS]:!1,[D.DIRECT_FIRE_WEAPONS]:!1,[f.OUTSTANDING_FIREPOWER]:!1,[f.SUSTAINED_COMBAT]:!1,[f.STRATEGY_AND_SUPPORT]:!1,[f.FIGHTER_AND_CORVETTE]:!1,[l.TECH_FILE]:!1,[l.CITY_TRADE]:!1,[l.DOCK_EFFECT]:!1,[l.SALVAGE]:!1,[l.STARTER_SHIP]:!1}}function Pt(e){const t={...e};return Object.keys(t).forEach(a=>{t[a]=!1}),t}function Lt(e,t){let a=e;return Ft(t)&&(a=a.filter(r=>t[r.row]===!0)),yt(t)&&(a=a.filter(r=>t[r.type]===!0)),kt(t)&&(a=a.filter(r=>t[r.manufacturer]===!0)),vt(t)&&(a=a.filter(r=>r.researchManufacturer&&t[r.researchManufacturer]===!0)),Dt(t)&&(a=a.filter(r=>{var s;return((s=r.researchStrategyTypes)!=null?s:[]).some(o=>t[o]===!0)})),Mt(t)&&(a=a.filter(r=>{var s;return((s=r.researchTacticTypes)!=null?s:[]).some(o=>t[o]===!0)})),xt(t)&&(a=a.filter(r=>t[r.source]===!0)),a}function Wt(e){const t={[l.STARTER_SHIP]:[],[l.TECH_FILE]:[],[l.CITY_TRADE]:[],[l.DOCK_EFFECT]:[],[l.SALVAGE]:[],[l.UNKNOWN]:[]};return e.forEach(a=>{t[a.source].push(a)}),t}function Ft(e){return[E.FRONT,E.MIDDLE,E.BACK].some(t=>e[t]===!0)}function yt(e){return Object.keys(G).some(t=>e[t]===!0)}function xt(e){return Object.keys(Ne).some(t=>e[t]===!0)}function kt(e){return[c.JUPITER_INDUSTRIES,c.NOMA_SHIPPING_GROUP,c.ANTONIOS_CONSORTIUM,c.DAWN_ACCORD,c.HAYREDDIN_CLAN].some(t=>e[t]===!0)}function vt(e){return[h.JUPITER_INDUSTRIES,h.NOMA_SHIPPING_GROUP,h.ANTONIOS_CONSORTIUM,h.DAWN_ACCORD].some(t=>e[t]===!0)}function Dt(e){return[f.OUTSTANDING_FIREPOWER,f.SUSTAINED_COMBAT,f.STRATEGY_AND_SUPPORT,f.FIGHTER_AND_CORVETTE].some(t=>e[t]===!0)}function Mt(e){return[D.PROJECTILE_WEAPONS,D.DIRECT_FIRE_WEAPONS].some(t=>e[t]===!0)}function $t(e,t){return e.filter(a=>{var r;return((r=t[a.id])==null?void 0:r.possession)===W.POSSESSED})}function zt(e,t){return e.filter(a=>{var r;return Ee(a,t).length>0?!0:((r=t.ships[a.id])==null?void 0:r.wish)===j.WANTED})}function Kt(e,t){return e.filter(a=>{var r;return le(a.id)&&((r=t[a.id])==null?void 0:r.wish)===j.NOT_WANTED})}function jt(e,t){return e.filter(s=>s.source===l.TECH_FILE||s.source===l.STARTER_SHIP).filter(s=>{var o;return((o=t.ships[s.id])==null?void 0:o.possession)===W.POSSESSED}).filter(s=>{var o,p,d;if(!!s.modules&&me(s,t).length>0||s.baseModelId)return!1;if(!!s.subModelIds||!!s.baseModelId){const u=(d=(p=s.subModelIds)!=null?p:(o=_e(s.baseModelId))==null?void 0:o.subModelIds)!=null?d:[];return Ut(u,t.ships)?!(u.filter(I=>le(I)&&!!t.ships[I]&&t.ships[I].possession!==W.POSSESSED).filter(I=>t.ships[I].wish!==j.NOT_WANTED).length>0):!1}return!0})}function Ut(e,t){return e.length>0&&e.every(a=>{var r;return!!((r=t[a])!=null&&r.possession)})}const Vt=e=>{const{onChange:t,popperProps:a,shipRows:r,shipTypes:s,researchManufacturer:o,researchStrategyTypes:p,researchTacticTypes:d,buttonProps:u}=e,[i,m]=O.exports.useState(e.filter),[I,T]=O.exports.useState(!1),[M]=O.exports.useState(()=>bt({shipRows:r,shipTypes:s,researchManufacturer:o,researchStrategyTypes:p,researchTacticTypes:d})),b=O.exports.useRef(null),[U,P]=O.exports.useTransition(),F=S=>{m(x=>({...x,[S]:!x[S]}))},_=()=>{m(S=>Pt(S))};O.exports.useEffect(()=>{P(()=>{t(i)})},[i,t]);const g=Object.values(i).some(S=>S);return k(ke,{children:[k(Ue,{variant:"outlined",ref:b,fullWidth:u==null?void 0:u.fullWidth,size:u==null?void 0:u.size,children:[n(w,{startIcon:n(ce,{}),onClick:()=>T(!0),sx:{flexShrink:1},children:v("button.filter")}),g&&n(w,{size:"small",onClick:_,sx:{flexShrink:3},children:n(ie,{})})]},"filter"),n(He,{open:I,anchorEl:b.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1},...a,children:({TransitionProps:S,placement:x})=>{var y;return n(Le,{...S,style:{transformOrigin:x==="bottom"?"center top":"center bottom"},children:n("div",{children:n(Be,{onClickAway:()=>T(!1),children:k(ve,{children:[n(X,{sx:{overflowY:"auto",maxHeight:`${((y=ge(b.current))!=null?y:0)-50}px`},children:n(We,{id:"split-button-menu",children:M.map(N=>k($e,{selected:i[N.filterKey],onClick:()=>F(N.filterKey),children:[n(we,{children:n(ut,{edge:"start",checked:i[N.filterKey],tabIndex:-1,disableRipple:!0})}),n(ze,{children:N.name})]},N.filterKey))})}),n(De,{}),n(X,{p:1,display:"flex",justifyContent:"end",children:k(Me,{spacing:1,direction:"row",children:[n(w,{variant:"outlined",onClick:_,disabled:!g,children:v("button.unselectAll")}),n(w,{variant:"outlined",onClick:()=>T(!1),children:v("button.close")})]})})]})})})})}})]})};export{ut as C,Vt as S,Lt as a,zt as b,Ht as c,Kt as d,$t as e,jt as f,Qe as g,Wt as s};
