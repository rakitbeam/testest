import{J as O,K as j,L as z,o as n,r as u,a as g,F as w,j as l,B as L,a2 as B,b as K,a3 as _,an as q,i as s,k as o,ao as N,O as W,T as v,ap as $,f as E,s as A,t as P,aq as H,ar as G,as as k,Z as J,at as F,$ as Y,au as R,a0 as Z,av as p,a1 as Q,aw as S,ax as U}from"./index.531fed33.js";import{B as X,C as ee,g as re,L as ae}from"./domUtils.1d28d34d.js";import{P as te}from"./useFormControl.df327b55.js";import{G as ne,M as se,a as le,L as oe}from"./PageContent.366fb375.js";import{C as ce}from"./ShipTypeFilterButton.101cccde.js";import{u as ie,T as pe}from"./useTable.4d4a5d7a.js";var x={},ue=j.exports;Object.defineProperty(x,"__esModule",{value:!0});var I=x.default=void 0,me=ue(O),he=z,de=(0,me.default)((0,he.jsx)("path",{d:"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z"}),"ViewColumn");I=x.default=de;function Be(e={}){return{name:!0,type:!1,row:!1,cost:!1,operationLimit:!1,dpmShip:!1,dpmAntiAir:!1,dpmSiege:!1,hp:!1,speed:!1,warpSpeed:!1,source:!1,manufacturer:!1,researchManufacturer:!1,researchStrategyType:!1,researchTacticType:!1,weight:!1,...e}}function ye(e){const{disableResearchAgreementOptions:r}=e;return[{columnKey:"type",name:n("label.shipType")},{columnKey:"row",name:n("label.rowPlacement")},{columnKey:"cost",name:n("label.commandPoints")},{columnKey:"operationLimit",name:n("label.operationLimit")},{columnKey:"dpmShip",name:n("label.antiShipDpm")},{columnKey:"dpmAntiAir",name:n("label.antiAirDpm")},{columnKey:"dpmSiege",name:n("label.siegeDpm")},{columnKey:"hp",name:n("label.hp")},{columnKey:"speed",name:n("label.cruiseSpeed")},{columnKey:"warpSpeed",name:n("label.warpSpeed")},{columnKey:"source",name:n("label.acquirableThrough")},{columnKey:"manufacturer",name:n("label.manufacturer")},...r!==!0?[{columnKey:"researchManufacturer",name:n("label.researchManufacturerColumn")},{columnKey:"researchStrategyType",name:n("label.researchStrategyTypeColumn")},{columnKey:"researchTacticType",name:n("label.researchTacticTypeColumn")}]:[],{columnKey:"weight",name:n("label.probabilityWeight")}]}const _e=e=>{const{onChange:r,buttonProps:a,disableResearchAgreementOptions:t}=e,[c,i]=u.exports.useState(e.columnConfig),[T,m]=u.exports.useState(!1),[D]=u.exports.useState(()=>ye({disableResearchAgreementOptions:t})),y=u.exports.useRef(null),V=h=>{i(C=>({...C,[h]:!C[h]}))};return u.exports.useEffect(()=>{const h=setTimeout(()=>{r(c)},0);return()=>clearTimeout(h)},[c,r]),g(w,{children:[l(X,{variant:"outlined",fullWidth:a==null?void 0:a.fullWidth,size:a==null?void 0:a.size,ref:y,children:l(L,{startIcon:l(I,{}),onClick:()=>m(!0),children:n("button.displayItems")})},"columnConfig"),l(te,{open:T,anchorEl:y.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1},children:({TransitionProps:h,placement:C})=>{var M;return l(ne,{...h,style:{transformOrigin:C==="bottom"?"center top":"center bottom"},children:l("div",{children:l(ee,{onClickAway:()=>m(!1),children:g(B,{children:[l(K,{sx:{overflowY:"auto",maxHeight:`${((M=re(y.current))!=null?M:0)-50}px`},children:l(se,{id:"split-button-menu",children:D.map(f=>g(le,{selected:c[f.columnKey],onClick:()=>V(f.columnKey),children:[l(ae,{children:l(ce,{edge:"start",checked:c[f.columnKey],tabIndex:-1,disableRipple:!0})}),l(oe,{children:f.name})]},f.columnKey))})}),l(_,{}),l(K,{p:1,display:"flex",justifyContent:"end",children:l(L,{variant:"outlined",onClick:()=>m(!1),children:n("button.close")})})]})})})})}})]})},fe=e=>({id:"nameLink",renderHeader:()=>n("label.shipName"),renderCell:r=>{var t;return((t=e.decorateName)!=null?t:(c,i)=>c)(l(v,{variant:"body2",children:l($,{onClick:()=>{e.onClick(r.id)},children:s(r)})}),r)},sortFn:(r,a)=>s(r).localeCompare(s(a),o())}),Te={id:"type",renderHeader:()=>n("label.shipType"),renderCell:e=>E(e.type,e.subType),sortFn:[(e,r)=>A(e.type,e.subType)-A(r.type,r.subType),(e,r)=>s(e).localeCompare(s(r),o())],initialSortDirection:"asc"},Ce={id:"row",renderHeader:()=>n("label.rowPlacement"),renderCell:e=>P(e.row),sortFn:[(e,r)=>H(e.row)-H(r.row),(e,r)=>s(e).localeCompare(s(r),o())]},Se={id:"cost",renderHeader:()=>n("label.commandPoints"),renderCell:e=>e.cost,sortFn:[(e,r)=>e.cost-r.cost,(e,r)=>s(e).localeCompare(s(r),o())]},ge={id:"operationLimit",renderHeader:()=>n("label.operationLimit"),renderCell:e=>e.operationLimit,sortFn:[(e,r)=>e.operationLimit-r.operationLimit,(e,r)=>s(e).localeCompare(s(r),o())]},be={id:"source",renderHeader:()=>n("label.acquirableThrough"),renderCell:e=>G(e.source),sortFn:[(e,r)=>k(e.source)-k(r.source),(e,r)=>s(e).localeCompare(s(r),o())]},we={id:"manufacturer",renderHeader:()=>n("label.manufacturer"),renderCell:e=>J(e.manufacturer),sortFn:[(e,r)=>F(e.manufacturer)-F(r.manufacturer),(e,r)=>s(e).localeCompare(s(r),o())]},ve={id:"researchManufacturer",renderHeader:()=>n("label.researchManufacturerColumn"),renderCell:e=>e.researchManufacturer?Y(e.researchManufacturer):"-",sortFn:[(e,r)=>(e.researchManufacturer?R(e.researchManufacturer):0)-(r.researchManufacturer?R(r.researchManufacturer):0),(e,r)=>s(e).localeCompare(s(r),o())]},xe={id:"researchStrategyType",renderHeader:()=>n("label.researchStrategyTypeColumn"),renderCell:e=>{var r,a;return l(w,{children:(a=(r=e.researchStrategyTypes)==null?void 0:r.map(t=>l(v,{variant:"body2",children:Z(t)},t)))!=null?a:"-"})},sortFn:[(e,r)=>{var a,t;return((a=e.researchStrategyTypes)!=null&&a[0]?p(e.researchStrategyTypes[0]):0)-((t=r.researchStrategyTypes)!=null&&t[0]?p(r.researchStrategyTypes[0]):0)},(e,r)=>{var a,t;return((a=e.researchStrategyTypes)!=null&&a[1]?p(e.researchStrategyTypes[1]):0)-((t=r.researchStrategyTypes)!=null&&t[1]?p(r.researchStrategyTypes[1]):0)},(e,r)=>{var a,t;return((a=e.researchStrategyTypes)!=null&&a[2]?p(e.researchStrategyTypes[2]):0)-((t=r.researchStrategyTypes)!=null&&t[2]?p(r.researchStrategyTypes[2]):0)},(e,r)=>{var a,t;return((a=e.researchStrategyTypes)!=null&&a[3]?p(e.researchStrategyTypes[3]):0)-((t=r.researchStrategyTypes)!=null&&t[3]?p(r.researchStrategyTypes[3]):0)},(e,r)=>s(e).localeCompare(s(r),o())]},De={id:"researchTacticType",renderHeader:()=>n("label.researchTacticTypeColumn"),renderCell:e=>{var r,a;return l(w,{children:(a=(r=e.researchTacticTypes)==null?void 0:r.map(t=>l(v,{variant:"body2",children:Q(t)},t)))!=null?a:"-"})},sortFn:[(e,r)=>{var a,t;return((a=e.researchTacticTypes)!=null&&a[0]?S(e.researchTacticTypes[0]):0)-((t=r.researchTacticTypes)!=null&&t[0]?S(r.researchTacticTypes[0]):0)},(e,r)=>{var a,t;return((a=e.researchTacticTypes)!=null&&a[1]?S(e.researchTacticTypes[1]):0)-((t=r.researchTacticTypes)!=null&&t[1]?S(r.researchTacticTypes[1]):0)},(e,r)=>s(e).localeCompare(s(r),o())]},Me={id:"weight",renderHeader:()=>n("label.probabilityWeight"),renderCell:e=>e.weight,sortFn:[(e,r)=>e.weight-r.weight,(e,r)=>s(e).localeCompare(s(r),o())]},Le=d(n("label.antiShipDpm"),"dpmShip"),Ke=d(n("label.antiAirDpm"),"dpmAntiAir"),Ae=d(n("label.siegeDpm"),"dpmSiege"),He=d(n("label.hp"),"hp"),ke=d(n("label.cruiseSpeed"),"speed"),Fe=d(n("label.warpSpeed"),"warpSpeed");function d(e,r){return{id:r,renderHeader:()=>e,renderCell:a=>q(b(a.id,r)),sortFn:[(a,t)=>{var c,i;return((c=b(a.id,r))!=null?c:0)-((i=b(t.id,r))!=null?i:0)},(a,t)=>s(a).localeCompare(s(t),o())]}}function b(e,r){var t;const a=(t=N(W(e),null))==null?void 0:t[r];if(typeof a=="boolean")throw new Error(`${r} is not a numeric value`);return a}const qe=e=>{const{shipDefinitions:r,columnConfig:a,decorateName:t}=e,{table:c,setTableData:i}=ie(),{openShipDetailDialog:T}=U(),m=u.exports.useMemo(()=>[fe({onClick:T,decorateName:t}),...a.type?[Te]:[],...a.row?[Ce]:[],...a.cost?[Se]:[],...a.operationLimit?[ge]:[],...a.dpmShip?[Le]:[],...a.dpmAntiAir?[Ke]:[],...a.dpmSiege?[Ae]:[],...a.hp?[He]:[],...a.speed?[ke]:[],...a.warpSpeed?[Fe]:[],...a.source?[be]:[],...a.manufacturer?[we]:[],...a.researchManufacturer?[ve]:[],...a.researchStrategyType?[xe]:[],...a.researchTacticType?[De]:[],...a.weight?[Me]:[]],[a,t,T]);return u.exports.useEffect(()=>{i({columns:m,data:r,rowIdFn:y=>y.id})},[i,m,r]),l(pe,{table:c,size:"small"})};export{_e as C,qe as S,Be as c};
