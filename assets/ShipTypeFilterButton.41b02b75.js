import{m as X,n as Z,o as W,p as pe,_ as C,r as T,q as ee,v as Ie,w as te,a as k,j as n,x as Se,y as G,z,A as Oe,C as Te,D as Ce,E as re,G as ae,H as se,P as H,c as me,W as L,I as ne,J as Re,K as _e,d as m,L as g,M as l,R as d,N as h,O as y,Q as b,t as Ne,U as Ee,V as Ae,X as Fe,Y as be,F as Pe,B,Z as xe,b as Q,$ as ke,S as ye}from"./index.c039a330.js";import{B as ve,C as De,g as Me,L as Ue}from"./domUtils.ce2430b3.js";import{u as Be,P as ge,G as we,M as $e,a as He}from"./MenuItem.4c8f9fde.js";import{L as We}from"./PageContent.0b3f4b0c.js";function Ge(e){return X("PrivateSwitchBase",e)}Z("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ze=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Le=e=>{const{classes:t,checked:r,disabled:a,edge:s}=e,o={root:["root",r&&"checked",a&&"disabled",s&&`edge${G(s)}`],input:["input"]};return te(o,Ge,t)},je=W(pe,{skipSx:!0})(({ownerState:e})=>C({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Ke=W("input",{skipSx:!0})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Je=T.exports.forwardRef(function(t,r){const{autoFocus:a,checked:s,checkedIcon:o,className:f,defaultChecked:I,disabled:i,disableFocusRipple:c=!1,edge:R=!1,icon:p,id:S,inputProps:v,inputRef:_,name:P,onBlur:N,onChange:A,onFocus:u,readOnly:x,required:M,tabIndex:F,type:U,value:J}=t,ce=ee(t,ze),[q,ie]=Ie({controlled:s,default:Boolean(I),name:"SwitchBase",state:"checked"}),E=Be(),ue=O=>{u&&u(O),E&&E.onFocus&&E.onFocus(O)},de=O=>{N&&N(O),E&&E.onBlur&&E.onBlur(O)},he=O=>{if(O.nativeEvent.defaultPrevented)return;const V=O.target.checked;ie(V),A&&A(O,V)};let D=i;E&&typeof D=="undefined"&&(D=E.disabled);const fe=U==="checkbox"||U==="radio",w=C({},t,{checked:q,disabled:D,disableFocusRipple:c,edge:R}),Y=Le(w);return k(je,C({component:"span",className:Se(Y.root,f),centerRipple:!0,focusRipple:!c,disabled:D,tabIndex:null,role:void 0,onFocus:ue,onBlur:de,ownerState:w,ref:r},ce,{children:[n(Ke,C({autoFocus:a,checked:s,defaultChecked:I,className:Y.input,disabled:D,id:fe&&S,name:P,onChange:he,readOnly:x,ref:_,required:M,ownerState:w,tabIndex:F,type:U},U==="checkbox"&&J===void 0?{}:{value:J},v)),q?o:p]}))});var qe=Je,Ye=z(n("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Ve=z(n("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Qe=z(n("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Xe(e){return X("MuiCheckbox",e)}const Ze=Z("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]);var $=Ze;const et=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],tt=e=>{const{classes:t,indeterminate:r,color:a}=e,s={root:["root",r&&"indeterminate",`color${G(a)}`]},o=te(s,Xe,t);return C({},t,o)},rt=W(qe,{shouldForwardProp:e=>Oe(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,r.color!=="default"&&t[`color${G(r.color)}`]]}})(({theme:e,ownerState:t})=>C({color:e.palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:Te(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${$.checked}, &.${$.indeterminate}`]:{color:e.palette[t.color].main},[`&.${$.disabled}`]:{color:e.palette.action.disabled}})),at=n(Ve,{}),st=n(Ye,{}),nt=n(Qe,{}),ot=T.exports.forwardRef(function(t,r){var a,s;const o=Ce({props:t,name:"MuiCheckbox"}),{checkedIcon:f=at,color:I="primary",icon:i=st,indeterminate:c=!1,indeterminateIcon:R=nt,inputProps:p,size:S="medium"}=o,v=ee(o,et),_=c?R:i,P=c?R:f,N=C({},o,{color:I,indeterminate:c,size:S}),A=tt(N);return n(rt,C({type:"checkbox",inputProps:C({"data-indeterminate":c},p),icon:T.exports.cloneElement(_,{fontSize:(a=_.props.fontSize)!=null?a:S}),checkedIcon:T.exports.cloneElement(P,{fontSize:(s=P.props.fontSize)!=null?s:S}),ownerState:N,ref:r},v,{classes:A}))});var lt=ot,j={},ct=ae.exports;Object.defineProperty(j,"__esModule",{value:!0});var oe=j.default=void 0,it=ct(re),ut=se,dt=(0,it.default)((0,ut.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt");oe=j.default=dt;var K={},ht=ae.exports;Object.defineProperty(K,"__esModule",{value:!0});var le=K.default=void 0,ft=ht(re),pt=se,It=(0,ft.default)((0,pt.jsx)("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z"}),"FilterAltOff");le=K.default=It;function St(e){return(e!=null?e:[m.FRONT,m.MIDDLE,m.BACK]).map(t=>({filterKey:t,name:Ne(t)}))}function Ot(e){return(e!=null?e:Object.keys(g)).map(t=>({filterKey:t,name:g[t].name}))}function Tt(e){return(e!=null?e:[l.JUPITER_INDUSTRIES,l.NOMA_SHIPPING_GROUP,l.ANTONIOS_CONSORTIUM,l.DAWN_ACCORD,l.HAYREDDIN_CLAN]).map(t=>({filterKey:t,name:Ee(t)}))}function Ct(e){return(e!=null?e:[d.JUPITER_INDUSTRIES,d.NOMA_SHIPPING_GROUP,d.ANTONIOS_CONSORTIUM,d.DAWN_ACCORD]).map(t=>({filterKey:t,name:`\u59D4\u8A17\u4F01\u696D\uFF1A${Ae(t)}`}))}function mt(e){return(e!=null?e:[h.OUTSTANDING_FIREPOWER,h.SUSTAINED_COMBAT,h.STRATEGY_AND_SUPPORT,h.FIGHTER_AND_CORVETTE]).map(t=>({filterKey:t,name:`\u6226\u7565\u80FD\u529B\uFF1A${Fe(t)}`}))}function Rt(e){return(e!=null?e:[y.PROJECTILE_WEAPONS,y.DIRECT_FIRE_WEAPONS]).map(t=>({filterKey:t,name:`\u6226\u8853\u6027\u80FD\uFF1A${be(t)}`}))}function _t(e={}){var t,r,a,s,o,f;return[...St((t=e.shipRows)!=null?t:null),...Ot((r=e.shipTypes)!=null?r:null),...Tt((a=e.manufacturer)!=null?a:null),...e.researchManufacturer===!1?[]:Ct((s=e.researchManufacturer)!=null?s:null),...e.researchStrategyTypes===!1?[]:mt((o=e.researchStrategyTypes)!=null?o:null),...e.researchTacticTypes===!1?[]:Rt((f=e.researchTacticTypes)!=null?f:null)]}function Ut(){return{[m.FRONT]:!1,[m.MIDDLE]:!1,[m.BACK]:!1,...Object.keys(g).reduce((e,t)=>({...e,[t]:!1}),{}),[l.JUPITER_INDUSTRIES]:!1,[l.NOMA_SHIPPING_GROUP]:!1,[l.ANTONIOS_CONSORTIUM]:!1,[l.DAWN_ACCORD]:!1,[l.HAYREDDIN_CLAN]:!1,[d.JUPITER_INDUSTRIES]:!1,[d.NOMA_SHIPPING_GROUP]:!1,[d.ANTONIOS_CONSORTIUM]:!1,[d.DAWN_ACCORD]:!1,[h.OUTSTANDING_FIREPOWER]:!1,[h.SUSTAINED_COMBAT]:!1,[h.STRATEGY_AND_SUPPORT]:!1,[h.FIGHTER_AND_CORVETTE]:!1,[y.PROJECTILE_WEAPONS]:!1,[y.DIRECT_FIRE_WEAPONS]:!1}}function Nt(e){const t={...e};return Object.keys(t).forEach(r=>{t[r]=!1}),t}function Bt(e,t){let r=e;return Et(t)&&(r=r.filter(a=>t[a.row]===!0)),At(t)&&(r=r.filter(a=>t[a.type]===!0)),Ft(t)&&(r=r.filter(a=>t[a.manufacturer]===!0)),bt(t)&&(r=r.filter(a=>a.researchManufacturer&&t[a.researchManufacturer]===!0)),Pt(t)&&(r=r.filter(a=>{var s;return((s=a.researchStrategyTypes)!=null?s:[]).some(o=>t[o]===!0)})),xt(t)&&(r=r.filter(a=>{var s;return((s=a.researchTacticTypes)!=null?s:[]).some(o=>t[o]===!0)})),r}function gt(e){const t={[b.STARTER_SHIP]:[],[b.TECH_FILE]:[],[b.CITY_TRADE]:[],[b.DOCK_EFFECT]:[],[b.UNKNOWN]:[]};return e.forEach(r=>{t[r.source].push(r)}),t}function Et(e){return[m.FRONT,m.MIDDLE,m.BACK].some(t=>e[t]===!0)}function At(e){return Object.keys(g).some(t=>e[t]===!0)}function Ft(e){return[l.JUPITER_INDUSTRIES,l.NOMA_SHIPPING_GROUP,l.ANTONIOS_CONSORTIUM,l.DAWN_ACCORD,l.HAYREDDIN_CLAN].some(t=>e[t]===!0)}function bt(e){return[d.JUPITER_INDUSTRIES,d.NOMA_SHIPPING_GROUP,d.ANTONIOS_CONSORTIUM,d.DAWN_ACCORD].some(t=>e[t]===!0)}function Pt(e){return[h.OUTSTANDING_FIREPOWER,h.SUSTAINED_COMBAT,h.STRATEGY_AND_SUPPORT,h.FIGHTER_AND_CORVETTE].some(t=>e[t]===!0)}function xt(e){return[y.PROJECTILE_WEAPONS,y.DIRECT_FIRE_WEAPONS].some(t=>e[t]===!0)}function wt(e,t){return e.filter(r=>{var a;return((a=t[r.id])==null?void 0:a.possession)===H.POSSESSED})}function $t(e,t){return e.filter(r=>{var a;return me(r,t).length>0?!0:((a=t.ships[r.id])==null?void 0:a.wish)===L.WANTED})}function Ht(e,t){return e.filter(r=>{var a;return ne(r.id)&&((a=t[r.id])==null?void 0:a.wish)===L.NOT_WANTED})}function Wt(e,t){return e.filter(s=>s.source===b.TECH_FILE||s.source===b.STARTER_SHIP).filter(s=>{var o;return((o=t.ships[s.id])==null?void 0:o.possession)===H.POSSESSED}).filter(s=>{var o,f,I;if(!!s.modules&&Re(s,t).length>0||s.baseModelId)return!1;if(!!s.subModelIds||!!s.baseModelId){const i=(I=(f=s.subModelIds)!=null?f:(o=_e(s.baseModelId))==null?void 0:o.subModelIds)!=null?I:[];return kt(i,t.ships)?!(i.filter(p=>ne(p)&&!!t.ships[p]&&t.ships[p].possession!==H.POSSESSED).filter(p=>t.ships[p].wish!==L.NOT_WANTED).length>0):!1}return!0})}function kt(e,t){return e.length>0&&e.every(r=>{var a;return!!((a=t[r])!=null&&a.possession)})}const Gt=e=>{const{onChange:t,popperProps:r,shipRows:a,shipTypes:s,researchManufacturer:o,researchStrategyTypes:f,researchTacticTypes:I,buttonProps:i}=e,[c,R]=T.exports.useState(e.filter),[p,S]=T.exports.useState(!1),[v]=T.exports.useState(()=>_t({shipRows:a,shipTypes:s,researchManufacturer:o,researchStrategyTypes:f,researchTacticTypes:I})),_=T.exports.useRef(null),P=u=>{R(x=>({...x,[u]:!x[u]}))},N=()=>{R(u=>Nt(u))};T.exports.useEffect(()=>{const u=setTimeout(()=>{t(c)},0);return()=>clearTimeout(u)},[c,t]);const A=Object.values(c).some(u=>u);return k(Pe,{children:[k(ve,{variant:"outlined",ref:_,fullWidth:i==null?void 0:i.fullWidth,size:i==null?void 0:i.size,children:[n(B,{startIcon:n(oe,{}),onClick:()=>S(!0),sx:{flexShrink:1},children:"\u30D5\u30A3\u30EB\u30BF\u30FC"}),A&&n(B,{size:"small",onClick:N,sx:{flexShrink:3},children:n(le,{})})]},"filter"),n(ge,{open:p,anchorEl:_.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1},...r,children:({TransitionProps:u,placement:x})=>{var M;return n(we,{...u,style:{transformOrigin:x==="bottom"?"center top":"center bottom"},children:n("div",{children:n(De,{onClickAway:()=>S(!1),children:k(xe,{children:[n(Q,{sx:{overflowY:"auto",maxHeight:`${((M=Me(_.current))!=null?M:0)-50}px`},children:n($e,{id:"split-button-menu",children:v.map(F=>k(He,{selected:c[F.filterKey],onClick:()=>P(F.filterKey),children:[n(Ue,{children:n(lt,{edge:"start",checked:c[F.filterKey],tabIndex:-1,disableRipple:!0})}),n(We,{children:F.name})]},F.filterKey))})}),n(ke,{}),n(Q,{p:1,display:"flex",justifyContent:"end",children:k(ye,{spacing:1,direction:"row",children:[n(B,{variant:"outlined",onClick:N,disabled:!A,children:"\u5168\u3066\u5916\u3059"}),n(B,{variant:"outlined",onClick:()=>S(!1),children:"\u9589\u3058\u308B"})]})})]})})})})}})]})};export{lt as C,Gt as S,Bt as a,$t as b,Ut as c,Ht as d,wt as e,Wt as f,qe as g,gt as s};
