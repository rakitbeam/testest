import{A as be,C as me,r as s,J as Z,j as P,k as a,H as Ut,bq as Ht,ah as gt,ap as jt,av as et,at as We,a_ as V,aY as Wt,I as ge,a$ as ie,ar as Be,_ as b,D as W,K as G,aV as Bt,aU as qt,N as xt,b7 as _t,O as xe,ai as Mt,G as Ce,L as Nt,bP as Yt,aa as dt,w as oe,q as ee,P as Se,Q as ye,R as Re,B as se,t as j,F as J,ax as Kt,T as _e}from"./index.995450ba.js";import{I as tt,N as Xt,P as Gt}from"./PageContent.465cd9f9.js";import{P as Zt}from"./PageFooter.1fdb1290.js";import{d as Qt}from"./Clear.24a80d9e.js";import{A as Jt}from"./ActionBar.b383b9b3.js";import{b as Ct,d as eo,a as to}from"./Download.30bec09d.js";import{B as oo}from"./ButtonMenu.02583162.js";import{d as no}from"./Delete.0e201dd5.js";import{R as ao}from"./ResponsiveDialog.793e243d.js";import"./domUtils.f5135196.js";import"./Popper.0d1c02ad.js";const ro={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};var lo=ro;function we(e){return be("MuiSlider",e)}const io=me("MuiSlider",["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel"]);var qe=io;const so=e=>{const{open:t}=e;return{offset:Z(t&&qe.valueLabelOpen),circle:qe.valueLabelCircle,label:qe.valueLabelLabel}};function Pt(e){const{children:t,className:n,value:o}=e,r=so(e);return s.exports.cloneElement(t,{className:Z(t.props.className)},P(s.exports.Fragment,{children:[t.props.children,a("span",{className:Z(r.offset,n),"aria-hidden":!0,children:a("span",{className:r.circle,children:a("span",{className:r.label,children:o})})})]}))}const co=2;function Tt(e,t){return e-t}function $e(e,t,n){return e==null?t:Math.min(Math.max(t,e),n)}function St(e,t){var n;const{index:o}=(n=e.reduce((r,d,p)=>{const i=Math.abs(t-d);return r===null||i<r.distance||i===r.distance?{distance:i,index:p}:r},null))!=null?n:{};return o}function Fe(e,t){if(t.current!==void 0&&e.changedTouches){const n=e;for(let o=0;o<n.changedTouches.length;o+=1){const r=n.changedTouches[o];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ye(e,t,n){return(e-t)*100/(n-t)}function uo(e,t,n){return(n-t)*e+t}function po(e){if(Math.abs(e)<1){const n=e.toExponential().split("e-"),o=n[0].split(".")[1];return(o?o.length:0)+parseInt(n[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function mo(e,t,n){const o=Math.round((e-n)/t)*t+n;return Number(o.toFixed(po(t)))}function yt({values:e,newValue:t,index:n}){const o=e.slice();return o[n]=t,o.sort(Tt)}function Ue({sliderRef:e,activeIndex:t,setActive:n}){var o,r;const d=We(e.current);if(!((o=e.current)!=null&&o.contains(d.activeElement))||Number(d==null||(r=d.activeElement)==null?void 0:r.getAttribute("data-index"))!==t){var p;(p=e.current)==null||p.querySelector(`[type="range"][data-index="${t}"]`).focus()}n&&n(t)}const fo={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},vo=e=>e;let He;function ot(){return He===void 0&&(typeof CSS!="undefined"&&typeof CSS.supports=="function"?He=CSS.supports("touch-action","none"):He=!0),He}function ho(e){const{"aria-labelledby":t,defaultValue:n,disabled:o=!1,disableSwap:r=!1,isRtl:d=!1,marks:p=!1,max:i=100,min:m=0,name:x,onChange:c,onChangeCommitted:h,orientation:C="horizontal",ref:I,scale:v=vo,step:u=1,tabIndex:g,value:_}=e,w=s.exports.useRef(),[O,M]=s.exports.useState(-1),[T,F]=s.exports.useState(-1),[B,te]=s.exports.useState(!1),K=s.exports.useRef(0),[E,A]=Ut({controlled:_,default:n!=null?n:m,name:"Slider"}),H=c&&((l,f,S)=>{const R=l.nativeEvent||l,y=new R.constructor(R.type,R);Object.defineProperty(y,"target",{writable:!0,value:{value:f,name:x}}),c(y,f,S)}),z=Array.isArray(E);let $=z?E.slice().sort(Tt):[E];$=$.map(l=>$e(l,m,i));const fe=p===!0&&u!==null?[...Array(Math.floor((i-m)/u)+1)].map((l,f)=>({value:m+u*f})):p||[],D=fe.map(l=>l.value),{isFocusVisibleRef:ue,onBlur:Xe,onFocus:Ge,ref:Ze}=Ht(),[Me,ne]=s.exports.useState(-1),q=s.exports.useRef(),Ne=gt(Ze,q),Ie=gt(I,Ne),Qe=l=>f=>{var S;const R=Number(f.currentTarget.getAttribute("data-index"));Ge(f),ue.current===!0&&ne(R),F(R),l==null||(S=l.onFocus)==null||S.call(l,f)},Le=l=>f=>{var S;Xe(f),ue.current===!1&&ne(-1),F(-1),l==null||(S=l.onBlur)==null||S.call(l,f)};jt(()=>{if(o&&q.current.contains(document.activeElement)){var l;(l=document.activeElement)==null||l.blur()}},[o]),o&&O!==-1&&M(-1),o&&Me!==-1&&ne(-1);const Q=l=>f=>{var S;(S=l.onChange)==null||S.call(l,f);const R=Number(f.currentTarget.getAttribute("data-index")),y=$[R],L=D.indexOf(y);let N=f.target.valueAsNumber;if(fe&&u==null&&(N=N<y?D[L-1]:D[L+1]),N=$e(N,m,i),fe&&u==null){const X=D.indexOf($[R]);N=N<$[R]?D[X-1]:D[X+1]}if(z){r&&(N=$e(N,$[R-1]||-1/0,$[R+1]||1/0));const X=N;N=yt({values:$,newValue:N,index:R});let k=R;r||(k=N.indexOf(X)),Ue({sliderRef:q,activeIndex:k})}A(N),ne(R),H&&H(f,N,R),h&&h(f,N)},Pe=s.exports.useRef();let ve=C;d&&C==="horizontal"&&(ve+="-reverse");const Y=({finger:l,move:f=!1})=>{const{current:S}=q,{width:R,height:y,bottom:L,left:N}=S.getBoundingClientRect();let X;ve.indexOf("vertical")===0?X=(L-l.y)/y:X=(l.x-N)/R,ve.indexOf("-reverse")!==-1&&(X=1-X);let k;if(k=uo(X,m,i),u)k=mo(k,u,m);else{const Je=St(D,k);k=D[Je]}k=$e(k,m,i);let le=0;if(z){f?le=Pe.current:le=St($,k),r&&(k=$e(k,$[le-1]||-1/0,$[le+1]||1/0));const Je=k;k=yt({values:$,newValue:k,index:le}),r&&f||(le=k.indexOf(Je),Pe.current=le)}return{newValue:k,activeIndex:le}},ae=et(l=>{const f=Fe(l,w);if(!f)return;if(K.current+=1,l.type==="mousemove"&&l.buttons===0){re(l);return}const{newValue:S,activeIndex:R}=Y({finger:f,move:!0});Ue({sliderRef:q,activeIndex:R,setActive:M}),A(S),!B&&K.current>co&&te(!0),H&&S!==E&&H(l,S,R)}),re=et(l=>{const f=Fe(l,w);if(te(!1),!f)return;const{newValue:S}=Y({finger:f,move:!0});M(-1),l.type==="touchend"&&F(-1),h&&h(l,S),w.current=void 0,pe()}),he=et(l=>{if(o)return;ot()||l.preventDefault();const f=l.changedTouches[0];f!=null&&(w.current=f.identifier);const S=Fe(l,w);if(S!==!1){const{newValue:y,activeIndex:L}=Y({finger:S});Ue({sliderRef:q,activeIndex:L,setActive:M}),A(y),H&&H(l,y,L)}K.current=0;const R=We(q.current);R.addEventListener("touchmove",ae),R.addEventListener("touchend",re)}),pe=s.exports.useCallback(()=>{const l=We(q.current);l.removeEventListener("mousemove",ae),l.removeEventListener("mouseup",re),l.removeEventListener("touchmove",ae),l.removeEventListener("touchend",re)},[re,ae]);s.exports.useEffect(()=>{const{current:l}=q;return l.addEventListener("touchstart",he,{passive:ot()}),()=>{l.removeEventListener("touchstart",he,{passive:ot()}),pe()}},[pe,he]),s.exports.useEffect(()=>{o&&pe()},[o,pe]);const Te=l=>f=>{var S;if((S=l.onMouseDown)==null||S.call(l,f),o||f.defaultPrevented||f.button!==0)return;f.preventDefault();const R=Fe(f,w);if(R!==!1){const{newValue:L,activeIndex:N}=Y({finger:R});Ue({sliderRef:q,activeIndex:N,setActive:M}),A(L),H&&H(f,L,N)}K.current=0;const y=We(q.current);y.addEventListener("mousemove",ae),y.addEventListener("mouseup",re)},Ee=Ye(z?$[0]:m,m,i),Ae=Ye($[$.length-1],m,i)-Ee,ke=(l={})=>{const f={onMouseDown:Te(l||{})},S=V({},l,f);return V({ref:Ie},S)},De=l=>f=>{var S;(S=l.onMouseOver)==null||S.call(l,f);const R=Number(f.currentTarget.getAttribute("data-index"));F(R)},Oe=l=>f=>{var S;(S=l.onMouseLeave)==null||S.call(l,f),F(-1)};return{active:O,axis:ve,axisProps:fo,dragging:B,focusedThumbIndex:Me,getHiddenInputProps:(l={})=>{var f;const S={onChange:Q(l||{}),onFocus:Qe(l||{}),onBlur:Le(l||{})},R=V({},l,S);return V({tabIndex:g,"aria-labelledby":t,"aria-orientation":C,"aria-valuemax":v(i),"aria-valuemin":v(m),name:x,type:"range",min:e.min,max:e.max,step:(f=e.step)!=null?f:void 0,disabled:o},R,{style:V({},lo,{direction:d?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:ke,getThumbProps:(l={})=>{const f={onMouseOver:De(l||{}),onMouseLeave:Oe(l||{})};return V({},l,f)},marks:fe,open:T,range:z,trackLeap:Ae,trackOffset:Ee,values:$}}const bo=["aria-label","aria-valuetext","className","component","classes","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","scale","step","tabIndex","track","value","valueLabelDisplay","valueLabelFormat","isRtl","components","componentsProps"],Rt=e=>e,go=e=>{const{disabled:t,dragging:n,marked:o,orientation:r,track:d,classes:p}=e;return ge({root:["root",t&&"disabled",n&&"dragging",o&&"marked",r==="vertical"&&"vertical",d==="inverted"&&"trackInverted",d===!1&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]},we,p)},xo=({children:e})=>e,Co=s.exports.forwardRef(function(t,n){var o,r,d,p,i,m,x;const{"aria-label":c,"aria-valuetext":h,className:C,component:I,classes:v,disableSwap:u=!1,disabled:g=!1,getAriaLabel:_,getAriaValueText:w,marks:O=!1,max:M=100,min:T=0,orientation:F="horizontal",scale:B=Rt,step:te=1,track:K="normal",valueLabelDisplay:E="off",valueLabelFormat:A=Rt,isRtl:H=!1,components:z={},componentsProps:$={}}=t,fe=Wt(t,bo),D=V({},t,{marks:O,classes:v,disabled:g,isRtl:H,max:M,min:T,orientation:F,scale:B,step:te,track:K,valueLabelDisplay:E,valueLabelFormat:A}),{axisProps:ue,getRootProps:Xe,getHiddenInputProps:Ge,getThumbProps:Ze,open:Me,active:ne,axis:q,range:Ne,focusedThumbIndex:Ie,dragging:Qe,marks:Le,values:Q,trackOffset:Pe,trackLeap:ve}=ho(V({},D,{ref:n}));D.marked=Le.length>0&&Le.some(y=>y.label),D.dragging=Qe,D.focusedThumbIndex=Ie;const Y=go(D),ae=(o=I!=null?I:z.Root)!=null?o:"span",re=ie({elementType:ae,getSlotProps:Xe,externalSlotProps:$.root,externalForwardedProps:fe,ownerState:D,className:[Y.root,C]}),he=(r=z.Rail)!=null?r:"span",pe=ie({elementType:he,externalSlotProps:$.rail,ownerState:D,className:Y.rail}),Te=(d=z.Track)!=null?d:"span",Ee=ie({elementType:Te,externalSlotProps:$.track,additionalProps:{style:V({},ue[q].offset(Pe),ue[q].leap(ve))},ownerState:D,className:Y.track}),Ae=(p=z.Thumb)!=null?p:"span",ke=ie({elementType:Ae,getSlotProps:Ze,externalSlotProps:$.thumb,ownerState:D}),De=(i=z.ValueLabel)!=null?i:Pt,Oe=ie({elementType:De,externalSlotProps:$.valueLabel,ownerState:D}),ze=(m=z.Mark)!=null?m:"span",Ve=ie({elementType:ze,externalSlotProps:$.mark,ownerState:D,className:Y.mark}),l=(x=z.MarkLabel)!=null?x:"span",f=ie({elementType:l,externalSlotProps:$.markLabel,ownerState:D}),S=z.Input||"input",R=ie({elementType:S,getSlotProps:Ge,externalSlotProps:$.input,ownerState:D});return P(ae,V({},re,{children:[a(he,V({},pe)),a(Te,V({},Ee)),Le.filter(y=>y.value>=T&&y.value<=M).map((y,L)=>{const N=Ye(y.value,T,M),X=ue[q].offset(N);let k;return K===!1?k=Q.indexOf(y.value)!==-1:k=K==="normal"&&(Ne?y.value>=Q[0]&&y.value<=Q[Q.length-1]:y.value<=Q[0])||K==="inverted"&&(Ne?y.value<=Q[0]||y.value>=Q[Q.length-1]:y.value>=Q[0]),P(s.exports.Fragment,{children:[a(ze,V({"data-index":L},Ve,!Be(ze)&&{markActive:k},{style:V({},X,Ve.style),className:Z(Ve.className,k&&Y.markActive)})),y.label!=null?a(l,V({"aria-hidden":!0,"data-index":L},f,!Be(l)&&{markLabelActive:k},{style:V({},X,f.style),className:Z(Y.markLabel,f.className,k&&Y.markLabelActive),children:y.label})):null]},y.value)}),Q.map((y,L)=>{const N=Ye(y,T,M),X=ue[q].offset(N),k=E==="off"?xo:De;return a(s.exports.Fragment,{children:a(k,V({},!Be(k)&&{valueLabelFormat:A,valueLabelDisplay:E,value:typeof A=="function"?A(B(y),L):A,index:L,open:Me===L||ne===L||E==="on",disabled:g},Oe,{className:Z(Y.valueLabel,Oe.className),children:a(Ae,V({"data-index":L,"data-focusvisible":Ie===L},ke,{className:Z(Y.thumb,ke.className,ne===L&&Y.active,Ie===L&&Y.focusVisible),style:V({},X,{pointerEvents:u&&ne!==L?"none":void 0},ke.style),children:a(S,V({"data-index":L,"aria-label":_?_(L):c,"aria-valuenow":B(y),"aria-valuetext":w?w(B(y),L):h,value:Q[L]},R))}))}))},L)})]}))});var So=Co;const yo=e=>!e||!Be(e);var je=yo;const Ro=["component","components","componentsProps","color","size"],ce=b({},qe,me("MuiSlider",["colorPrimary","colorSecondary","thumbColorPrimary","thumbColorSecondary","sizeSmall","thumbSizeSmall"])),Io=W("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${G(n.color)}`],n.size!=="medium"&&t[`size${G(n.size)}`],n.marked&&t.marked,n.orientation==="vertical"&&t.vertical,n.track==="inverted"&&t.trackInverted,n.track===!1&&t.trackFalse]}})(({theme:e,ownerState:t})=>b({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(e.vars||e).palette[t.color].main,WebkitTapHighlightColor:"transparent"},t.orientation==="horizontal"&&b({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},t.size==="small"&&{height:2},t.marked&&{marginBottom:20}),t.orientation==="vertical"&&b({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},t.size==="small"&&{width:2},t.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${ce.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${ce.dragging}`]:{[`& .${ce.thumb}, & .${ce.track}`]:{transition:"none"}}})),Lo=W("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})(({ownerState:e})=>b({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},e.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track==="inverted"&&{opacity:1})),ko=W("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?Bt(e.palette[t.color].main,.62):qt(e.palette[t.color].main,.5);return b({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{border:"none"},t.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track===!1&&{display:"none"},t.track==="inverted"&&{backgroundColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n,borderColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n})}),$o=W("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${G(n.color)}`],n.size!=="medium"&&t[`thumbSize${G(n.size)}`]]}})(({theme:e,ownerState:t})=>b({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{width:12,height:12},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":b({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},t.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${ce.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:xt(e.palette[t.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${ce.active}`]:{boxShadow:`0px 0px 0px 14px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:xt(e.palette[t.color].main,.16)}`},[`&.${ce.disabled}`]:{"&:hover":{boxShadow:"none"}}})),wo=W(Pt,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e,ownerState:t})=>b({[`&.${ce.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),transform:"translateY(-100%) scale(0)",position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},t.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},t.orientation==="vertical"&&{right:"30px",top:"24px",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",right:"-20%",top:"25%"}},t.size==="small"&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),_o=W("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>_t(e)&&e!=="markActive",overridesResolver:(e,t)=>t.mark})(({theme:e,ownerState:t,markActive:n})=>b({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8})),Mo=W("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>_t(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e,ownerState:t,markLabelActive:n})=>b({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},t.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},t.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(e.vars||e).palette.text.primary})),No=e=>{const{color:t,size:n,classes:o={}}=e;return b({},o,{root:Z(o.root,we(`color${G(t)}`),o[`color${G(t)}`],n&&[we(`size${G(n)}`),o[`size${G(n)}`]]),thumb:Z(o.thumb,we(`thumbColor${G(t)}`),o[`thumbColor${G(t)}`],n&&[we(`thumbSize${G(n)}`),o[`thumbSize${G(n)}`]])})},Po=s.exports.forwardRef(function(t,n){var o,r,d,p;const i=xe({props:t,name:"MuiSlider"}),x=Mt().direction==="rtl",{component:c="span",components:h={},componentsProps:C={},color:I="primary",size:v="medium"}=i,u=Ce(i,Ro),g=b({},i,{color:I,size:v}),_=No(g);return a(So,b({},u,{isRtl:x,components:b({Root:Io,Rail:Lo,Track:ko,Thumb:$o,ValueLabel:wo,Mark:_o,MarkLabel:Mo},h),componentsProps:b({},C,{root:b({},C.root,je(h.Root)&&{as:c,ownerState:b({},(o=C.root)==null?void 0:o.ownerState,{color:I,size:v})}),thumb:b({},C.thumb,je(h.Thumb)&&{ownerState:b({},(r=C.thumb)==null?void 0:r.ownerState,{color:I,size:v})}),track:b({},C.track,je(h.Track)&&{ownerState:b({},(d=C.track)==null?void 0:d.ownerState,{color:I,size:v})}),valueLabel:b({},C.valueLabel,je(h.ValueLabel)&&{ownerState:b({},(p=C.valueLabel)==null?void 0:p.ownerState,{color:I,size:v})})}),classes:_,ref:n}))});var It=Po;const To=s.exports.createContext({});var Ke=To;const Eo=s.exports.createContext({});var ut=Eo;function Ao(e){return be("MuiStep",e)}me("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Do=["active","children","className","component","completed","disabled","expanded","index","last"],Oo=e=>{const{classes:t,orientation:n,alternativeLabel:o,completed:r}=e;return ge({root:["root",n,o&&"alternativeLabel",r&&"completed"]},Ao,t)},zo=W("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>b({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),Vo=s.exports.forwardRef(function(t,n){const o=xe({props:t,name:"MuiStep"}),{active:r,children:d,className:p,component:i="div",completed:m,disabled:x,expanded:c=!1,index:h,last:C}=o,I=Ce(o,Do),{activeStep:v,connector:u,alternativeLabel:g,orientation:_,nonLinear:w}=s.exports.useContext(Ke);let[O=!1,M=!1,T=!1]=[r,m,x];v===h?O=r!==void 0?r:!0:!w&&v>h?M=m!==void 0?m:!0:!w&&v<h&&(T=x!==void 0?x:!0);const F=s.exports.useMemo(()=>({index:h,last:C,expanded:c,icon:h+1,active:O,completed:M,disabled:T}),[h,C,c,O,M,T]),B=b({},o,{active:O,orientation:_,alternativeLabel:g,completed:M,disabled:T,expanded:c,component:i}),te=Oo(B),K=P(zo,b({as:i,className:Z(te.root,p),ref:n,ownerState:B},I,{children:[u&&g&&h!==0?u:null,d]}));return a(ut.Provider,{value:F,children:u&&!g&&h!==0?P(s.exports.Fragment,{children:[u,K]}):K})});var nt=Vo,Fo=Nt(a("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Uo=Nt(a("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Ho(e){return be("MuiStepIcon",e)}const jo=me("MuiStepIcon",["root","active","completed","error","text"]);var at=jo,Lt;const Wo=["active","className","completed","error","icon"],Bo=e=>{const{classes:t,active:n,completed:o,error:r}=e;return ge({root:["root",n&&"active",o&&"completed",r&&"error"],text:["text"]},Ho,t)},rt=W(Yt,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${at.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${at.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${at.error}`]:{color:(e.vars||e).palette.error.main}})),qo=W("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),Yo=s.exports.forwardRef(function(t,n){const o=xe({props:t,name:"MuiStepIcon"}),{active:r=!1,className:d,completed:p=!1,error:i=!1,icon:m}=o,x=Ce(o,Wo),c=b({},o,{active:r,completed:p,error:i}),h=Bo(c);if(typeof m=="number"||typeof m=="string"){const C=Z(d,h.root);return i?a(rt,b({as:Uo,className:C,ref:n,ownerState:c},x)):p?a(rt,b({as:Fo,className:C,ref:n,ownerState:c},x)):P(rt,b({className:C,ref:n,ownerState:c},x,{children:[Lt||(Lt=a("circle",{cx:"12",cy:"12",r:"12"})),a(qo,{className:h.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:c,children:m})]}))}return m});var Ko=Yo;function Xo(e){return be("MuiStepLabel",e)}const Go=me("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]);var de=Go;const Zo=["children","className","componentsProps","error","icon","optional","StepIconComponent","StepIconProps"],Qo=e=>{const{classes:t,orientation:n,active:o,completed:r,error:d,disabled:p,alternativeLabel:i}=e;return ge({root:["root",n,d&&"error",p&&"disabled",i&&"alternativeLabel"],label:["label",o&&"active",r&&"completed",d&&"error",p&&"disabled",i&&"alternativeLabel"],iconContainer:["iconContainer",o&&"active",r&&"completed",d&&"error",p&&"disabled",i&&"alternativeLabel"],labelContainer:["labelContainer",i&&"alternativeLabel"]},Xo,t)},Jo=W("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})(({ownerState:e})=>b({display:"flex",alignItems:"center",[`&.${de.alternativeLabel}`]:{flexDirection:"column"},[`&.${de.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),en=W("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>b({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${de.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${de.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${de.alternativeLabel}`]:{marginTop:16},[`&.${de.error}`]:{color:(e.vars||e).palette.error.main}})),tn=W("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${de.alternativeLabel}`]:{paddingRight:0}})),on=W("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${de.alternativeLabel}`]:{textAlign:"center"}})),Et=s.exports.forwardRef(function(t,n){const o=xe({props:t,name:"MuiStepLabel"}),{children:r,className:d,componentsProps:p={},error:i=!1,icon:m,optional:x,StepIconComponent:c,StepIconProps:h}=o,C=Ce(o,Zo),{alternativeLabel:I,orientation:v}=s.exports.useContext(Ke),{active:u,disabled:g,completed:_,icon:w}=s.exports.useContext(ut),O=m||w;let M=c;O&&!M&&(M=Ko);const T=b({},o,{active:u,alternativeLabel:I,completed:_,disabled:g,error:i,orientation:v}),F=Qo(T);return P(Jo,b({className:Z(F.root,d),ref:n,ownerState:T},C,{children:[O||M?a(tn,{className:F.iconContainer,ownerState:T,children:a(M,b({completed:_,active:u,error:i,icon:O},h))}):null,P(on,{className:F.labelContainer,ownerState:T,children:[r?a(en,b({className:F.label,ownerState:T},p.label,{children:r})):null,x]})]}))});Et.muiName="StepLabel";var lt=Et;function nn(e){return be("MuiStepConnector",e)}me("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const an=["className"],rn=e=>{const{classes:t,orientation:n,alternativeLabel:o,active:r,completed:d,disabled:p}=e,i={root:["root",n,o&&"alternativeLabel",r&&"active",d&&"completed",p&&"disabled"],line:["line",`line${G(n)}`]};return ge(i,nn,t)},ln=W("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>b({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:8+4,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),sn=W("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t[`line${G(n.orientation)}`]]}})(({ownerState:e,theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return b({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:n},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),cn=s.exports.forwardRef(function(t,n){const o=xe({props:t,name:"MuiStepConnector"}),{className:r}=o,d=Ce(o,an),{alternativeLabel:p,orientation:i="horizontal"}=s.exports.useContext(Ke),{active:m,disabled:x,completed:c}=s.exports.useContext(ut),h=b({},o,{alternativeLabel:p,orientation:i,active:m,completed:c,disabled:x}),C=rn(h);return a(ln,b({className:Z(C.root,r),ref:n,ownerState:h},d,{children:a(sn,{className:C.line,ownerState:h})}))});var dn=cn;function un(e){return be("MuiStepper",e)}me("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const pn=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],mn=e=>{const{orientation:t,alternativeLabel:n,classes:o}=e;return ge({root:["root",t,n&&"alternativeLabel"]},un,o)},fn=W("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel]}})(({ownerState:e})=>b({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),vn=a(dn,{}),hn=s.exports.forwardRef(function(t,n){const o=xe({props:t,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:d=!1,children:p,className:i,component:m="div",connector:x=vn,nonLinear:c=!1,orientation:h="horizontal"}=o,C=Ce(o,pn),I=b({},o,{alternativeLabel:d,orientation:h,component:m}),v=mn(I),u=s.exports.Children.toArray(p).filter(Boolean),g=u.map((w,O)=>s.exports.cloneElement(w,b({index:O,last:O+1===u.length},w.props))),_=s.exports.useMemo(()=>({activeStep:r,alternativeLabel:d,connector:x,nonLinear:c,orientation:h}),[r,d,x,c,h]);return a(Ke.Provider,{value:_,children:a(fn,b({as:m,ownerState:I,className:Z(v.root,i),ref:n},C,{children:g}))})});var bn=hn;const gn=e=>{var F,B,te,K;const{index:t,total:n,imageSelection:o,onUpdateImage:r,setModifier:d,getModifier:p}=e,i=p(o.id),m=s.exports.useRef(null),x=s.exports.useRef(null),c=s.exports.useRef(null),h=s.exports.useRef(null);s.exports.useEffect(()=>{const E=()=>{r({...o,canvasInfo:null})};return window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}},[o,r]),s.exports.useEffect(()=>{var A,H;const E=(H=(A=h.current)==null?void 0:A.offsetWidth)!=null?H:null;!o.canvasInfo&&E!==null&&r({...o,canvasInfo:{width:E,height:E*o.imageInfo.aspectRatio,scale:E/o.imageInfo.width}})},[o,r,h]);const C=s.exports.useCallback((E,A)=>{if(c.current!==null&&typeof A=="number"){const{maxHeight:H}=c.current.style;if(typeof H=="undefined"||o.canvasInfo===null)return;const z=o.canvasInfo.height*(1-A/100),$=o.canvasInfo.height-z;c.current.style.height=`${z}px`,c.current.style.borderTop="1px dashed yellow",d(o.id,{cutTop:$/o.canvasInfo.height})}},[c,d,o]),I=s.exports.useCallback((E,A)=>{if(c.current!==null&&typeof A=="number"){const{maxHeight:H}=c.current.style;if(typeof H=="undefined"||o.canvasInfo===null)return;const z=Number(H.replace("px",""))*(A/100);c.current.style.marginTop=`-${z}px`,d(o.id,{moveUp:z/o.canvasInfo.height})}},[c,d,o]),v=s.exports.useCallback(()=>{var E,A;(A=(E=c.current)==null?void 0:E.style)!=null&&A.borderTop&&(c.current.style.borderTop="none")},[c]),u=(B=(F=o.canvasInfo)==null?void 0:F.width)!=null?B:Number.NaN,g=(K=(te=o.canvasInfo)==null?void 0:te.height)!=null?K:Number.NaN,_=Number.isFinite(u)?`${u}px`:"100%",w=Number.isFinite(g)?`${g}px`:"auto",O=Number.isFinite(g)?`-${Math.round(g/2)}px`:"0",M={0:`${u*.35}px`,1:`${u*.05}px`,2:`${u*.15}px`,3:`${u*.25}px`},T={0:`${u*(1-.35)-30}px`,1:`${u*(1-.05)-30}px`,2:`${u*(1-.15)-30}px`,3:`${u*(1-.25)-30}px`};return a(dt,{children:P(oe,{direction:"row",children:[P(ee,{sx:{position:"relative",alignSelf:"stretch"},children:[a(ee,{ref:m,pb:4,sx:{position:"absolute",top:O,left:M[`${t%4}`],height:w},children:t>0&&a(It,{sx:{'& input[type="range"]':{WebkitAppearance:"slider-vertical"}},orientation:"vertical",defaultValue:i.cutTop*100,onChange:C,onChangeCommitted:v,onKeyDown:kt,valueLabelDisplay:"off"})}),a(ee,{ref:x,pb:4,sx:{position:"absolute",top:O,left:T[`${t%4}`],height:w},children:t>0&&a(It,{sx:{'& input[type="range"]':{WebkitAppearance:"slider-vertical"}},orientation:"vertical",defaultValue:i.moveUp*100,onChange:I,valueLabelDisplay:"off",onKeyDown:kt,color:"secondary"})})]}),a(ee,{ref:c,sx:{flexGrow:1,overflow:"hidden",display:"flex",marginTop:0,borderTop:"none"},style:{height:t>0&&o.canvasInfo!==null?o.canvasInfo.height*(1-i.cutTop):"auto",maxHeight:w,marginTop:t>0&&o.canvasInfo!==null?`-${i.moveUp*o.canvasInfo.height}px`:"0"},children:a(oe,{direction:"row",alignItems:"end",children:a(ee,{ref:h,sx:{width:_,height:w},children:a("img",{width:_,height:w,src:o.dataUrl,alt:o.file.name})})})})]})})};function kt(e){(e.key==="ArrowLeft"||e.key==="ArrowRight")&&e.preventDefault()}const xn=e=>{const{imageSelections:t,onUpdateImage:n,setModifier:o,getModifier:r}=e,d=s.exports.useMemo(()=>t.map(p=>{var i,m;return(m=(i=p.canvasInfo)==null?void 0:i.height)!=null?m:null}).reduce((p,i)=>p!==null&&i!==null?p+i:null,0),[t]);return a(ee,{sx:{height:d!==null?`${d}px`:"auto"},children:t.map((p,i)=>a(gn,{imageSelection:p,index:i,total:t.length,onUpdateImage:n,setModifier:o,getModifier:r},p.id))})};async function Cn(e){const t=await Promise.allSettled([...e].map(yn)),n=[];return t.forEach(o=>{switch(o.status){case"fulfilled":{n.push(o.value);break}case"rejected":{console.error("Failed to read image",o.reason);break}}}),n}let Sn=0;async function yn(e){return new Promise((t,n)=>{try{const o=new FileReader;o.onload=()=>{const r=new Image;r.onload=()=>{t({id:`image${Sn++}`,file:e,dataUrl:`${o.result}`,imageInfo:{aspectRatio:r.height/r.width,width:r.width,height:r.height},canvasInfo:null})},r.onerror=d=>{n(d)},r.src=`${o.result}`},o.readAsDataURL(e)}catch(o){n(o)}})}function Rn(e){return[...e].sort((t,n)=>t.file.name.localeCompare(n.file.name,"en"))}function In(e){const t={},n=[];return e.forEach(o=>{t[o.file.name]||(t[o.file.name]=!0,n.push(o))}),n}function $t(e={}){return{cutTop:0,moveUp:0,...e}}const Ln=()=>{const[e,t]=s.exports.useState([]),[n,o]=s.exports.useState(!1),r=s.exports.useRef({}),d=s.exports.useCallback(v=>{o(!0),(async()=>{try{const u=await Cn(v);t(g=>In([...g,...Rn(u)])),o(!1)}catch(u){console.error(u),o(!1)}})()},[]),p=s.exports.useCallback(v=>{t(u=>u.map(g=>g.id!==v.id?g:v))},[]),i=s.exports.useCallback(v=>{t(u=>{const g=[...u];return g[v]=u[v-1],g[v-1]=u[v],v-1===0&&delete r.current[g[v-1].id],g})},[]),m=s.exports.useCallback(v=>{t(u=>{const g=[...u];return g[v]=u[v+1],g[v+1]=u[v],v===0&&delete r.current[g[v].id],g})},[]),x=s.exports.useCallback(v=>{t(u=>{const g=[...u],_=g.splice(v,1);return r.current[_[0].id]&&delete r.current[_[0].id],g})},[r]),c=s.exports.useCallback(()=>{t([])},[]),h=s.exports.useCallback((v,u)=>{var _;const g=(_=r.current[v])!=null?_:$t();r.current[v]={...g,...u}},[r]),C=s.exports.useCallback(v=>{var u;return(u=r.current[v])!=null?u:$t()},[r]),I=s.exports.useCallback(()=>{r.current={}},[r]);return{imageSelections:e,loading:n,addFiles:d,updateImageSelection:p,moveImageUp:i,moveImageDown:m,removeImage:x,clearImages:c,setModifier:h,getModifier:C,clearModifier:I}};var pt={},kn=ye.exports;Object.defineProperty(pt,"__esModule",{value:!0});var st=pt.default=void 0,$n=kn(Se),wn=Re,_n=(0,$n.default)((0,wn.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore");st=pt.default=_n;var mt={},Mn=ye.exports;Object.defineProperty(mt,"__esModule",{value:!0});var ct=mt.default=void 0,Nn=Mn(Se),Pn=Re,Tn=(0,Nn.default)((0,Pn.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");ct=mt.default=Tn;var ft={},En=ye.exports;Object.defineProperty(ft,"__esModule",{value:!0});var At=ft.default=void 0,An=En(Se),Dn=Re,On=(0,An.default)((0,Dn.jsx)("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4 2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}),"Collections");At=ft.default=On;var vt={},zn=ye.exports;Object.defineProperty(vt,"__esModule",{value:!0});var Dt=vt.default=void 0,Vn=zn(Se),Fn=Re,Un=(0,Vn.default)((0,Fn.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"}),"AddPhotoAlternate");Dt=vt.default=Un;var U=(e=>(e[e.CHOOSE_AND_REORDER=0]="CHOOSE_AND_REORDER",e[e.CUT_AND_MOVE=1]="CUT_AND_MOVE",e[e.PREVIEW_AND_CONFIRM=2]="PREVIEW_AND_CONFIRM",e))(U||{});const Hn=e=>{const{resultCanvas:t,buttonProps:n,disabled:o}=e,r=s.exports.useCallback(d=>{if(t!==null)switch(d){case"copyToClipboard":{jn(t);break}case"downloadFile":{wt(t);break}}},[t]);return Wn?a(J,{children:a(oo,{icon:a(eo,{}),text:j("button.share"),value:void 0,buttonProps:n,onClick:r,options:[{key:"copyToClipboard",icon:a(to,{}),text:j("button.copyToClipboard"),value:"copyToClipboard"},{key:"downloadFile",icon:a(Ct,{}),text:j("button.downloadFile"),value:"downloadFile"}]})}):a(se,{variant:"outlined",disabled:o||t===null,startIcon:a(Ct,{}),onClick:()=>{t!==null&&wt(t)},...n,children:j("button.downloadFile")})};function wt(e){var t=document.createElement("a");t.download="image.jpg",t.href=e.toDataURL("image/jpeg"),t.click()}async function jn(e){return new Promise((t,n)=>{e.toBlob(o=>{if(o!==null)try{navigator.clipboard.write([new ClipboardItem({[o.type]:Promise.resolve(o)})]),t()}catch(r){n(r)}},"image/png")})}function Wn(){return!!navigator.clipboard&&!!ClipboardItem}const Bn=e=>{const{mode:t,imageSelections:n,disabled:o,resultCanvas:r,onAddFiles:d,onClearImages:p,onChangeMode:i}=e,m=s.exports.useRef(null),x=s.exports.useCallback(()=>{var c,h;(h=(c=m.current)==null?void 0:c.files)!=null&&h.length&&(d(m.current.files),m.current.value="")},[d,m]);return a(Jt,{left:c=>P(J,{children:[t===U.CHOOSE_AND_REORDER&&P(J,{children:[P(se,{variant:"outlined",startIcon:n.length>0?a(Dt,{}):a(At,{}),component:"label",children:[n.length>0?j("button.addImages"):j("button.chooseImages"),a("input",{hidden:!0,ref:m,type:"file",id:"imageUpload",name:"imageUpload",multiple:!0,disabled:o,accept:"image/jpeg",onChange:x})]},"addFiles"),n.length>0&&a(se,{variant:"outlined",onClick:p,startIcon:a(Qt,{}),disabled:o,...c,children:j("button.reset")},"clearImages")]}),t===U.CUT_AND_MOVE&&a(J,{children:a(se,{variant:"outlined",onClick:()=>i(U.CHOOSE_AND_REORDER),startIcon:a(st,{}),...c,children:j("button.back")},"backToChooseAndReorder")}),t===U.PREVIEW_AND_CONFIRM&&a(J,{children:a(se,{variant:"outlined",onClick:()=>i(U.CUT_AND_MOVE),startIcon:a(st,{}),...c,children:j("button.back")},"backToCutAndMove")})]}),right:c=>P(J,{children:[t===U.CHOOSE_AND_REORDER&&a(J,{children:a(se,{variant:"outlined",onClick:()=>i(U.CUT_AND_MOVE),endIcon:a(ct,{}),disabled:n.length<2,...c,children:j("button.next")},"nextToCutAndMove")}),t===U.CUT_AND_MOVE&&a(J,{children:a(se,{variant:"outlined",onClick:()=>i(U.PREVIEW_AND_CONFIRM),endIcon:a(ct,{}),...c,children:j("button.next")},"nextToPreviewAndConfirm")}),t===U.PREVIEW_AND_CONFIRM&&a(J,{children:a(Hn,{resultCanvas:r,disabled:o||r===null,buttonProps:c},"share")})]})})};var ht={},qn=ye.exports;Object.defineProperty(ht,"__esModule",{value:!0});var Ot=ht.default=void 0,Yn=qn(Se),Kn=Re,Xn=(0,Yn.default)((0,Kn.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");Ot=ht.default=Xn;var bt={},Gn=ye.exports;Object.defineProperty(bt,"__esModule",{value:!0});var zt=bt.default=void 0,Zn=Gn(Se),Qn=Re,Jn=(0,Zn.default)((0,Qn.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");zt=bt.default=Jn;const ea=e=>{const{imageSelections:t,onMoveUp:n,onMoveDown:o,onRemove:r}=e,[d,p]=s.exports.useState(null),i=Mt(),m=Kt(i.breakpoints.down("sm"));return t.length===0?null:P(dt,{children:[a(ee,{p:1,children:a(oe,{spacing:1,children:t.map((x,c)=>P(s.exports.Fragment,{children:[a(_e,{variant:"caption",color:"text.secondary",noWrap:!0,children:x.file.name}),P(oe,{direction:"row",spacing:1,alignItems:"center",sx:{minHeight:"90px"},children:[a(ee,{sx:{flexGrow:1,position:"relative"},children:a("img",{src:x.dataUrl,alt:x.file.name,style:{width:"100%",cursor:m?"zoom-in":"default"},onClick:m?()=>p(x):void 0})}),P(oe,{spacing:1,children:[a("div",{children:a(tt,{onClick:()=>n(c),disabled:c===0,children:a(Ot,{})})}),a("div",{children:a(tt,{onClick:()=>o(c),disabled:c===t.length-1,children:a(zt,{})})})]}),a("div",{children:a(tt,{onClick:()=>r(c),children:a(no,{})})})]})]},x.id))})}),d!==null&&a(ao,{title:a(_e,{variant:"body2",noWrap:!0,children:d.file.name}),content:a(oe,{spacing:1,children:a("div",{children:a("img",{src:d.dataUrl,alt:d.file.name,style:{scale:.5}})})}),onClose:()=>p(null),actions:a(se,{variant:"outlined",onClick:()=>p(null),children:j("button.close")},"share"),maxWidth:!1})]})},it=e=>{const{step:t}=e;return a(dt,{children:a(ee,{p:1,children:P(bn,{activeStep:t,children:[a(nt,{children:a(lt,{children:j("imageEdit.chooseAndOrder")})}),a(nt,{children:a(lt,{children:j("imageEdit.cutAndMove")})}),a(nt,{children:a(lt,{children:j("imageEdit.previewAndConfirm")})})]})})})},ta=e=>{const{imageSelections:t,getModifier:n,onResultReady:o}=e,r=s.exports.useRef(null),[d,p]=s.exports.useState(null);return s.exports.useEffect(()=>{const i=document.createElement("canvas"),m=i.getContext("2d");if(m===null)return;i.width=oa(t),i.height=na(t,n);let x=0;(async()=>{for(const c of t)await new Promise(h=>{const C=new Image;C.onload=()=>{const I=Vt(c,n),v=c.imageInfo.height-I,u=Ft(c,n),g=0,_=v,w=c.imageInfo.width,O=I,M=0,T=x-u,F=c.imageInfo.width,B=I;m.drawImage(C,g,_,w,O,M,T,F,B),x=T+B,h()},C.src=c.dataUrl});o(i),p(i.toDataURL("image/jpeg"))})()},[r,t,n,o]),a("div",{children:d&&a("img",{alt:"resultImage",src:d,style:{width:"100%"}})})};function oa(e){return Math.max(...e.map(t=>t.imageInfo.width))}function na(e,t){return e.map(n=>Vt(n,t)-Ft(n,t)).reduce((n,o)=>n+o,0)}function Vt(e,t){return console.log(t(e.id).cutTop),Math.round(e.imageInfo.height*(1-t(e.id).cutTop))}function Ft(e,t){return Math.round(e.imageInfo.height*t(e.id).moveUp)}const va=()=>{const[e,t]=s.exports.useState(U.CHOOSE_AND_REORDER),[n,o]=s.exports.useState(null),{imageSelections:r,loading:d,addFiles:p,updateImageSelection:i,moveImageUp:m,moveImageDown:x,removeImage:c,clearImages:h,setModifier:C,getModifier:I,clearModifier:v}=Ln(),u=s.exports.useCallback(g=>{g===U.CHOOSE_AND_REORDER&&v(),o(null),t(g),window.scrollTo(0,0)},[]);return P(J,{children:[a(Xt,{currentRoute:"/imageEdit"}),a(Bn,{mode:e,imageSelections:r,disabled:d,resultCanvas:n,onAddFiles:p,onClearImages:h,onChangeMode:u}),a(Gt,{children:P(ee,{p:1,children:[e===U.CHOOSE_AND_REORDER&&P(oe,{pt:1,pb:1,spacing:2,children:[a(_e,{variant:"body2",children:j("imageEdit.pageDescription1")}),a(_e,{variant:"body2",children:j("imageEdit.pageDescription2")}),a(it,{step:U.CHOOSE_AND_REORDER}),a(ea,{imageSelections:r,onMoveUp:m,onMoveDown:x,onRemove:c})]}),e===U.CUT_AND_MOVE&&P(oe,{pt:1,pb:1,spacing:2,children:[a(it,{step:U.CUT_AND_MOVE}),a(_e,{variant:"body2",children:j("imageEdit.cutAndMoveDescription")}),a(xn,{imageSelections:r,onUpdateImage:i,setModifier:C,getModifier:I})]}),e===U.PREVIEW_AND_CONFIRM&&P(oe,{pt:1,pb:1,spacing:2,children:[a(it,{step:U.PREVIEW_AND_CONFIRM}),a(ta,{imageSelections:r,getModifier:I,onResultReady:o})]})]})}),a(Zt,{})]})};export{va as default};
