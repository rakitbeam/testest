import{p as e,n as g,F as P,v as L,t as i,j as o,u as C,T as f,Q as v,c as I,i as k,r as R,W as x,b4 as W,B as D,h as B,b5 as $,w as A,b6 as q,b7 as w,a1 as h,a8 as U,g as z,aK as Y,aL as j,aN as H,k as G,A as K}from"./index.d26a588e.js";import{d as V,C as Q}from"./ConfirmationDialog.a59e29c8.js";import{d as J,a as X}from"./DeleteForever.f291fe4c.js";import{S as Z,a as ee,s as se,c as te}from"./ShipTypeFilterButton.e3d4c7d1.js";import{A as ie}from"./ActionBar.6f137e82.js";import{d as ne}from"./Settings.857fdba2.js";import{T as N,a as b}from"./ToggleButtonGroup.aca8263f.js";import{N as oe,P as ae}from"./PageContent.70e41135.js";import{P as re}from"./PageFooter.b940f3e8.js";import"./ResponsiveDialog.88b64cc2.js";import"./DialogContentText.fa62da23.js";import"./domUtils.41cc6831.js";import"./useFormControl.93476e47.js";const le=a=>{const{shipFilter:s,onCancel:t,onSave:n,onReset:c,onFilter:d}=a;return e(ie,{left:l=>e(Z,{filter:s,onChange:d,researchManufacturer:!1,researchStrategyTypes:!1,researchTacticTypes:!1,buttonProps:l},"filter"),right:l=>g(P,{children:[e(L,{variant:"outlined",startIcon:e(J,{}),onClick:c,...l,children:i("button.initialize")},"reset"),e(L,{variant:"outlined",startIcon:e(X,{}),onClick:t,...l,children:i("button.cancel")},"cancel"),e(L,{variant:"contained",startIcon:e(V,{}),onClick:n,...l,children:i("button.save")},"save")]})})},_=a=>{const{label:s,options:t,possession:n,onChange:c}=a,[d,l]=o.exports.useState(n),[u,p]=o.exports.useTransition(),r=(m,y)=>{l(y===null?v.UNDEFINED:Number(y))};return o.exports.useEffect(()=>{p(()=>{c(d)})},[d,c]),g(C,{spacing:1,direction:"row",alignItems:"center",children:[e(f,{variant:"body2",children:s}),g(N,{size:"small",color:"primary",value:`${d}`,exclusive:!0,onChange:r,children:[e(b,{value:`${v.POSSESSED}`,children:t[0]}),e(b,{value:`${v.NOT_POSSESSED}`,children:t[1]})]})]})};var O={},ce=k.exports;Object.defineProperty(O,"__esModule",{value:!0});var F=O.default=void 0,de=ce(I),pe=R,ue=(0,de.default)((0,pe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");F=O.default=ue;const M=a=>{const{wish:s,onChange:t}=a,[n,c]=o.exports.useState(s),[d,l]=o.exports.useTransition(),u=(p,r)=>{c(r===null||r==="clear"?x.UNDEFINED:Number(r))};return o.exports.useEffect(()=>{l(()=>{t(n)})},[n,t]),g(C,{spacing:1,direction:"row",alignItems:"center",children:[e(f,{variant:"body2",children:i("myList.wantOption")}),g(N,{size:"small",color:"primary",value:`${n}`,exclusive:!0,onChange:u,children:[e(b,{value:`${x.WANTED}`,children:i("myList.wantOptionYes")}),e(b,{value:`${x.NOT_WANTED}`,children:i("myList.wantOptionNo")}),n!==x.UNDEFINED&&e(b,{value:"clear",children:e(F,{})})]})]})},he=a=>{const{ship:s,module:t,userSettings:n,setModulePossession:c,setModuleWish:d}=a,l=o.exports.useCallback(r=>{c(t.id,s.id,r)},[t,s,c]),u=o.exports.useCallback(r=>{d(t.id,s.id,r)},[t,s,d]),p=o.exports.useMemo(()=>W(t.id,s.id,n),[t,s,n]);return e(D,{pl:2,children:g(C,{spacing:3,children:[e(f,{variant:"h6",children:`${t.category}${t.categoryNumber} ${B(s.id,t)}`}),e(_,{label:i("myList.additionalModuleAcquiredOption"),options:[i("myList.blueprintAcquiredOptionYes"),i("myList.blueprintAcquiredOptionNo")],possession:p,onChange:l}),p===v.NOT_POSSESSED&&e(M,{wish:$(t.id,s.id,n),onChange:u})]})},t.id)},ge=a=>{const{ship:s,...t}=a,{userSettings:n,setShipPossession:c,setShipWish:d,setModulePossession:l,setModuleWish:u}=A(),p=o.exports.useMemo(()=>q(s.id,n),[s,n]),r=o.exports.useMemo(()=>w(s.id,n),[s,n]),m=o.exports.useMemo(()=>r!==x.UNDEFINED?!0:s.source===h.TECH_FILE&&p===v.NOT_POSSESSED,[s,p,r]),y=o.exports.useCallback(S=>{c(s.id,S)},[c,s]),T=o.exports.useCallback(S=>{d(s.id,S)},[d,s]);return e(U,{elevation:2,...t,children:e(D,{p:1,children:g(C,{spacing:3,children:[e(f,{variant:"h6",children:z(s)}),e(_,{label:Se(s),options:fe(s),possession:p,onChange:y}),m&&e(M,{wish:r,onChange:T}),(s.source===h.TECH_FILE||s.source===h.STARTER_SHIP)&&p===v.POSSESSED&&s.modules&&s.modules.filter(S=>!S.defaultModule).map(S=>e(he,{ship:s,module:S,userSettings:n,setModulePossession:l,setModuleWish:u},S.id))]})})})};function Se(a){switch(a.source){case h.CITY_TRADE:return i("myList.shipBoughtOption");case h.DOCK_EFFECT:return i("myList.dockingEffectBlueprintAcquiredOption");case h.SALVAGE:return i("myList.salvageAcquiredOption");default:return i("myList.blueprintAcquiredOption")}}function fe(a){switch(a.source){case h.CITY_TRADE:return[i("myList.shipBoughtOptionYes"),i("myList.shipBoughtOptionNo")];default:return[i("myList.blueprintAcquiredOptionYes"),i("myList.blueprintAcquiredOptionNo")]}}const E=a=>{const{id:s,title:t,shipDefinitions:n,initiallyOpened:c,preRenderDetails:d=!1}=a,[l,u]=o.exports.useState(c),p=o.exports.useCallback((r,m)=>{u(m)},[]);return g(Y,{expanded:l,onChange:p,children:[e(j,{id:s,expandIcon:e(ne,{}),children:e(f,{variant:"body1",children:t})}),e(H,{children:(l||d)&&e(C,{spacing:3,children:n.map(r=>e(ge,{ship:r},r.id))})})]})},me=a=>{const{shipFilter:s}=a,t=o.exports.useMemo(()=>{const n=ee(G,s);return se(n)},[s]);return g(C,{spacing:1,children:[e("div",{children:e(E,{id:"tech-file-ships",title:i("shipSource.techFile"),initiallyOpened:!1,preRenderDetails:!0,shipDefinitions:t[h.TECH_FILE]})}),e("div",{children:e(E,{id:"city-trade-ships",title:i("shipSource.cityTrade"),initiallyOpened:!1,shipDefinitions:t[h.CITY_TRADE]})}),e("div",{children:e(E,{id:"dock-effect-ships",title:i("shipSource.dockEffect"),initiallyOpened:!1,shipDefinitions:t[h.DOCK_EFFECT]})}),e("div",{children:e(E,{id:"salvage-ships",title:i("shipSource.salvage"),initiallyOpened:!1,shipDefinitions:t[h.SALVAGE]})}),e("div",{children:e(E,{id:"starter-ships",title:i("shipSource.starterShip"),initiallyOpened:!1,shipDefinitions:t[h.STARTER_SHIP]})})]})},_e=()=>{const a=K(),{saveUserSettings:s,restoreUserSettings:t,resetUserSettings:n}=A(),[c,d]=o.exports.useState(te),[l,u]=o.exports.useState(!1);o.exports.useEffect(()=>()=>{t()},[t]);const p=o.exports.useCallback(()=>{t(),a("/myList")},[t,a]),r=o.exports.useCallback(()=>{s(),a("/myList")},[s,a]),m=o.exports.useCallback(()=>{u(!1)},[]),y=o.exports.useCallback(()=>{u(!0)},[]),T=o.exports.useCallback(()=>{u(!1),n()},[n]);return g(P,{children:[e(oe,{currentRoute:"/myList"}),e(le,{shipFilter:c,onCancel:p,onReset:y,onSave:r,onFilter:d}),e(ae,{children:g(D,{p:1,children:[g(C,{pt:1,pb:2,spacing:2,children:[e(f,{variant:"body2",children:i("myListConfig.pageDescription1")}),e(f,{variant:"body2",children:i("myListConfig.pageDescription2")}),e(f,{variant:"body2",children:i("myListConfig.pageDescription3")})]}),e(me,{shipFilter:c})]})}),l&&e(Q,{title:i("button.initialize"),question:i("myList.confirmInitialize"),cancelText:i("button.cancel"),confirmText:i("button.initialize"),onCancel:m,onConfirm:T}),e(re,{})]})};export{_e as MyListEditPage,_e as default};
