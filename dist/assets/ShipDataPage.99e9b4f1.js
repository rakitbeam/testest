var S=Object.defineProperty,B=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var x=(t,n,e)=>n in t?S(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,p=(t,n)=>{for(var e in n||(n={}))w.call(n,e)&&x(t,e,n[e]);if(b)for(var e of b(n))j.call(n,e)&&x(t,e,n[e]);return t},h=(t,n)=>B(t,D(n));import{r as a,j as o,b as f,F as C,H as F}from"./vendor.67bf9958.js";import{u as A,T as I}from"./useTable.95ba11cb.js";import{s as T,a as L,b as E,c as K,d as k,e as M,f as O}from"./colums.5076fd77.js";import{f as P,B as R,g as _,L as H,C as V,A as z,S as N,c as q,d as G}from"./ActionBar.a736b9e4.js";import{c as $,i as W,r as Y,h as J,G as Q,M as U,j as X,k as Z,N as ee,C as te,B as ne,d as oe}from"./NavigationBar.8bb842c6.js";import{P as ae}from"./Paper.9c820029.js";const se=t=>{const{shipDefinitions:n,columnConfig:e}=t,{table:i,setTableData:s}=A(),r=a.exports.useMemo(()=>[T,...e.type?[L]:[],...e.row?[E]:[],...e.cost?[K]:[],...e.operationLimit?[k]:[],...e.source?[M]:[],...e.weight?[O]:[]],[e]);return a.exports.useEffect(()=>{s({columns:r,data:n,rowIdFn:l=>l.id})},[s,r,n]),o(I,{table:i,size:"small"})};var d={},ie=W.exports;Object.defineProperty(d,"__esModule",{value:!0});var y=d.default=void 0,re=ie($),ue=Y,le=(0,re.default)((0,ue.jsx)("path",{d:"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z"}),"ViewColumn");y=d.default=le;function ce(t={}){return p({name:!0,type:!1,row:!1,cost:!1,operationLimit:!1,source:!1,weight:!1},t)}function me(){return[{columnKey:"type",name:"\u8266\u7A2E"},{columnKey:"row",name:"\u914D\u7F6E"},{columnKey:"cost",name:"\u30B3\u30B9\u30C8"},{columnKey:"operationLimit",name:"\u7A3C\u50CD\u4E0A\u9650"},{columnKey:"source",name:"\u5165\u624B\u65B9\u6CD5"},{columnKey:"weight",name:"\u78BA\u7387\u306E\u91CD\u307F"}]}const pe=t=>{const{onChange:n}=t,[e,i]=a.exports.useState(t.columnConfig),[s,r]=a.exports.useState(!1),[g]=a.exports.useState(()=>me()),l=a.exports.useRef(null),v=u=>{i(m=>h(p({},m),{[u]:!m[u]}))};return a.exports.useEffect(()=>{const u=setTimeout(()=>{n(e)},0);return()=>clearTimeout(u)},[e,n]),f(C,{children:[o(P,{variant:"outlined",ref:l,children:o(R,{startIcon:o(y,{}),onClick:()=>r(!0),children:"\u8868\u793A\u9805\u76EE"})},"columnConfig"),o(J,{open:s,anchorEl:l.current,role:void 0,transition:!0,disablePortal:!0,children:({TransitionProps:u,placement:m})=>o(Q,h(p({},u),{style:{transformOrigin:m==="bottom"?"center top":"center bottom"},children:o(ae,{style:{maxHeight:_(l.current),overflowY:"auto"},children:o(F,{onClickAway:()=>r(!1),children:o(U,{id:"split-button-menu",children:g.map(c=>f(X,{selected:e[c.columnKey],onClick:()=>v(c.columnKey),children:[o(H,{children:o(V,{edge:"start",checked:e[c.columnKey],tabIndex:-1,disableRipple:!0})}),o(Z,{children:c.name})]},c.columnKey))})})})}))})]})},fe=t=>{const{shipFilter:n,columnConfig:e,onFilterChange:i,onColumnConfigChange:s}=t;return o(z,{left:f(C,{children:[o(pe,{columnConfig:e,onChange:s},"columnConfig"),o(N,{filter:n,onChange:i},"filter")]})})},ve=()=>{const[t,n]=a.exports.useState(q),[e,i]=a.exports.useState(()=>ce({name:!0,row:!0,type:!0,cost:!0,operationLimit:!0})),s=a.exports.useMemo(()=>G(oe,t),[t]);return f(C,{children:[o(ee,{currentRoute:"/shipData"}),o(fe,{shipFilter:t,columnConfig:e,onFilterChange:n,onColumnConfigChange:i}),o(te,{disabled:Object.values(e).filter(r=>r).length>3,children:o(ne,{p:1,children:o(se,{shipDefinitions:s,columnConfig:e})})})]})};export{ve as ShipDataPage,ve as default};
